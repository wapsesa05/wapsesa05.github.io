(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Bridge"],{"05f3":function(e,t,o){"use strict";o.r(t);var i=o("7a23");const n={class:"tabs-container"},s={class:"tabs"},a=["onClick"];function l(e,t,o,l,r,c){const d=Object(i["resolveComponent"])("RebateImg"),m=Object(i["resolveComponent"])("SwapBridge"),u=Object(i["resolveComponent"])("Limit"),h=Object(i["resolveComponent"])("Liquidity");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",null,[Object(i["createElementVNode"])("div",null,[Object(i["createVNode"])(d)]),Object(i["createElementVNode"])("div",n,[Object(i["createElementVNode"])("div",s,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(c.tabs,(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{class:Object(i["normalizeClass"])({active:e.value===l.tabActive}),key:t,onClick:Object(i["withModifiers"])(t=>c.handleTab(e),["stop"])},Object(i["toDisplayString"])(e.name),11,a))),128))])]),Object(i["withDirectives"])(Object(i["createElementVNode"])("div",null,[Object(i["createVNode"])(m,{ref:"swapBridge"},null,512)],512),[[i["vShow"],"swap"===l.tabActive]]),Object(i["withDirectives"])(Object(i["createElementVNode"])("div",null,[Object(i["createVNode"])(u,{ref:"limitBridge"},null,512)],512),[[i["vShow"],"limit"===l.tabActive]]),Object(i["withDirectives"])(Object(i["createElementVNode"])("div",null,[Object(i["createVNode"])(h,{ref:"liquidityBridge"},null,512)],512),[[i["vShow"],"liquidity"===l.tabActive]])])}var r=o("497e"),c=o("e524"),d=o.n(c);const m=e=>(Object(i["pushScopeId"])("data-v-4c33b1d4"),e=e(),Object(i["popScopeId"])(),e),u={class:"bridge-container"},h={class:"card-container t"},b={class:"card-container_top"},p={class:"flex items-center"},v={class:"flex justify-between items-center mt-40"},g={class:"switch-container"},f=m(()=>Object(i["createElementVNode"])("i",{class:"iconfont icon-switch"},null,-1)),k=[f],O={class:"card-container b"},j={class:"card-container_top"},w={class:"flex justify-between items-center mt-40"},T={key:0,class:"card-container flex items-center justify-between mt-6 min-h-40"},y={key:0},S={key:1},N={key:3,class:"swap-label"},V={class:"swap-label_item-left"},x={style:{display:"flex","align-items":"center"}},E={style:{"margin-right":"0.1rem"}},_={class:"swap-label_item-left"},$={style:{display:"flex","align-items":"center"}},B={key:0},A={key:1},C={class:"swap-label_item-left"},D={key:0},I={class:"swap-label_item-left"},L={class:"swap-label_item-right",style:{color:"#F81111"}},F={key:4,class:"swap-label"},P={class:"swap-label_item-left"},U={key:1,style:{display:"flex","align-items":"center"}},R={style:{"margin-right":"0.1rem"}},M={key:2,style:{display:"flex","align-items":"center"}},z={style:{"margin-right":"0.1rem"}},q={class:"swap-label_item-left"},W={style:{display:"flex","align-items":"center"}},H={class:"swap-label_item-left"},Q={class:"swap-label_item-left"},G={key:0},J={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},K={key:1},Z={key:1,class:"path-list"},Y={key:0},X={key:1,class:"path-amm"},ee=m(()=>Object(i["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},null,-1)),te={key:0,class:"select-token iconfont icon-collapse-down"},oe={key:2},ie={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},ne={key:1},se={key:0},ae={key:1,class:"path-amm"},le=m(()=>Object(i["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},null,-1)),re={key:0,class:"select-token iconfont icon-collapse-down"},ce={key:0},de={class:"swap-label_item-left"},me={class:"card-container txs-container"},ue={class:"van-hairline--bottom"},he={class:"pop-content"},be={class:"icon-container"},pe={class:"text-1"},ve={class:"select-container"},ge={class:"select-title"},fe=m(()=>Object(i["createElementVNode"])("div",{class:"select-placeholder"},null,-1)),ke={key:0,class:"select-content"},Oe=["onClick"],je={class:"select-item_left"},we={class:"select-item_left-top"},Te={class:"select-item_left-bottom"},ye={key:1,class:"select-content"},Se=["onClick"],Ne={class:"select-item_left"},Ve={class:"select-item_left-top"},xe={class:"select-item_left-bottom"},Ee={style:{background:"#fff","padding-bottom":"1rem"}},_e={class:"token-item header"},$e={class:"flex-2"},Be={class:"flex-1"},Ae={class:"flex-1 right-label"},Ce=m(()=>Object(i["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)),De=["onClick"],Ie={class:"path-list flex-start flex-2"},Le={key:0},Fe={key:1,class:"path-amm"},Pe=m(()=>Object(i["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},null,-1)),Ue={key:0,class:"tag"},Re={class:"flex-1"},Me=Object(i["createTextVNode"])(" <0.01% "),ze=Object(i["createTextVNode"])(" >40% ");function qe(e,t,n,s,a,l){const r=Object(i["resolveComponent"])("van-count-down"),c=Object(i["resolveComponent"])("van-button"),d=Object(i["resolveComponent"])("SelectBridgeToken"),m=Object(i["resolveComponent"])("van-field"),f=Object(i["resolveComponent"])("SlippageButton"),qe=Object(i["resolveComponent"])("SelectDex"),We=Object(i["resolveComponent"])("SwapModeSet"),He=Object(i["resolveComponent"])("van-image"),Qe=Object(i["resolveComponent"])("van-form"),Ge=Object(i["resolveComponent"])("van-empty"),Je=Object(i["resolveComponent"])("BridgeTxItem"),Ke=Object(i["resolveComponent"])("DynamicScrollerItem"),Ze=Object(i["resolveComponent"])("DynamicScroller"),Ye=Object(i["resolveComponent"])("ConfirmBridgeSwap"),Xe=Object(i["resolveComponent"])("van-icon"),et=Object(i["resolveComponent"])("van-action-sheet"),tt=Object(i["resolveComponent"])("ConfirmSwap"),ot=Object(i["resolveDirective"])("copy");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",u,[Object(i["createVNode"])(r,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:3e4,format:"sss",onFinish:l.onCountDownFinish},{default:Object(i["withCtx"])(e=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.seconds)+"s ",1)]),_:1},8,["onFinish"]),Object(i["createVNode"])(Qe,{class:"form-container",onSubmit:l.onSubmit},{default:Object(i["withCtx"])(()=>{var n,r,u,me,ue,he,be,pe,ve,ge,fe,ke,Oe,je,we,Te,ye,Se,Ne;return[Object(i["createElementVNode"])("div",h,[Object(i["createElementVNode"])("div",b,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("from")),1),Object(i["createElementVNode"])("div",p,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("balance"))+": "+Object(i["toDisplayString"])(e.$f.formatNumber2((null===(n=s.fromToken)||void 0===n?void 0:n.balance)||"0")),1),Object(i["createVNode"])(c,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:Object(i["withModifiers"])(l.handleMax,["stop"])},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("max")),1)]),_:1},8,["onClick"])])]),Object(i["createElementVNode"])("div",v,[Object(i["createVNode"])(d,{ref:"selectFrom",token:s.fromToken,"onUpdate:token":[t[0]||(t[0]=e=>s.fromToken=e),t[1]||(t[1]=e=>l.handelTokenChange("from"))],otherToken:s.toToken,tokens:s.tokens,balanceList:null===(r=a.userBalanceTokens)||void 0===r||null===(u=r.filter)||void 0===u?void 0:u.call(r,e=>!e.isWrapped),switchChain:""},null,8,["token","otherToken","tokens","balanceList"]),Object(i["createVNode"])(m,{modelValue:a.fromTokenAmount,"onUpdate:modelValue":[t[2]||(t[2]=e=>a.fromTokenAmount=e),l.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number"},null,8,["modelValue","onUpdate:modelValue"])])]),Object(i["createElementVNode"])("div",g,[Object(i["createElementVNode"])("div",{class:"switch-box",onClick:t[3]||(t[3]=Object(i["withModifiers"])((...e)=>l.switchToken&&l.switchToken(...e),["stop"]))},k)]),Object(i["createElementVNode"])("div",O,[Object(i["createElementVNode"])("div",j,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("to")),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("balance"))+": "+Object(i["toDisplayString"])(e.$f.formatNumber2((null===(me=s.toToken)||void 0===me?void 0:me.balance)||"0")),1)]),Object(i["createElementVNode"])("div",w,[Object(i["createVNode"])(d,{ref:"selectTo",token:s.toToken,"onUpdate:token":[t[4]||(t[4]=e=>s.toToken=e),t[5]||(t[5]=e=>l.handelTokenChange("to"))],otherToken:s.fromToken,tokens:s.tokens,balanceList:null===(ue=a.userBalanceTokens)||void 0===ue||null===(he=ue.filter)||void 0===he?void 0:he.call(ue,e=>!e.isWrapped)},null,8,["token","otherToken","tokens","balanceList"]),l.isSwap()&&!l.isOnlyGetAmountsOut?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:l.isSwap(),modelValue:a.toAmount,"onUpdate:modelValue":[t[6]||(t[6]=e=>a.toAmount=e),l.watchToAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number"},null,8,["modelValue","onUpdate:modelValue"])):(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:1,"model-value":l.toTokenAmount,readonly:"",placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number"},null,8,["model-value"]))])]),l.isSwap()?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",T,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("receiveAddress")),1),Object(i["createVNode"])(m,{modelValue:a.toAddress,"onUpdate:modelValue":t[7]||(t[7]=e=>a.toAddress=e),onBlur:t[8]||(t[8]=e=>l.watchFromAmount(a.fromTokenAmount)),placeholder:e.$t("noCex"),"input-align":"right",clearable:"",class:"input-address"},null,8,["modelValue","placeholder"]),a.isAppGetContactList?(Object(i["openBlock"])(),Object(i["createElementBlock"])("i",{key:0,class:"iconfont icon-contacts clickable",onClick:t[9]||(t[9]=Object(i["withModifiers"])(e=>a.show1=!0,["stop"]))})):Object(i["createCommentVNode"])("",!0)])),-1===l.errorCode?(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:1,class:"submit-btn",block:"",loadingText:a.loadingText,loading:a.loadingApprove,"native-type":"submit",color:"#3F80F7"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(l.submitMsg||""),1)]),_:1},8,["loadingText","loading"])):(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:2,class:"submit-btn",block:"","native-type":"submit",color:l.errorCode<=1||a.loading?l.isSwap()&&null!==(be=l.priceImpactV)&&void 0!==be&&null!==(pe=be.gt)&&void 0!==pe&&pe.call(be,.4)?"#aaa":"#3F80F7":"#aaa",loading:a.loading||a.loading1,"loading-text":a.loadingText,disabled:(l.errorCode>1||!a.fromTokenAmount||!l.toTokenAmount)&&1!==l.errorCode||!(null!==(ve=e.$refs)&&void 0!==ve&&null!==(ve=ve.selectFrom)&&void 0!==ve&&ve.isCanSwap)||!(null!==(ge=e.$refs)&&void 0!==ge&&null!==(ge=ge.selectTo)&&void 0!==ge&&ge.isCanSwap)||l.isSwap()&&(null===(fe=l.priceImpactV)||void 0===fe||null===(ke=fe.gt)||void 0===ke?void 0:ke.call(fe,.4))},{default:Object(i["withCtx"])(()=>{var t,o;return[l.isSwap()&&null!==(t=l.priceImpactV)&&void 0!==t&&null!==(o=t.gt)&&void 0!==o&&o.call(t,.4)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",y,Object(i["toDisplayString"])(e.$t("priceImpactTooHigh")),1)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",S,Object(i["toDisplayString"])(l.submitMsg||""),1))]}),_:1},8,["color","loading","loading-text","disabled"])),l.isSwap()?(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",F,[Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("div",P,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("slippage1")),1),Object(i["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[13]||(t[13]=Object(i["withModifiers"])(t=>l.alertTips(e.$t("slippage1"),e.$t("minimumReceivedTips")),["stop"]))})]),"solana"!==l.chain&&"ton"!==l.chain?(Object(i["openBlock"])(),Object(i["createBlock"])(We,{key:0,swapMode:a.customSwapMode,"onUpdate:swapMode":t[14]||(t[14]=e=>a.customSwapMode=e),autoSwapMode:a.autoSwapMode,slippage:a.customSlippage,"onUpdate:slippage":t[15]||(t[15]=e=>a.customSlippage=e),autoSlippage:a.autoSlippageValue},null,8,["swapMode","autoSwapMode","slippage","autoSlippage"])):"solana"===l.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",U,[Object(i["createElementVNode"])("span",R,Object(i["toDisplayString"])(a.solanaSlippage)+"%",1),Object(i["createVNode"])(f,{slippage:a.solanaSlippage,"onUpdate:slippage":t[16]||(t[16]=e=>a.solanaSlippage=e),icon:1,onOnSubmit:l.onSubmitSolanaSlippage},null,8,["slippage","onOnSubmit"])])):"ton"===l.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",M,[Object(i["createElementVNode"])("span",z,Object(i["toDisplayString"])(a.tonSlippage)+"%",1),Object(i["createVNode"])(f,{slippage:a.tonSlippage,"onUpdate:slippage":t[17]||(t[17]=e=>a.tonSlippage=e),icon:1,onOnSubmit:l.onSubmitTonSlippage},null,8,["slippage","onOnSubmit"])])):Object(i["createCommentVNode"])("",!0)]),Object(i["withDirectives"])(Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("div",q,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("estimatedAveragePrice")),1)]),Object(i["createElementVNode"])("div",W,[Object(i["createElementVNode"])("span",null,"$"+Object(i["toDisplayString"])(l.getAvgPrice()),1)])],512),[[i["vShow"],a.fromTokenAmount&&l.toTokenAmount]]),Object(i["withDirectives"])(Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("div",H,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("priceImpact")),1),Object(i["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[18]||(t[18]=Object(i["withModifiers"])(t=>l.alertTips(e.$t("priceImpact"),e.$t("priceImpactTips")),["stop"]))})]),Object(i["createElementVNode"])("div",{style:Object(i["normalizeStyle"])({color:l.priceImpactColor})},Object(i["toDisplayString"])(l.priceImpact)+Object(i["toDisplayString"])(null!==(Te=l.priceImpactV)&&void 0!==Te&&null!==(ye=Te.gt)&&void 0!==ye&&ye.call(Te,.05)?`(${e.$t("excessivePriceImpact")})`:""),5)],512),[[i["vShow"],a.fromTokenAmount&&l.toTokenAmount]]),Object(i["withDirectives"])(Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("div",Q,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("tokenRoute")),1),Object(i["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[19]||(t[19]=Object(i["withModifiers"])(t=>l.alertTips(e.$t("tokenRoute"),e.$t("tokenRouteTips")),["stop"]))})]),"solana"===l.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",G,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])([s.fromToken,s.toToken],(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:t},[0!==t?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",J)):Object(i["createCommentVNode"])("",!0),e.symbol?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",K,Object(i["toDisplayString"])(e.symbol),1)):Object(i["createCommentVNode"])("",!0)],64))),128))])):"ton"===l.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Z,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(a.swapRouterPath,(t,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:n},[t.symbol?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Y,Object(i["toDisplayString"])(t.symbol),1)):Object(i["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",X,[Object(i["createVNode"])(He,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:`${e.$store.state.s3BaseUrl}swap/${t.nextAmm}.jpeg`,"error-icon":o("aeccf")},null,8,["src","error-icon"]),ee])):Object(i["createCommentVNode"])("",!0)],64))),128)),a.listRouter.length>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])("i",te)):Object(i["createCommentVNode"])("",!0)])):1===(null===(Se=a.swapQuoteInfo)||void 0===Se?void 0:Se.toWrapper)||2===(null===(Ne=a.swapQuoteInfo)||void 0===Ne?void 0:Ne.toWrapper)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",oe,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(a.swapRouterPath,(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:t},[0!==t?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",ie)):Object(i["createCommentVNode"])("",!0),e.symbol?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",ne,Object(i["toDisplayString"])(e.symbol),1)):Object(i["createCommentVNode"])("",!0)],64))),128))])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:3,class:"path-list clickable",onClick:t[20]||(t[20]=Object(i["withModifiers"])(e=>a.dialogListRouterVisible=!0,["stop","prevent"]))},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(a.swapRouterPath,(t,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:n},[t.symbol?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",se,Object(i["toDisplayString"])(t.symbol),1)):Object(i["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ae,[Object(i["createVNode"])(He,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:`${e.$store.state.s3BaseUrl}swap/${t.nextAmm}.jpeg`,"error-icon":o("aeccf")},null,8,["src","error-icon"]),le])):Object(i["createCommentVNode"])("",!0)],64))),128)),a.listRouter.length>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])("i",re)):Object(i["createCommentVNode"])("",!0)]))],512),[[i["vShow"],a.fromTokenAmount&&l.toTokenAmount]]),Number(l.estimatedFee)>0&&"solana"!==l.chain&&"ton"!==l.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",ce,[Object(i["createElementVNode"])("div",de,Object(i["toDisplayString"])(e.$t("estimatedGas")),1),Object(i["createElementVNode"])("div",null,"â‰ˆ $"+Object(i["toDisplayString"])(l.estimatedFee),1)])):Object(i["createCommentVNode"])("",!0)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",N,[Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("div",V,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("slippage")),1),Object(i["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[10]||(t[10]=Object(i["withModifiers"])(t=>l.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips")),["stop"]))})]),Object(i["createElementVNode"])("div",x,[Object(i["createElementVNode"])("span",E,Object(i["toDisplayString"])(a.slippage)+"%",1),Object(i["createVNode"])(f,{slippage:a.slippage,"onUpdate:slippage":t[11]||(t[11]=e=>a.slippage=e),icon:1},null,8,["slippage"])])]),Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("div",_,Object(i["toDisplayString"])(e.$t("exchangeRates")),1),Object(i["createElementVNode"])("div",$,[a.rateType?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",B,"1 "+Object(i["toDisplayString"])(s.fromToken.symbol)+" = "+Object(i["toDisplayString"])(l.getRate(1))+" "+Object(i["toDisplayString"])(s.toToken.symbol),1)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",A,"1 "+Object(i["toDisplayString"])(s.toToken.symbol)+" = "+Object(i["toDisplayString"])(l.getRate(0))+" "+Object(i["toDisplayString"])(s.fromToken.symbol),1)),Object(i["createElementVNode"])("i",{class:"iconfont icon-switch-h ml-5 clickable",onClick:t[12]||(t[12]=Object(i["withModifiers"])(e=>a.rateType=!a.rateType,["stop"]))})])]),Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("span",C,Object(i["toDisplayString"])(e.$t("exchangeChannel")),1),Object(i["createVNode"])(qe,{ref:"selectDex",bridge:a.bridge,"bridge-list":a.bridgeList,style:{background:"transparent"}},null,8,["bridge","bridge-list"])]),Number(null===(Oe=a.bridge)||void 0===Oe||null===(Oe=Oe.router)||void 0===Oe?void 0:Oe.otherNativeFee)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",D,[Object(i["createElementVNode"])("span",I,Object(i["toDisplayString"])(e.$t("otherNativeFee")),1),Object(i["createElementVNode"])("span",L,Object(i["toDisplayString"])(a.utils.formatEther(null===(je=a.bridge)||void 0===je||null===(je=je.router)||void 0===je?void 0:je.otherNativeFee))+" "+Object(i["toDisplayString"])(null===(we=e.$store.getters.chainInfo)||void 0===we?void 0:we.mainName),1)])):Object(i["createCommentVNode"])("",!0)]))]}),_:1},8,["onSubmit"]),Object(i["createElementVNode"])("div",me,[Object(i["createElementVNode"])("h3",ue,Object(i["toDisplayString"])(e.$t("exchangeHistory")),1),Object(i["withDirectives"])(Object(i["createVNode"])(Ge,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[i["vShow"],l.totalTxs&&0===l.totalTxs.length&&!a.loadingTxs]]),Object(i["createElementVNode"])("ul",null,[Object(i["createVNode"])(Ze,{items:l.totalTxs,"min-item-size":30,"key-field":"createTimeT",class:"tokens"},{default:Object(i["withCtx"])(({item:e,index:t,active:o})=>[Object(i["createVNode"])(Ke,{item:e,active:o,"data-index":t},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(Je,{item:e},null,8,["item"])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])])]),Object(i["createVNode"])(Ye,{visible:a.show,"onUpdate:visible":t[21]||(t[21]=e=>a.show=e),fromToken:s.fromToken,toToken:s.toToken,bridge:a.bridge,fromTokenAmount:a.fromTokenAmount,toTokenAmount:l.toTokenAmount,bridgeSwapTxData:a.bridgeSwapTxData,loading:a.loadingConfirm,onConfirmSwap:l.confirmSwap},null,8,["visible","fromToken","toToken","bridge","fromTokenAmount","toTokenAmount","bridgeSwapTxData","loading","onConfirmSwap"]),Object(i["createVNode"])(et,{show:a.confirmTxVisible,"onUpdate:show":t[23]||(t[23]=e=>a.confirmTxVisible=e),title:e.$t("confirmSwap")},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",he,[Object(i["createElementVNode"])("div",be,[Object(i["createVNode"])(Xe,{class:"icon-s",name:"success",size:"0.64rem",color:"#3F80F7"})]),Object(i["createElementVNode"])("div",pe,Object(i["toDisplayString"])(e.$t("transactionSubmitted")),1),Object(i["createElementVNode"])("a",{class:"text-2 clickable",href:"javascript:;",onClick:t[22]||(t[22]=t=>e.$f.openBrowser(e.$f.formatExplorerUrl(s.fromToken.chain,this.txHash,"tx"))),rel:"noopener noreferrer"},Object(i["toDisplayString"])(e.$t("viewBlockExplorerTransactionHistory")),1)])]),_:1},8,["show","title"]),Object(i["createVNode"])(et,{show:a.show1,"onUpdate:show":t[28]||(t[28]=e=>a.show1=e),title:" ",style:{height:"50%","--van-popup-background-color":"#fff"},class:"select-action-pop"},{default:Object(i["withCtx"])(()=>{var o,n,s,r;return[Object(i["createElementVNode"])("div",ve,[Object(i["createElementVNode"])("div",ge,[Object(i["createElementVNode"])("button",{class:Object(i["normalizeClass"])({active:"contact"===a.tabActive}),onClick:t[24]||(t[24]=Object(i["withModifiers"])(e=>a.tabActive="contact",["stop"]))},Object(i["toDisplayString"])(e.$t("contacts")),3),Object(i["createElementVNode"])("button",{class:Object(i["normalizeClass"])({active:"wallet"===a.tabActive}),onClick:t[25]||(t[25]=Object(i["withModifiers"])(e=>a.tabActive="wallet",["stop"]))},Object(i["toDisplayString"])(e.$t("myWallet")),3)]),fe,"contact"===a.tabActive?(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",ke,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(a.accounts.contact,(e,o)=>{var n,s,r,c,d,m,u,h;return Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{key:o,class:"select-item clickable",onClick:Object(i["withModifiers"])(t=>l.handleSelectAccount(e),["stop"])},[Object(i["createElementVNode"])("div",je,[Object(i["createElementVNode"])("div",we,Object(i["toDisplayString"])((null===e||void 0===e?void 0:e.contact_name)||""),1),Object(i["createElementVNode"])("div",Te,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(null!==e&&void 0!==e&&e.contact_address?(null===e||void 0===e||null===(n=e.contact_address)||void 0===n||null===(s=n.slice)||void 0===s?void 0:s.call(n,0,10))+"..."+(null===e||void 0===e||null===(r=e.contact_address)||void 0===r||null===(c=r.slice)||void 0===c?void 0:c.call(r,-5)):""),1),Object(i["withDirectives"])(Object(i["createElementVNode"])("i",{class:"iconfont icon-copy clickable",onClick:t[26]||(t[26]=Object(i["withModifiers"])(()=>{},["stop"]))},null,512),[[ot,(null===e||void 0===e?void 0:e.contact_address)||""]])])]),(null===e||void 0===e||null===(d=e.contact_address)||void 0===d||null===(m=d.toLowerCase)||void 0===m?void 0:m.call(d))===(null===(u=a.toAddress)||void 0===u||null===(h=u.toLowerCase)||void 0===h?void 0:h.call(u))?(Object(i["openBlock"])(),Object(i["createBlock"])(Xe,{key:0,size:"0.32rem",color:"#3F80F7",name:"success"})):Object(i["createCommentVNode"])("",!0)],8,Oe)}),128)),Object(i["withDirectives"])(Object(i["createVNode"])(Ge,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[i["vShow"],(null===(o=a.accounts)||void 0===o?void 0:o.contact)&&0===(null===(n=a.accounts)||void 0===n||null===(n=n.contact)||void 0===n?void 0:n.length)]])])):Object(i["createCommentVNode"])("",!0),"wallet"===a.tabActive?(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",ye,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(a.accounts.wallet,(e,o)=>{var n,s,r,c,d,m,u,h;return Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{key:o,class:"select-item clickable",onClick:Object(i["withModifiers"])(t=>l.handleSelectAccount(e),["stop"])},[Object(i["createElementVNode"])("div",Ne,[Object(i["createElementVNode"])("div",Ve,Object(i["toDisplayString"])((null===e||void 0===e?void 0:e.contact_name)||""),1),Object(i["createElementVNode"])("div",xe,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(null!==e&&void 0!==e&&e.contact_address?(null===e||void 0===e||null===(n=e.contact_address)||void 0===n||null===(s=n.slice)||void 0===s?void 0:s.call(n,0,10))+"..."+(null===e||void 0===e||null===(r=e.contact_address)||void 0===r||null===(c=r.slice)||void 0===c?void 0:c.call(r,-5)):""),1),Object(i["withDirectives"])(Object(i["createElementVNode"])("i",{class:"iconfont icon-copy clickable",onClick:t[27]||(t[27]=Object(i["withModifiers"])(()=>{},["stop"]))},null,512),[[ot,(null===e||void 0===e?void 0:e.contact_address)||""]])])]),(null===e||void 0===e||null===(d=e.contact_address)||void 0===d||null===(m=d.toLowerCase)||void 0===m?void 0:m.call(d))===(null===(u=a.toAddress)||void 0===u||null===(h=u.toLowerCase)||void 0===h?void 0:h.call(u))?(Object(i["openBlock"])(),Object(i["createBlock"])(Xe,{key:0,size:"0.32rem",color:"#3F80F7",name:"success"})):Object(i["createCommentVNode"])("",!0)],8,Se)}),128)),Object(i["withDirectives"])(Object(i["createVNode"])(Ge,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[i["vShow"],(null===(s=a.accounts)||void 0===s?void 0:s.wallet)&&0===(null===(r=a.accounts)||void 0===r||null===(r=r.wallet)||void 0===r?void 0:r.length)]])])):Object(i["createCommentVNode"])("",!0)])]}),_:1},8,["show"]),Object(i["createVNode"])(et,{show:a.dialogListRouterVisible,"onUpdate:show":t[29]||(t[29]=e=>a.dialogListRouterVisible=e),title:e.$t("selectRouter"),style:{height:"60%","--van-popup-background-color":"#fff"}},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("ul",Ee,[Object(i["createElementVNode"])("li",_e,[Object(i["createElementVNode"])("span",$e,Object(i["toDisplayString"])(e.$t("router")),1),Object(i["createElementVNode"])("span",Be,Object(i["toDisplayString"])(a.isAmount?e.$t("expectedAmount"):e.$t("expectedPay")),1),Object(i["createElementVNode"])("span",Ae,Object(i["toDisplayString"])(e.$t("priceImpact")),1),Ce]),Object(i["withDirectives"])(Object(i["createVNode"])(Ge,{description:e.$t("emptyData"),class:"empty"},null,8,["description"]),[[i["vShow"],a.listRouter&&0===a.listRouter.length]]),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(a.listRouter,(t,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{key:n,class:"token-item",onClick:Object(i["withModifiers"])(e=>l.getSelectedRouter(n),["stop"])},[Object(i["createElementVNode"])("div",Ie,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(t,(t,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:n},[t.symbol?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Le,Object(i["toDisplayString"])(t.symbol),1)):Object(i["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Fe,[Object(i["createVNode"])(He,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:`${e.$store.state.s3BaseUrl}swap/${t.nextAmm}.jpeg`,"error-icon":o("aeccf")},null,8,["src","error-icon"]),Pe])):Object(i["createCommentVNode"])("",!0)],64))),128)),0===n?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ue,Object(i["toDisplayString"])(e.$t("best")),1)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("span",Re,Object(i["toDisplayString"])(e.$f.formatNumber2(t.amount)),1),t.priceImpact<10?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:0,class:"right-label flex-1",style:Object(i["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)<.01?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Me],64)):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:1,class:"right-label flex-1",style:Object(i["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)>40?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[ze],64)):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)),a.selectedRouterIndex===n?(Object(i["openBlock"])(),Object(i["createBlock"])(Xe,{key:2,size:"0.32rem",color:"#558BED",name:"success"})):(Object(i["openBlock"])(),Object(i["createBlock"])(Xe,{key:3,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,De))),128))])]),_:1},8,["show","title"]),Object(i["createVNode"])(tt,{visible:a.dialogVisibleSwap,"onUpdate:visible":t[30]||(t[30]=e=>a.dialogVisibleSwap=e),swapInfo:a.swapInfo,slippage:"solana"===l.chain?a.solanaSlippage:"ton"===l.chain?a.tonSlippage:l.swapSlippage,onSubmit:l.submitSwap,loading:a.loadingConfirmSwap,chain:e.$store.getters.netId||s.fromToken.chain,nativePrice:a.nativePrice,gasPrice:a.gasPrice},null,8,["visible","swapInfo","slippage","onSubmit","loading","chain","nativePrice","gasPrice"])])}o("d9e2"),o("14d9");var We=o("449c");const He=e=>(Object(i["pushScopeId"])("data-v-3e2c88f8"),e=e(),Object(i["popScopeId"])(),e),Qe={class:"select-box"},Ge={key:0,class:"token-container"},Je={class:"icon-token-container"},Ke=["src"],Ze={class:"text-s"},Ye={class:"text-l"},Xe={class:"un-tag"},et={key:1},tt=He(()=>Object(i["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)),ot={class:"rules-content"},it={key:0,class:"search-bar",action:"/"},nt={key:1,class:"search-bar",action:"/"},st={class:"flex justify-between items-center"},at={style:{width:"calc(100vw - 0.7rem)"}},lt=["onClick"],rt={class:"main"},ct={key:0,class:"risk-status high"},dt={key:0,class:"minor"},mt=He(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),ut={class:"right-label"},ht=He(()=>Object(i["createElementVNode"])("br",null,null,-1)),bt={key:0,class:"minor"},pt=["onClick"],vt=He(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1));function gt(e,t,n,s,a,l){var r,c,d,m;const u=Object(i["resolveComponent"])("van-image"),h=Object(i["resolveComponent"])("van-search"),b=Object(i["resolveComponent"])("van-tab"),p=Object(i["resolveComponent"])("van-tabs"),v=Object(i["resolveComponent"])("van-icon"),g=Object(i["resolveComponent"])("van-empty"),f=Object(i["resolveComponent"])("van-action-sheet");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Qe,[Object(i["createElementVNode"])("button",{class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>a.show=!0,["stop"]))},[n.token.address?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ge,[Object(i["createElementVNode"])("div",Je,[Object(i["createVNode"])(u,{round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:n.token.logoURI||(n.token.logo_url?e.$f.formatIcon({logo_url:n.token.logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(r=n.token)&&void 0!==r&&r.chain||a.active?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${(null===(c=n.token)||void 0===c?void 0:c.chain)||a.active}.png`,alt:"",srcset:""},null,8,Ke)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",Ze,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])((null===(d=n.token)||void 0===d?void 0:d.symbol)||""),1),Object(i["createElementVNode"])("span",Ye,Object(i["toDisplayString"])(l.getChainName(null===(m=n.token)||void 0===m?void 0:m.chain)||a.active),1)]),Object(i["createElementVNode"])("div",Xe,Object(i["toDisplayString"])(l.isCanSwap?"":e.$t("notSupported")),1)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",et,Object(i["toDisplayString"])(e.$t("pleaseSelectToken")),1)),tt]),Object(i["createVNode"])(f,{show:a.show,"onUpdate:show":t[6]||(t[6]=e=>a.show=e),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",ot,[a.isSearchChain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("form",it,[Object(i["createVNode"])(h,{modelValue:a.keyword1,"onUpdate:modelValue":t[1]||(t[1]=e=>a.keyword1=e),modelModifiers:{trim:!0},clearable:"","show-action":"",background:"#fff",shape:"round",placeholder:e.$t("searchChain"),onCancel:t[2]||(t[2]=e=>{a.isSearchChain=!1,a.keyword1=""})},null,8,["modelValue","placeholder"])])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("form",nt,[Object(i["createVNode"])(h,{modelValue:a.keyword,"onUpdate:modelValue":t[3]||(t[3]=e=>a.keyword=e),modelModifiers:{trim:!0},clearable:"",background:"#fff",shape:"round",placeholder:e.$t("searchContractORName")},null,8,["modelValue","placeholder"])])),Object(i["withDirectives"])(Object(i["createElementVNode"])("div",null,[Object(i["createElementVNode"])("div",st,[Object(i["createElementVNode"])("div",at,[Object(i["createVNode"])(p,{class:"tabs",active:a.active,"onUpdate:active":t[4]||(t[4]=e=>a.active=e),shrink:"",color:"#558BED",style:{"--van-tabs-nav-background-color":"#fff"},onChange:l.tabChainChange},{default:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(l.chains,(e,t)=>(Object(i["openBlock"])(),Object(i["createBlock"])(b,{title:e.name,name:e.chain,key:t},null,8,["title","name"]))),128))]),_:1},8,["active","onChange"])]),Object(i["createElementVNode"])("button",{class:"search-icon",type:"button",onClick:t[5]||(t[5]=Object(i["withModifiers"])(e=>a.isSearchChain=!0,["stop"]))},[Object(i["createVNode"])(v,{name:"search",size:"0.4rem"})])]),(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",{style:{background:"#fff","padding-bottom":"1rem"},key:a.active},[Object(i["withDirectives"])(Object(i["createVNode"])(g,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[i["vShow"],l.searchTokens1&&0===l.searchTokens1.length&&!a.loading]]),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(l.searchTokens1,(t,s)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{class:"token-item",key:s,onClick:Object(i["withModifiers"])(e=>l.handleSelectToken(t),["stop"])},[Object(i["createVNode"])(u,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:t.logoURI||(t.logo_url?e.$f.formatIcon({logo_url:t.logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("div",null,[Object(i["createElementVNode"])("div",rt,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(t.symbol),1),(t.risk_score>55||t.risk_level<0)&&1!==t.risk_level?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",ct,Object(i["toDisplayString"])(e.$t("highRisk")),1)):Object(i["createCommentVNode"])("",!0)]),t.address!==a.NATIVE_TOKEN?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",dt,Object(i["toDisplayString"])(t.address.slice(0,6)+"..."+t.address.slice(-6)),1)):Object(i["createCommentVNode"])("",!0)]),mt,Object(i["createElementVNode"])("div",ut,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(t.balance&&0!==Number(t.balance)?e.$f.formatNumber2(t.balance):""),1),ht,t.price?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",bt,Object(i["toDisplayString"])(t.balance?e.$f.formatNumberCurrencyUnit(t.balance*t.price):""),1)):Object(i["createCommentVNode"])("",!0)]),t.address===n.token.address&&a.active===n.token.chain?(Object(i["openBlock"])(),Object(i["createBlock"])(v,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(i["openBlock"])(),Object(i["createBlock"])(v,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,lt))),128))]))],512),[[i["vShow"],!a.isSearchChain]]),a.isSearchChain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",{style:{background:"#fff","padding-bottom":"1rem"},key:a.active},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(l.filterChains,(t,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{class:"token-item flex justify-between",key:n,onClick:Object(i["withModifiers"])(e=>l.selectChain(t),["stop"])},[Object(i["createVNode"])(u,{class:"icon-token",round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:`${e.$store.state.s3BaseUrl}chain/${t.chain}.png`,"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(t.name),1),vt,t.chain===a.active?(Object(i["openBlock"])(),Object(i["createBlock"])(v,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):Object(i["createCommentVNode"])("",!0)],8,pt))),128))])):Object(i["createCommentVNode"])("",!0)])]),_:1},8,["show","title"])])}var ft=o("c9d9"),kt=o("fa7d"),Ot=o("365c"),jt=o("6779"),wt=o("335a");let Tt=null;var yt={name:"SelectBridgeToken",props:{tokens:{type:Object,default:()=>({})},balanceList:{type:Array,default:()=>[]},token:{type:Object,default:()=>({address:"",chain:""})},otherToken:{type:Object,default:()=>({address:"",chain:""})},switchChain:{type:Boolean,default:!1}},emits:["onSelect","update:token"],data(){return{show:!1,keyword:"",loading:!1,NATIVE_TOKEN:ft["k"],active:"",searchTokens:[],isSearchChain:!1,keyword1:""}},computed:{filterTokens(){var e;if(!this.active||!this.tokens)return[];let t=Object(Ot["u"])(this.active,2)||this.active,o=(null===(e=this.tokens)||void 0===e?void 0:e[t])||[],i=[];this.balanceList&&this.balanceList.length>0&&this.balanceList[0].chain===this.active&&(i=this.otherToken.chain===this.active?this.balanceList:this.balanceList.filter(e=>o.some(t=>{var o,i,n,s;return(null===t||void 0===t||null===(o=t.address)||void 0===o||null===(i=o.toLowerCase)||void 0===i?void 0:i.call(o))===(null===(n=e.address)||void 0===n||null===(s=n.toLowerCase)||void 0===s?void 0:s.call(n))})));let n=[...i.slice()];if(o.slice().forEach(e=>{let t=n.find(t=>{var o,i,n,s;return(null===(o=t.id)||void 0===o||null===(i=o.toLowerCase)||void 0===i?void 0:i.call(o))===(null===e||void 0===e||null===(n=(s=e.address).toLowerCase)||void 0===n?void 0:n.call(s))+"-"+this.active});t?t.logoURI=e.logoURI:n.push(e)}),""===this.keyword)return n;let s=new RegExp(this.keyword,"i");return o.filter(e=>s.test(e.symbol)||s.test(e.name)||s.test(e.address))},searchTokens1(){var e;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.filterTokens},chain(){return this.$store.getters.netId},tabChain(){return Object(Ot["u"])(this.active)},chains(){var e,t;let o=wt["a"].get("chainConfig",ft["l"])||{},i=Object.values(o).sort((e,t)=>e.sort_id-t.sort_id),n=wt["a"].get("okxBridgeChains",Ot["b"])||[],s=e=>n.some(t=>t.chainId===Object(Ot["C"])(e)),a=(null===i||void 0===i||null===(e=i.filter)||void 0===e||null===(e=e.call(i,e=>!!ft["y"][e.netName]||Object(Ot["u"])(e.netName,2)||s(e.netName)))||void 0===e||null===(t=e.map)||void 0===t?void 0:t.call(e,e=>({chain:e.netName,name:e.name,mainName:e.mainName,bridgeChain:Object(Ot["u"])(e.netName,2),okxChainId:Object(Ot["C"])(e.netName)})))||[];return a},isCanSwap(){if(this.token.chain){var e,t,o,i;let n=Object(Ot["u"])(this.token.chain,2),s=Object(Ot["C"])(this.token.chain),a=wt["a"].get("OkxSupportChain",{}),l=this.otherToken.chain,r=null===a||void 0===a||null===(e=a[this.token.chain])||void 0===e||null===(t=e.find)||void 0===t?void 0:t.call(e,e=>e===l);if(!n&&this.otherToken.chain!==this.token.chain&&(!s||!r))return!1;if("brc20"===this.token.chain&&this.switchChain&&(null===(o=window)||void 0===o||null===(o=o._tw_)||void 0===o||!o.appGetContactListV2))return!1;let c=this.tokens[n];return!(this.otherToken.chain!==this.token.chain&&null!==c&&void 0!==c&&null!==(i=c.every)&&void 0!==i&&i.call(c,e=>(e.address||e.token)!==this.token.address))}return!0},filterChains(){if(this.keyword1){let e=new RegExp(this.keyword1,"i");return this.chains.filter(t=>e.test(t.name)||e.test(t.mainName)&&"ETH"!==t.mainName||e.test(t.bridgeChain)||e.test(t.chain))}return this.chains}},watch:{show(e){var t,o;e&&this.$nextTick(()=>{this.active=this.token.chain||this.$store.getters.netId}),this.keyword="",this.keyword1="",this.isSearchChain=!1,null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)},tokens(){this.tokens[this.active]&&this.getBalanceList(this.active)},keyword(e){""!==e?this.tokenSearch():this.searchTokens=[]}},created(){this.getOkxSupportChain()},methods:{getBridgeChain:Ot["u"],getBalanceList(e){var t,o;let i=Object(Ot["u"])(e,2),n=(null===(t=this.tokens)||void 0===t?void 0:t[i])||[];Array.isArray(null===(o=this.tokens)||void 0===o?void 0:o[i])&&"TRON"!==i&&"TON"!==i&&"BTC"!==i&&"SOLANA"!==i&&/^0x[0-9a-zA-Z]{40}$/.test(this.$store.state.currentAccount)&&Object(Ot["t"])(n.map(e=>e.address),e).then(e=>{this.tokens[i]=n.map((t,o)=>({...t,balance:jt["utils"].formatUnits(e[o].toString(),t.decimals)}))})},getChainName(e){var t;let o=wt["a"].get("chainConfig",ft["l"])||{};return(null===(t=o[e])||void 0===t?void 0:t.name)||e},getUserTokenList(e){Object(Ot["hb"])(e).then(t=>{let o=(null===t||void 0===t?void 0:t.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token})))||[];this.tokens[e]=o,Object(Ot["qb"])(e).then(t=>{var i;let n=[];var s,a,l,r;"solana"===e?n=t:n=null===(s=(null===t||void 0===t||null===(l=t.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token,balance:(null===e||void 0===e?void 0:e.value)||0})))||void 0===l||null===(r=l.filter)||void 0===r?void 0:r.call(l,e=>(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag))||[])||void 0===s||null===(a=s.filter)||void 0===a?void 0:a.call(s,e=>Number(e.balance)>0);let c=(null===o||void 0===o||null===(i=o.filter)||void 0===i?void 0:i.call(o,e=>{var t,o;return null===(t=n)||void 0===t||null===(o=t.every)||void 0===o?void 0:o.call(t,t=>e.token!==t.token)}))||[];n=[...n,...c],this.tokens[e]=n,n.length>0&&"tron"!==e&&"ton"!==e&&"brc20"!==e&&"SOLANA"!==e&&/^0x[0-9a-zA-Z]{40}$/.test(this.$store.state.currentAccount)&&Object(Ot["t"])(n.map(e=>e.token||""),e).then(t=>{var o,i;n=null===(o=n)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,(e,o)=>({...e,balance:jt["utils"].formatUnits(t[o],e.decimals||0)})),this.tokens[e]=n})})})},tabChainChange(e){let t=Object(Ot["u"])(e,2);this.show&&(t?this.getBalanceList(e):this.getUserTokenList(e))},tokenSearch(){this.otherToken.chain===this.active&&(Tt&&(clearTimeout(Tt),Tt=null),Tt=setTimeout(()=>{this.search()},500))},search(){if(""!==this.keyword){var e;let t=new RegExp(this.keyword,"i"),o=Object(Ot["u"])(this.active,2),i=(null===(e=this.tokens)||void 0===e?void 0:e[o])||[],n=i.filter(e=>t.test(e.address)||t.test(e.symbol)||t.test(e.name));this.loading=!0,Object(Ot["Ab"])(this.keyword,this.active).then(e=>{var t,o;let i=null===(t=e.filter)||void 0===t||null===(t=t.call(e,e=>e.chain===this.active&&!n.some(t=>(t.token||t.address)===(e.token||e.address))))||void 0===t||null===(o=t.map)||void 0===o?void 0:o.call(t,e=>({...e,address:e.token,decimals:e.decimals||e.decimal}));this.searchTokens=[...n,...i]}).catch(e=>{console.log(e),this.searchTokens=[]}).finally(()=>{this.loading=!1})}else this.searchTokens=this.filterTokens},handleSelectToken(e){if(null!==e&&void 0!==e&&e.address){let i={...e,chain:this.active,bridgeChain:Object(Ot["u"])(this.active,2)||this.active};if(this.$emit("update:token",i),Object.keys(i).forEach(e=>{this.token[e]=i[e]}),this.show=!1,this.switchChain){var t,o;let e=this.active;if("tron"!==e||window.tronLink)if("brc20"!==e||window.unisat)if("ton"!==e||null!==(t=window)&&void 0!==t&&null!==(t=t.mytonwallet)&&void 0!==t&&t.tonconnect)if("solana"!==e||(null!==(o=window)&&void 0!==o&&null!==(o=o.trustwallet)&&void 0!==o&&o.solana||window.solana))if(e&&"tron"!==e&&"brc20"!==e&&"ton"!==e&&!window.ethereum){let t=this.getChainName(e);this.$dialog.alert({title:this.$t("tips"),message:this.$t("goEvm",{chain:t}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}else e&&"tron"!==e&&"ton"!==e&&"brc20"!==e&&window.ethereum&&Object(kt["i"])(e);else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goSolana"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goEvm",{chain:"TON"}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goBtc"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goTron"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}this.getOkxSupportChain()}},selectChain(e){this.isSearchChain=!1,this.$nextTick(()=>{this.active=e.chain,this.tabChainChange(this.active),this.keyword1=""})},getOkxSupportChain(){var e,t;let o=null===(e=this.token)||void 0===e?void 0:e.chain,i=null===(t=this.otherToken)||void 0===t?void 0:t.chain;if(o&&i){let e=Object(Ot["C"])(o);if(!e)return;Object(Ot["T"])(e).then(e=>{console.log(e);let t=wt["a"].get("OkxSupportChain",{});t={...t,[o]:null===e||void 0===e?void 0:e.map(e=>Object(Ot["C"])(e.chainId,1))},wt["a"].set("OkxSupportChain",t)})}}}},St=(o("3ee7"),o("6b0d")),Nt=o.n(St);const Vt=Nt()(yt,[["render",gt],["__scopeId","data-v-3e2c88f8"]]);var xt=Vt;const Et=e=>(Object(i["pushScopeId"])("data-v-316f5c8e"),e=e(),Object(i["popScopeId"])(),e),_t={class:"select-box"},$t={key:1,class:"tag color-3f80f7"},Bt=Et(()=>Object(i["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)),At={key:1},Ct={style:{background:"#fff","padding-bottom":"1rem"}},Dt={class:"token-item header"},It=Et(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),Lt={class:"right-label"},Ft=Et(()=>Object(i["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)),Pt=["onClick"],Ut={class:"token-item"},Rt={class:"main"},Mt={key:1,class:"tag"},zt=Et(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),qt={class:"right-label"},Wt={key:0,class:"tag-no-gas"},Ht={key:0,class:"tag-no-gas_content"},Qt={key:1,class:"tag-no-gas_content"};function Gt(e,t,n,s,a,l){var r,c,d;const m=Object(i["resolveComponent"])("van-image"),u=Object(i["resolveComponent"])("van-empty"),h=Object(i["resolveComponent"])("van-icon"),b=Object(i["resolveComponent"])("van-action-sheet");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",_t,[n.bridge.dex||null!==(r=n.bridge)&&void 0!==r&&null!==(r=r.router)&&void 0!==r&&r.bridgeName?(Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{key:0,class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>a.show=!0,["stop"]))},[n.bridge.logoUrl?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:0,class:"icon-token mr-5",round:"",width:"0.36rem",height:"0.36rem","lazy-load":"","show-loading":"",src:n.bridge.logoUrl,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(null!==(c=n.bridge)&&void 0!==c&&c.isOkx?null===(d=n.bridge.router)||void 0===d?void 0:d.bridgeName:n.bridge.dex),1),n.bridge.isSupportNoGas?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",$t,Object(i["toDisplayString"])(e.$t("noGasSwap")),1)):Object(i["createCommentVNode"])("",!0),Bt])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",At,"--")),Object(i["createVNode"])(b,{show:a.show,"onUpdate:show":t[1]||(t[1]=e=>a.show=e),title:e.$t("exchangeChannel"),style:{height:"50%","--van-popup-background-color":"#fff"}},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("ul",Ct,[Object(i["createElementVNode"])("li",Dt,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("channel")),1),It,Object(i["createElementVNode"])("span",Lt,Object(i["toDisplayString"])(e.$t("expectedAmount1")),1),Ft]),Object(i["withDirectives"])(Object(i["createVNode"])(u,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[i["vShow"],n.bridgeList&&0===n.bridgeList.length&&!a.loading]]),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(n.bridgeList,(t,s)=>{var a;return Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{class:Object(i["normalizeClass"])(["token-item-li",{"no-gas":t.isSupportNoGas}]),key:s,onClick:Object(i["withModifiers"])(e=>l.handleSelectToken(t),["stop"])},[Object(i["createElementVNode"])("div",Ut,[t.logoUrl?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:0,class:"icon-token",round:"",width:"0.48rem",height:"0.48rem","icon-size":"0.48rem","lazy-load":"","show-loading":"",src:t.logoUrl,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",Rt,Object(i["toDisplayString"])(t.dex||(null===t||void 0===t||null===(a=t.router)||void 0===a?void 0:a.bridgeName)),1),0===s?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Mt,Object(i["toDisplayString"])(e.$t("best")),1)):Object(i["createCommentVNode"])("",!0),zt,Object(i["createElementVNode"])("div",qt,Object(i["toDisplayString"])(t.toTokenAmount),1),t.dex===n.bridge.dex?(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:2,size:"0.32rem",color:"#558BED",name:"success"})):(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:3,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))]),t.isSupportNoGas?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Wt,[0===s?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ht,Object(i["toDisplayString"])(e.$t("noGasSwapTips")),1)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Qt,Object(i["toDisplayString"])(e.$t("channelProvidesNoGasSwap")),1))])):Object(i["createCommentVNode"])("",!0)],10,Pt)}),128))])]),_:1},8,["show","title"])])}var Jt={name:"SelectDex",props:{bridgeList:{type:Array,default:()=>[]},bridge:{type:Object,default:()=>({dex:"",logoUrl:""})}},emits:["onSelect","update:bridge"],data(){return{show:!1,keyword:"",loading:!1}},watch:{show(e){var t,o;console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)}},methods:{handleSelectToken(e){if(null!==e&&void 0!==e&&e.dex){let t={...e};this.$emit("update:bridge",t),Object.keys(t).forEach(e=>{var o;this.bridge[e]=t[e],this.bridge.isSupportNoGas=null!==(o=null===t||void 0===t?void 0:t.isSupportNoGas)&&void 0!==o&&o}),this.show=!1}}}};o("2b92");const Kt=Nt()(Jt,[["render",Gt],["__scopeId","data-v-316f5c8e"]]);var Zt=Kt;const Yt=e=>(Object(i["pushScopeId"])("data-v-620e29eb"),e=e(),Object(i["popScopeId"])(),e),Xt={style:{background:"#fff","padding-bottom":"1rem"},class:"swap-container"},eo={class:"flex justify-between"},to=Yt(()=>Object(i["createElementVNode"])("span",null,null,-1)),oo={class:"flex justify-between mt-20"},io={key:0,class:"token-container"},no={class:"icon-token-container"},so=["src"],ao={class:"flex justify-between mt-20"},lo={key:0,class:"token-container"},ro={class:"icon-token-container"},co=["src"],mo={class:"flex justify-between li-item mt-20"},uo={class:"flex justify-between li-item"},ho={class:"flex justify-between items-center"},bo={key:1,class:"tag"},po={class:"flex justify-between li-item"},vo={key:0},go={key:1},fo={class:"flex justify-between li-item"},ko={class:"flex justify-between li-item"},Oo={key:0,class:"flex justify-between li-item"},jo={class:"tips"};function wo(e,t,n,s,a,l){const r=Object(i["resolveComponent"])("van-image"),c=Object(i["resolveComponent"])("van-button"),d=Object(i["resolveComponent"])("van-action-sheet");return Object(i["openBlock"])(),Object(i["createBlock"])(d,{show:l.show,"onUpdate:show":t[1]||(t[1]=e=>l.show=e),title:e.$t("confirmSwap"),style:{height:"70%","--van-popup-background-color":"#fff"}},{default:Object(i["withCtx"])(()=>{var s,a,l,d,m,u,h,b,p,v,g,f,k,O,j,w,T;return[Object(i["createElementVNode"])("ul",Xt,[Object(i["createElementVNode"])("li",eo,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("youWillSwap")),1),to]),Object(i["createElementVNode"])("li",oo,[n.fromToken.address?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",io,[Object(i["createElementVNode"])("div",no,[Object(i["createVNode"])(r,{round:"",width:"0.48rem",height:"0.48rem","icon-size":"0.48rem","lazy-load":"","show-loading":"",src:n.fromToken.logoURI||(n.fromToken.logo_url?e.$f.formatIcon(n.fromToken):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(s=n.fromToken)&&void 0!==s&&s.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${null===(a=n.fromToken)||void 0===a?void 0:a.chain}.png`,alt:"",srcset:""},null,8,so)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])((null===(l=n.fromToken)||void 0===l?void 0:l.symbol)||""),1)])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(n.fromTokenAmount),1)]),Object(i["createElementVNode"])("li",ao,[n.fromToken.address?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",lo,[Object(i["createElementVNode"])("div",ro,[Object(i["createVNode"])(r,{round:"",width:"0.48rem",height:"0.48rem","icon-size":"0.48rem","lazy-load":"","show-loading":"",src:n.toToken.logoURI||(n.toToken.logo_url?e.$f.formatIcon(n.toToken):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(d=n.toToken)&&void 0!==d&&d.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${null===(m=n.toToken)||void 0===m?void 0:m.chain}.png`,alt:"",srcset:""},null,8,co)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])((null===(u=n.toToken)||void 0===u?void 0:u.symbol)||""),1)])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(n.bridge.toTokenAmount),1)]),Object(i["createElementVNode"])("li",mo,[Object(i["createElementVNode"])("span",null,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("receiveAddress")),1),(null!==(h=n.bridgeSwapTxData)&&void 0!==h&&null!==(h=h.txInfo)&&void 0!==h&&null!==(h=h.toAddress)&&void 0!==h&&null!==(b=h.startsWith)&&void 0!==b&&b.call(h,"0x")?null===(p=n.bridgeSwapTxData)||void 0===p||null===(p=p.txInfo)||void 0===p||null===(p=p.toAddress)||void 0===p||null===(v=p.toLowerCase)||void 0===v?void 0:v.call(p):null===(g=n.bridgeSwapTxData)||void 0===g||null===(g=g.txInfo)||void 0===g?void 0:g.toAddress)===e.$store.state.currentAccount?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createTextVNode"])("("+Object(i["toDisplayString"])(e.$t("defaultCurrentAddress"))+")",1)],64)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])((null===(f=n.bridgeSwapTxData)||void 0===f||null===(f=f.txInfo)||void 0===f||null===(f=f.toAddress)||void 0===f?void 0:f.slice(0,6))+"..."+(null===(k=n.bridgeSwapTxData)||void 0===k||null===(k=k.txInfo)||void 0===k||null===(k=k.toAddress)||void 0===k?void 0:k.slice(-3))),1)]),Object(i["createElementVNode"])("li",uo,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("exchangeChannel")),1),Object(i["createElementVNode"])("div",ho,[n.bridge.logoUrl?(Object(i["openBlock"])(),Object(i["createBlock"])(r,{key:0,class:"mr-5",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:n.bridge.logoUrl,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(n.bridge.dex||""),1),null!==(O=n.bridge)&&void 0!==O&&O.isSupportNoGas?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",bo,Object(i["toDisplayString"])(e.$t("noGasSwap")),1)):Object(i["createCommentVNode"])("",!0)])]),Object(i["createElementVNode"])("li",po,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("fee")),1),null!==(j=n.bridge)&&void 0!==j&&j.okxFee?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",vo,"$"+Object(i["toDisplayString"])(e.$f.formatNumber2((null===(w=n.bridge)||void 0===w?void 0:w.okxFee)||0)),1)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",go,Object(i["toDisplayString"])(e.$f.formatNumber2((n.fromTokenAmount||0)*(n.bridge.fee||0)))+" "+Object(i["toDisplayString"])(n.fromToken.symbol)+" ("+Object(i["toDisplayString"])(100*n.bridge.fee)+"%)",1))]),Object(i["createElementVNode"])("li",fo,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("referenceRate")),1),Object(i["createElementVNode"])("span",null,"1 "+Object(i["toDisplayString"])(n.fromToken.symbol)+" = "+Object(i["toDisplayString"])(e.$f.formatNumber2(n.toTokenAmount/n.fromTokenAmount))+" "+Object(i["toDisplayString"])(n.toToken.symbol),1)]),Object(i["createElementVNode"])("li",ko,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("expectedReceipt")),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber2((null===(T=n.bridge)||void 0===T?void 0:T.receiveTokenAmount)||"0"))+" "+Object(i["toDisplayString"])(n.toToken.symbol),1)]),n.bridge.estimatedTime?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",Oo,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("estimatedCompletionTime")),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(n.bridge.estimatedTime)+"~"+Object(i["toDisplayString"])(n.bridge.estimatedTime+2)+" "+Object(i["toDisplayString"])(e.$t("min")),1)])):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(c,{class:"submit-btn",block:"",round:"",loading:n.loading,"loading-text":e.$t("confirmSwap"),onClick:t[0]||(t[0]=Object(i["withModifiers"])(t=>e.$emit("confirmSwap"),["stop"])),size:"normal",type:"primary"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("confirmSwap")),1)]),_:1},8,["loading","loading-text"]),Object(i["createElementVNode"])("div",jo,"*"+Object(i["toDisplayString"])(e.$t("confirmSwapTips")),1)])]}),_:1},8,["show","title"])}var To={name:"confirmBridgeSwap",props:{visible:{type:Boolean,default:!1},fromToken:Object,toToken:Object,fromTokenAmount:String,toTokenAmount:[String,Number],bridge:Object,loading:Boolean,bridgeSwapTxData:Object},emits:["update:visible","confirmSwap"],data(){return{}},computed:{show:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}}};o("f6ba");const yo=Nt()(To,[["render",wo],["__scopeId","data-v-620e29eb"]]);var So=yo;const No={class:"flex items-center"},Vo={class:"label mr-20"},xo={key:0,class:"token-container"},Eo={class:"icon-token-container mr-5"},_o=["src"],$o={class:"mr-5"},Bo={class:"flex items-center mt-10"},Ao={class:"label mr-20"},Co={key:0,class:"token-container"},Do={class:"icon-token-container mr-5"},Io=["src"],Lo={class:"mr-5"},Fo={class:"flex items-center justify-between mt-10 label"};function Po(e,t,n,s,a,l){var r,c,d,m,u,h,b,p,v,g,f,k;const O=Object(i["resolveComponent"])("van-image"),j=Object(i["resolveComponent"])("van-loading");return Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{class:"tx-li-item van-hairline--bottom clickable",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>l.goBridgeTx(n.item),["stop"]))},[Object(i["createElementVNode"])("div",No,[Object(i["createElementVNode"])("span",Vo,Object(i["toDisplayString"])(e.$t("from")),1),n.item.txHash?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",xo,[Object(i["createElementVNode"])("div",Eo,[Object(i["createVNode"])(O,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:n.item.fromTokenUrl||(null!==(r=n.item)&&void 0!==r&&r.from_address_logo_url?e.$f.formatIcon({logo_url:n.item.from_address_logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(c=n.item)&&void 0!==c&&c.fromTokenChain||n.item.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${null!==(d=n.item)&&void 0!==d&&d.isOkx?null===(m=n.item)||void 0===m?void 0:m.fromTokenChain:n.item.chain||a.getBridgeChain(null===(u=n.item)||void 0===u?void 0:u.fromTokenChain)}.png`,alt:"",srcset:""},null,8,_o)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("span",$o,Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.fromAmount,5)),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])((null===(h=n.item)||void 0===h?void 0:h.fromTokenSymbol)||""),1)])):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",Bo,[Object(i["createElementVNode"])("span",Ao,Object(i["toDisplayString"])(e.$t("to")),1),n.item.txHash?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Co,[Object(i["createElementVNode"])("div",Do,[Object(i["createVNode"])(O,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:n.item.toTokenUrl||(null!==(b=n.item)&&void 0!==b&&b.to_address_logo_url?e.$f.formatIcon({logo_url:n.item.to_address_logo_url}):"/icon-default.png"),"error-icon":o("aeccf")},null,8,["src","error-icon"]),null!==(p=n.item)&&void 0!==p&&p.toTokenChain||n.item.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${null!==(v=n.item)&&void 0!==v&&v.isOkx?null===(g=n.item)||void 0===g?void 0:g.toTokenChain:n.item.chain||a.getBridgeChain(null===(f=n.item)||void 0===f?void 0:f.toTokenChain)}.png`,alt:"",srcset:""},null,8,Io)):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("span",Lo,Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.toTokenAmount,5)),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])((null===(k=n.item)||void 0===k?void 0:k.toTokenSymbol)||""),1)])):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",Fo,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatDate(n.item.createTimeT)),1),"pending"===n.item.status||"wait_kyc"===n.item.status||"wait_refund"===n.item.status?(Object(i["openBlock"])(),Object(i["createBlock"])(j,{key:0,size:"0.24rem",color:"#3F80F7","text-size":"0.24rem"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(l.formatStatus(n.item.status)),1)]),_:1})):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:1,style:Object(i["normalizeStyle"])({color:l.formatStatusColor(n.item.status)})},Object(i["toDisplayString"])(l.formatStatus(n.item.status)),5))])])}var Uo={name:"BridgeTxItem",props:{item:{type:Object,default:()=>({})}},data(){return{getBridgeChain:Ot["u"]}},methods:{goBridgeTx(e){"solana"===e.chain||"ton"===e.chain?this.$f.openBrowser(this.$f.formatExplorerUrl(e.chain,e.transaction,"tx")):e.chain&&e.transaction?this.$router.push({name:"BridgeTx",params:{hash:`${e.transaction}-${e.chain}-${e.source_type}`}}):e.isOkx?this.$router.push({name:"BridgeTx",params:{hash:e.txHash},query:{isOkx:"1"}}):this.$router.push({name:"BridgeTx",params:{hash:e.txHash}})},formatStatus(e){var t;let o={pending:this.$t("pending"),success:this.$t("succeed"),fail:this.$t("failed"),wait_kyc:this.$t("wait_kyc"),wait_refund:this.$t("wait_refund"),refund_complete:this.$t("refund_complete"),timeout:this.$t("timeout"),PENDING:this.$t("pending"),SUCCESS:this.$t("succeed"),FAILURE:this.$t("failed"),REFUND:this.$t("refund")};return null!==(t=o[e])&&void 0!==t?t:e},formatStatusColor(e){return"pending"===e||"PENDING"===e||"wait_kyc"===e||"wait_refund"===e?"#3F80F7":"success"===e||"SUCCESS"===e||"refund_complete"===e||"REFUND"===e?"#12B886":"#999999"}}};o("817e");const Ro=Nt()(Uo,[["render",Po],["__scopeId","data-v-3e224b94"]]);var Mo=Ro,zo=o("a2ef"),qo=o("fadf"),Wo=o("e36d"),Ho=o("901e"),Qo=o.n(Ho),Go=o("2c28"),Jo=o("940b"),Ko=o("4360"),Zo=o("a18c");function Yo(){var e;null===(e=window.unisat)||void 0===e||e.on("accountsChanged",e=>{let t=Array.isArray(e)?e:[];Ko["a"].commit("setCurrentAccount",(null===t||void 0===t?void 0:t[0])||""),Zo["a"].go(0)})}function Xo(){return new Promise((e,t)=>{window.unisat?e(!0):setTimeout(()=>{window.unisat?(console.log("unisat successfully detected!"),e(!0)):(console.log("Please install unisat-Extension!"),t("Please install unisat-Extension!"))},3e3)})}function ei(){return new Promise((e,t)=>{Xo().then(()=>{var o;null===(o=window)||void 0===o||null===(o=o.unisat)||void 0===o||o.requestAccounts().then(t=>{console.log("unisat requestAccounts",t),Ko["a"].commit("setProvider",window.unisat),Ko["a"].commit("setChainId","brc20"),Ko["a"].commit("setWallet","Unisat"),Ko["a"].commit("setCurrentAccount",(null===t||void 0===t?void 0:t[0])||""),Yo(),e((null===t||void 0===t?void 0:t[0])||"")}).catch(e=>{console.log("connect unisat error",e),4001===e.code?t("è¯·è¿žæŽ¥"):console.error(e)})})})}var ti=o("847c"),oi=o("8e2e"),ii=o("a002"),ni=o.n(ii),si=o("20c2");let ai,li,ri;const ci="2";function di(e){return new Promise(t=>{setTimeout(t,e)})}var mi={name:"Bridge",components:{SlippageButton:We["a"],SelectBridgeToken:xt,SelectDex:Zt,ConfirmBridgeSwap:So,BridgeTxItem:Mo,ConfirmSwap:zo["a"],SwapModeSet:qo["a"]},setup(){var e,t,o,i;let n=Object(Go["useStorage"])("bridge_FromToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),s=Object(Go["useStorage"])("bridge_toToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),a=Object(Go["useStorage"])("bridge_swapSlippageInfo",{slippage:ci,auto:!0},localStorage),l=Object(Go["useStorage"])("bridge_tokens",{},localStorage),r=Object(Go["useStorage"])("solanaTxs",[]),c=Object(oi["a"])("solanaTxs1",r.value.slice()),d=Object(oi["a"])("okxBridgeTxs",[]);c.value=null===(e=c.value)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,e=>1===(null===e||void 0===e?void 0:e.is_merged)||1!==e.is_merged&&1e3*(null===e||void 0===e?void 0:e.time)<=Date.now()-864e5);let m=Object(oi["a"])("tonTxs",[]);return m.value=null===(o=m.value)||void 0===o||null===(i=o.filter)||void 0===i?void 0:i.call(o,e=>1===(null===e||void 0===e?void 0:e.is_merged)||1!==e.is_merged&&1e3*(null===e||void 0===e?void 0:e.time)<=Date.now()-864e5),{fromToken:n,toToken:s,swapSlippageInfo:a,tokens:l,solanaTxs:c,okxBridgeTxs:d,tonTxs:m}},data(){var e,t;let o=localStorage.swapSlippage||"auto";return{utils:jt["utils"],currentTime:Date.now(),slippageVisible:!1,slippage:ci,fromTokenAmount:"",toAddress:this.$store.state.currentAccount||"",bridge:{dex:"",logoUrl:""},bridgeList:[],loading:!1,loadingApprove:!1,loadingText:"",bridgeSwapTxData:{},show:!1,loadingConfirm:!1,allowance:Wo["a"].from(ft["i"]),loading1:!1,txHash:"",txs:[],getBridgeChain:Ot["u"],loadingTxs:!1,rateType:!0,confirmTxVisible:!1,show1:!1,isAppGetContactList:(null===(e=window)||void 0===e||null===(e=e._tw_)||void 0===e?void 0:e.appGetContactList)||(null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t?void 0:t.appGetContactListV2),tabActive:"wallet",accounts:{wallet:[],contact:[]},swapQuoteInfo:{},swapRouterPath:[],listRouter:[],isTax:!1,isTaxHigh:!1,dialogListRouterVisible:!1,selectedRouterIndex:0,isAmount:!0,isCannotSellAll:!1,toAmount:"",fromAmount:"",dialogVisibleSwap:!1,loadingConfirmSwap:!1,nativePrice:0,gasPrice:"0",swapSubmitInfo:{},swapInfo:{fromToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},isAmountOut:!1},swapTxs:[],fromTokenInfo:{},userBalanceTokens:[],autoSwapMode:"fast",customSwapMode:localStorage.swapMode||"auto",autoSlippageValue:ci,customSlippage:o,gasBalance:0,solanaQuoteResponse:{},swapTokenPrice:[0,0],quoteSolanaPreParams:{},solanaSlippage:localStorage.solanaSlippage||"9",priceImpactSolana:0,bridgeHashTimes:{},okxBridgeError:"",tonSlippage:localStorage.tonSlippage||"2",tonQuoteResponse:{},priceImpactTon:0,tonSwapTokenPrice:[0,0],tonSwapBaseTokenPrice:0}},computed:{swapMode(){return"auto"===this.customSwapMode?this.autoSwapMode:this.customSwapMode},swapSlippage(){return"auto"===this.customSlippage?this.autoSlippageValue:this.customSlippage},errorCode(){this.currentTime;let e=this.isSwap();if(!this.$store.state.currentAccount)return 1;if(this.fromToken.chain&&this.fromToken.chain!==this.$store.getters.netId)return 2;if(new Qo.a(this.fromTokenAmount||0).gt(this.fromToken.balance||0))return 3;if("ton"===this.chain){var t,o,i;let e=(null===(t=this.tonQuoteResponse)||void 0===t?void 0:t.totalTransferAmount)||0,n=(null===(o=this.userBalanceTokens)||void 0===o||null===(i=o.find)||void 0===i||null===(i=i.call(o,e=>e.address===ft["k"]))||void 0===i?void 0:i.initBalance)||0;if(e&&new Qo.a(e).gt(n))return 3}if(!e&&!/(^0x[0-9a-zA-Z]{40}$)|(^(T|t)[0-9a-zA-Z]{33}$)|(^(bc1|[13])[a-zA-HJ-NP-Z0-9]{20,62}$)|(^[1-9A-HJ-NP-Za-km-z]{32,44}$)/.test(this.toAddress)&&!Object(ft["t"])(this.toAddress)&&this.toAddress)return 6;let n=(Object(ft["u"])(this.toToken.address)||"tron"===this.toToken.chain)&&!Object(ft["u"])(this.toAddress),s=(ft["o"].test(this.toToken.address)||"brc20"===this.toToken.chain)&&!ft["o"].test(this.toAddress),a=(Object(ft["s"])(this.toToken.address)||"solana"===this.toToken.chain)&&!Object(ft["s"])(this.toAddress),l=(Object(ft["t"])(this.toToken.address)||"ton"===this.toToken.chain)&&!Object(ft["t"])(this.toAddress),r=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&("SOLANA"!==this.toToken.bridgeChain||"solana"!==this.toToken.chain)&&("TON"!==this.toToken.bridgeChain||"ton"!==this.toToken.chain)&&!ft["r"].test(this.toAddress);if((n||s||r||a||l)&&!e)return 6;if(new Qo.a(this.fromTokenAmount).lt(this.bridge.depositMin||0)&&this.bridge.depositMin)return 4;if(new Qo.a(this.fromTokenAmount).gt(this.bridge.depositMax||0)&&this.bridge.depositMax)return 5;let c=this.fromToken.chain,d=this.$f.getSwapContract(c),m=e?d:this.bridge.contractAddress;return Number(this.allowance)&&!this.allowance.lt(jt["utils"].parseUnits(this.fromTokenAmount||"0",this.fromToken.decimals||0))||!m||"solana"===this.chain||"ton"===this.chain?this.okxBridgeError?7:this.isSwap()?.5:0:-1},submitMsg(){var e;let t=this.fromToken.chain,o=wt["a"].get("chainConfig",ft["l"])||{},i=(null===(e=o[t])||void 0===e?void 0:e.name)||t;if(7===this.errorCode&&this.okxBridgeError){if(/Minimum amount is/i.test(this.okxBridgeError)){var n,s,a;let e=null===(n=this.okxBridgeError)||void 0===n||null===(s=n.replace)||void 0===s||null===(s=s.call(n,/Minimum amount is /i,""))||void 0===s||null===(a=s.trim)||void 0===a?void 0:a.call(s);if(Number(e))return e=jt["utils"].formatUnits(e,this.fromToken.decimals),`${this.$t("swapAmountCannotLess")} ${e||0} ${this.fromToken.symbol}`}if(/Maximum amount is/i.test(this.okxBridgeError)){var l,r,c;let e=null===(l=this.okxBridgeError)||void 0===l||null===(r=l.replace)||void 0===r||null===(r=r.call(l,/Maximum amount is /i,""))||void 0===r||null===(c=r.trim)||void 0===c?void 0:c.call(r);if(Number(e))return e=jt["utils"].formatUnits(e,this.fromToken.decimals),`${this.$t("swapAmountCannotMore")} ${e||0} ${this.fromToken.symbol}`}if(/quote route is higher than/i.test(this.okxBridgeError)){var d,m,u;let e=null===(d=this.okxBridgeError)||void 0===d||null===(m=d.replace)||void 0===m||null===(m=m.call(d,/(.*quote route is higher than )([0-9]+)(%,.*)/i,"$2"))||void 0===m||null===(u=m.trim)||void 0===u?void 0:u.call(m);if(Number(e))return this.$t("quoteRouteIsHigherThan",{dif:e})}if(/Insufficient liquidity/i.test(this.okxBridgeError))return this.$t("insufficientLiquidity1")}if("ton"===this.chain){var h,b,p;let e=(null===(h=this.tonQuoteResponse)||void 0===h?void 0:h.totalTransferAmount)||0,t=(null===(b=this.userBalanceTokens)||void 0===b||null===(p=b.find)||void 0===p||null===(p=p.call(b,e=>e.address===ft["k"]))||void 0===p?void 0:p.initBalance)||0;if(e&&new Qo.a(e).gt(t))return this.$t("tonInsufficientBalance")}let v={0:this.$t("oneClickCrossChain"),.5:this.$t("oneClickSwap"),1:this.$t("connectWallet"),2:this.$t("switchChain2",{chain:i}),3:this.$t("insufficientBalance"),6:this.$t("pleaseEnterCorrectReceiveAddress"),4:`${this.$t("swapAmountCannotLess")} ${this.bridge.depositMin||0} ${this.fromToken.symbol}`,5:`${this.$t("swapAmountCannotMore")} ${this.bridge.depositMax||0} ${this.fromToken.symbol}`,"-1":this.$t("approve"),7:this.okxBridgeError};return v[this.errorCode]},toTokenAmount(){if(this.isSwap())return this.toAmount||"";this.toAmount;return this.bridge.toTokenAmount||""},addressPattern(){return/^0x[0-9a-zA-Z]{40}$/},priceImpactV(){var e,t,o;if(!Number(this.fromTokenAmount)&&!Number(this.toTokenAmount)||!this.isSwap())return"";let i=this.$store.getters.netId||this.fromToken.chain;if("evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(e=e.trustwallet)&&void 0!==e&&e.solana&&(null===(t=window.ethereum)||void 0===t||null===(t=t.address)||void 0===t||null===(o=t.startsWith)||void 0===o||!o.call(t,"0x"))&&window.ethereum.address)&&(i="solana"),"solana"===i)return new Qo.a(this.priceImpactSolana||0);if("ton"===i)return new Qo.a(this.priceImpactTon||0);let n=this.swapQuoteInfo.routerPath,s=(null===n||void 0===n?void 0:n.length)>0?null===n||void 0===n?void 0:n[0]:null,a=(null===n||void 0===n?void 0:n.length)>0?null===n||void 0===n?void 0:n[n.length-1]:null;if(s&&a){let e=this.swapQuoteInfo.from_price,t=this.swapQuoteInfo.to_price,o=jt["utils"].formatUnits(s.amount,s.decimals),i=jt["utils"].formatUnits(a.amount,a.decimals);return new Qo.a(o).times(e).div(new Qo.a(i).times(t)).minus(1).abs()}return""},priceImpact(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},priceImpactColor(){var e,t,o,i,n,s;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(i=o.gt)&&void 0!==i&&i.call(o,.1)?"#F7933F":null!==(n=this.priceImpactV)&&void 0!==n&&null!==(s=n.gt)&&void 0!==s&&s.call(n,.05)?"#f8be46":""},contractAddress(){let e=this.bridge.contractAddress;return this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):e},totalTxs(){var e,t,o,i;let n="solana"===this.chain?null===(e=this.solanaTxs)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,e=>e.wallet_address===this.$store.state.currentAccount||!e.wallet_address):this.swapTxs;var s,a;"ton"===this.chain&&(n=null===(s=this.tonTxs)||void 0===s||null===(a=s.filter)||void 0===a?void 0:a.call(s,e=>e.wallet_address===this.$store.state.currentAccount||!e.wallet_address));let l=n.map(e=>({...e,createTimeT:1e3*e.time,txHash:e.transaction,fromTokenAddress:e.from_address,fromAmount:e.from_amount,fromTokenSymbol:e.from_symbol,toTokenAddress:e.to_address,toTokenAmount:e.to_amount,toTokenSymbol:e.to_symbol,status:1===e.is_merged?"success":(1e3*(null===e||void 0===e?void 0:e.time)<Date.now()-6e4||"timeout"===e.status||"fail"===e.status)&&0===e.is_merged?"fail"===e.status?"fail":"timeout":"pending"})),r=[...this.txs,...l,...null===(o=this.okxBridgeTxs)||void 0===o||null===(i=o.filter)||void 0===i?void 0:i.call(o,e=>{var t,o;return(null===e||void 0===e||null===(t=e.walletAddress)||void 0===t||null===(o=t.toLowerCase)||void 0===o?void 0:o.call(t))===this.$store.state.currentAccount||!e.walletAddress})];return r=r.sort((e,t)=>t.createTimeT-e.createTimeT),r},estimatedFee(){let e=this.swapInfo.gasValue;if(!e)return"0";let t=this.gasPrice,o=this.nativePrice;return this.$f.formatNumber2(new Qo.a(e.toString()).times(o).times(t).div(String(10**18)).toFixed()||"0",2)},chain(){var e,t,o;let i=this.$store.getters.netId||this.fromToken.chain;return"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(e=e.trustwallet)&&void 0!==e&&e.solana&&(null===(t=window.ethereum)||void 0===t||null===(t=t.address)||void 0===t||null===(o=t.startsWith)||void 0===o||!o.call(t,"0x"))&&window.ethereum.address)&&(i="solana"),i},isOnlyGetAmountsOut(){var e,t;let o=["viridian","aerodrome"],i=(null===(e=this.fromTokenInfo)||void 0===e||null===(e=e.pairs)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.amm)&&o.includes(null===(t=this.fromTokenInfo)||void 0===t||null===(t=t.pairs)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.amm);return"ton"===this.chain||i||!1},isInsufficientTon(){if("ton"===this.chain){var e,t,o;let i=(null===(e=this.tonQuoteResponse)||void 0===e?void 0:e.totalTransferAmount)||0,n=(null===(t=this.userBalanceTokens)||void 0===t||null===(o=t.find)||void 0===o||null===(o=o.call(t,e=>e.address===ft["k"]))||void 0===o?void 0:o.initBalance)||0;if(i&&new Qo.a(i).gt(n))return!0}return!1}},watch:{contractAddress(e){e?(this.loadingText=this.$t("checkingAllowance"),this.getBalanceAndAllowance()):this.isSwap()||(this.allowance=Wo["a"].from(ft["i"]))},fromTokenAmount(e){""===e&&(this.bridge={dex:"",logoUrl:"",toTokenAmount:""},this.isSwap()&&this.isAmount&&(this.toAmount=""))},"$store.state.currentAccount"(e){e&&!this.toAddress&&(this.toAddress=e)},show1(e){var t,o;console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)}},methods:{init(){var e,t,o,i,n,s,a;this.fromToken=Object(Go["useStorage"])("bridge_FromToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),this.toToken=Object(Go["useStorage"])("bridge_toToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),null!==(e=window)&&void 0!==e&&e.tronLink?Object(Jo["a"])().then(e=>{console.log("connectTron"),console.log("currentAccount",this.$store.state.currentAccount),this.toAddress=e,this.currentTime=Date.now(),this.getBalance(),this.getUserTokenList(),this.getBridgeTokens()}):null!==(t=window)&&void 0!==t&&t.unisat?ei().then(e=>{console.log("connectUnisat"),console.log("currentAccount",this.$store.state.currentAccount),this.toAddress=e,this.currentTime=Date.now(),this.getBalance(),this.getUserTokenList(),this.getBridgeTokens()}):"evm"!==localStorage.okxwallet_chain&&(null!==(o=window)&&void 0!==o&&o.solana||null!==(i=window)&&void 0!==i&&null!==(i=i.trustwallet)&&void 0!==i&&i.solana&&(null===(n=window.ethereum)||void 0===n||null===(n=n.address)||void 0===n||null===(s=n.startsWith)||void 0===s||!s.call(n,"0x"))&&window.ethereum.address)?Object(ti["d"])().then(e=>{console.log("connectSolana"),console.log("currentAccount",this.$store.state.currentAccount),this.toAddress=e,this.currentTime=Date.now(),this.getBalance(),this.getUserTokenList(),this.getBridgeTokens()}):null!==(a=window)&&void 0!==a&&null!==(a=a.mytonwallet)&&void 0!==a&&a.tonconnect?Object(si["a"])().then(e=>{console.log("connectTonWallet"),console.log("currentAccount",this.$store.state.currentAccount),this.toAddress=e,this.currentTime=Date.now(),this.getBalance(),this.getUserTokenList(),this.getBridgeTokens()}):(this.fromToken.chain&&this.fromToken.chain!==this.$store.getters.netId&&window.ethereum&&Object(kt["i"])(this.fromToken.chain),this.getBalance(),this.getUserTokenList(),this.getBridgeTokens()),this.getBridgeTransData(),this.appGetContactList(),this.getUserAllTxs(),this.$f.setSwapSendType(""),this.getGasBalance(),Object(Ot["T"])(),this.initOkxBridgeTxs()},getGasBalance(){"tron"!==this.$store.getters.netId&&"brc20"!==this.$store.getters.netId&&"solana"!==this.$store.getters.netId&&"ton"!==this.$store.getters.netId&&Object(Ot["F"])().then(e=>{this.gasBalance=e})},appGetContactList(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.appGetContactListV2){var o,i,n;let e=this.toToken.chain||this.fromToken.chain||this.$store.getters.netId,t=null===(o=window)||void 0===o||null===(o=o._tw_)||void 0===o||null===(i=o.appGetContactListV2)||void 0===i?void 0:i.call(o,e);console.log("accounts",t),this.accounts=t&&Object(kt["h"])(t)?JSON.parse(t):{wallet:[],contact:[]},console.log("this.accounts",this.accounts),this.tabActive=null!==(n=this.accounts)&&void 0!==n&&null!==(n=n.contact)&&void 0!==n&&n.some(e=>e.contact_address===this.toAddress)?"contact":"wallet",console.log("tabActive",this.tabActive)}else if(null!==(t=window)&&void 0!==t&&null!==(t=t._tw_)&&void 0!==t&&t.appGetContactList){var s,a,l;let e=null===(s=window)||void 0===s||null===(s=s._tw_)||void 0===s||null===(a=s.appGetContactList)||void 0===a?void 0:a.call(s);console.log("accounts",e),this.accounts=e&&Object(kt["h"])(e)?JSON.parse(e):{wallet:[],contact:[]},console.log("this.accounts",this.accounts),this.tabActive=null!==(l=this.accounts)&&void 0!==l&&null!==(l=l.contact)&&void 0!==l&&l.some(e=>e.contact_address===this.toAddress)?"contact":"wallet",console.log("tabActive",this.tabActive)}},getBridgeTokens(){Object(Ot["x"])().then(e=>{console.log(e),this.tokens=e.tokens,this.initToken(),this.getSwapTokenList(()=>{this.initToken()})})},initToken(){let e=this.$store.getters.netId,t=e?Object(Ot["u"])(this.$store.getters.netId,2)||e:"";if(t&&this.tokens[t]){var o;if(this.fromToken.address&&this.fromToken.bridgeChain){if(this.fromToken.address){let o=this.tokens[t].find(e=>{var t,o,i,n;return(null===(t=e.address)||void 0===t||null===(o=t.toLowerCase)||void 0===o?void 0:o.call(t))===(null===(i=this.fromToken)||void 0===i||null===(i=i.address)||void 0===i||null===(n=i.toLowerCase)||void 0===n?void 0:n.call(i))});o&&(this.fromToken={...this.fromToken,...o,chain:e,bridgeChain:t})}}else{var i,n,s;let o=(null===(i=this.tokens)||void 0===i||null===(i=i[t])||void 0===i||null===(n=i.find)||void 0===n?void 0:n.call(i,e=>(null===e||void 0===e?void 0:e.address)===ft["k"]))||(null===(s=this.tokens)||void 0===s||null===(s=s[t])||void 0===s?void 0:s[0]);this.fromToken={...o,chain:e,bridgeChain:t}}if(this.toToken.address&&this.toToken.bridgeChain||null===(o=this.tokens)||void 0===o||null===(o=o[t])||void 0===o||!o[1]){if(this.toToken.address&&this.toToken.bridgeChain){let e=Object(Ot["u"])(this.toToken.bridgeChain),t=this.toToken.bridgeChain;if(e){let o=this.tokens[t].find(e=>{var t,o,i,n;return(null===(t=e.address)||void 0===t||null===(o=t.toLowerCase)||void 0===o?void 0:o.call(t))===(null===(i=this.toToken)||void 0===i||null===(i=i.address)||void 0===i||null===(n=i.toLowerCase)||void 0===n?void 0:n.call(i))});o&&(this.toToken={...this.toToken,...o,chain:e,bridgeChain:t})}}}else{var a,l,r;let o=null===(a=this.tokens)||void 0===a||null===(a=a[t])||void 0===a?void 0:a.find(e=>new RegExp("USDT").test(e.symbol));o=o||(null===(l=this.tokens)||void 0===l||null===(l=l[t])||void 0===l?void 0:l.find(e=>new RegExp("USDT").test(e.symbol))),this.toToken={...null!==(r=o)&&void 0!==r?r:this.tokens[t][1],chain:e,bridgeChain:t}}let c=(Object(ft["u"])(this.toToken.address)||"tron"===this.toToken.chain)&&!Object(ft["u"])(this.toAddress),d=(ft["o"].test(this.toToken.address)||"brc20"===this.toToken.chain)&&!ft["o"].test(this.toAddress),m=(Object(ft["s"])(this.toToken.address)||"solana"===this.toToken.chain)&&!Object(ft["s"])(this.toAddress),u=(Object(ft["t"])(this.toToken.address)||"ton"===this.toToken.chain)&&!Object(ft["t"])(this.toAddress),h=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&("SOLANA"!==this.toToken.bridgeChain||"solana"!==this.toToken.chain)&&("TON"!==this.toToken.bridgeChain||"ton"!==this.toToken.chain)&&!ft["r"].test(this.toAddress);(c||d||h||m||u)&&(this.toAddress=""),this.fromToken.address&&this.fromToken.chain&&this.getBalanceAndAllowance()}},getBalanceAndAllowance(){if("brc20"===this.fromToken.chain||"solana"===this.fromToken.chain||"ton"===this.fromToken.chain||this.fromToken.address===ft["k"])return this.allowance=Wo["a"].from(ft["i"]),this.getFromBalance(),void this.getToBalance();if(this.fromToken.chain&&this.fromToken.chain!==this.$store.getters.netId)return;this.loadingText=this.$t("checkingAllowance"),this.loading1=!0;let e=this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):this.bridge.contractAddress;Object(Ot["r"])(this.fromToken.address,e||this.bridge.contractAddress,this.fromToken.chain).then(e=>{this.allowance=e.allowance,this.fromToken.balance=jt["utils"].formatUnits(e.balance.toString(),this.fromToken.decimals)}).finally(()=>{this.loading1=!1}),this.getToBalance()},getBalance(){this.getFromBalance(),this.getToBalance()},getFromBalance(){this.fromToken.address&&this.fromToken.chain&&this.$store.state.currentAccount&&Object(Ot["s"])(this.fromToken.address,this.fromToken.chain).then(e=>{e.decimals&&(this.fromToken.decimals=e.decimals),this.fromToken.balance=jt["utils"].formatUnits(null===e||void 0===e?void 0:e.balance.toString(),this.fromToken.decimals)})},getToBalance(){this.toToken.address&&this.toToken.chain&&this.$store.state.currentAccount&&Object(Ot["s"])(this.toToken.address,this.toToken.chain).then(e=>{e.decimals&&(this.toToken.decimals=e.decimals),this.toToken.balance=jt["utils"].formatUnits(null===e||void 0===e?void 0:e.balance.toString(),this.toToken.decimals)})},watchFromAmount(e){if(this.isSwap()){if(this.loading&&!this.isAmount)return;let t=Number(e);if(""===e||"."===e)return this.fromTokenAmount="",this.toAmount="",void(this.loading=!1);if(0===t&&0!==Number(this.toAmount))return this.toAmount=0,void(this.loading=!1);t&&(this.isAmount=!0,this.toAmount="")}(Number(e)<0||Number.isNaN(Number(e)))&&(this.fromTokenAmount="0"),this.fromToken.address&&this.toToken.address&&this.fromTokenAmount&&this.fromToken.bridgeChain&&this.toToken.bridgeChain&&this.$store.state.currentAccount&&(new Qo.a(this.fromTokenAmount).lte(0)||(ai&&(clearTimeout(ai),ai=null),this.loading=!0,this.loadingText=this.$t("lookingForBestChannel"),ai=setTimeout(()=>{this.getBridgeQuote()},500)))},watchToAmount(e){if(this.isSwap()){if(this.loading&&this.isAmount)return;let t=Number(e);if(""===e||"."===e)return this.fromTokenAmount="",this.toAmount="",void(this.loading=!1);if(0===t&&0!==Number(this.fromTokenAmount))return this.fromTokenAmount=0,void(this.loading=!1);t&&(this.fromTokenAmount="",this.isAmount=!1)}(Number(e)<0||Number.isNaN(Number(e)))&&(this.toAmount="0"),this.fromToken.address&&this.toToken.address&&this.toAmount&&this.fromToken.bridgeChain&&this.toToken.bridgeChain&&this.$store.state.currentAccount&&(new Qo.a(this.toAmount).lte(0)||(ai&&(clearTimeout(ai),ai=null),this.loading=!0,this.loadingText=this.$t("lookingForBestChannel"),ai=setTimeout(()=>{this.getBridgeQuote(!1)},500)))},handelTokenChange(e){if(this.bridgeList=[],this.bridge={},"from"===e){var t;this.fromTokenAmount="";let e=this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):this.bridge.contractAddress;e?this.getBalanceAndAllowance():this.getFromBalance(),0!==(null===(t=this.userBalanceTokens)||void 0===t?void 0:t.length)&&this.userBalanceTokens[0].chain===this.fromToken.chain||this.getUserTokenList()}else{this.getToBalance();let e=(Object(ft["u"])(this.toToken.address)||"tron"===this.toToken.chain)&&!Object(ft["u"])(this.toAddress),t=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&!ft["r"].test(this.toAddress)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&("SOLANA"!==this.toToken.bridgeChain||"solana"!==this.toToken.chain)&&("TON"!==this.toToken.bridgeChain||"ton"!==this.toToken.chain),o=(ft["o"].test(this.toToken.address)||"tron"===this.toToken.chain)&&!ft["o"].test(this.toAddress),i=(Object(ft["s"])(this.toToken.address)||"solana"===this.toToken.chain)&&!Object(ft["s"])(this.toAddress),n=(Object(ft["t"])(this.toToken.address)||"ton"===this.toToken.chain)&&!Object(ft["t"])(this.toAddress);(e||t||o||i||n)&&(this.toAddress=""),this.appGetContactList()}this.watchFromAmount(this.fromTokenAmount)},onCountDownFinish(){var e;this.loading||this.loading1||this.loadingConfirm||this.show||"hidden"===document.visibilityState||null!==(e=this.$refs)&&void 0!==e&&null!==(e=e.selectDex)&&void 0!==e&&e.show?this.countDownFinishReset():(this.bridgeList=[],this.bridge={},this.isSwap()&&!this.isAmount?this.watchToAmount(this.toAmount):this.watchFromAmount(this.fromTokenAmount))},countDownFinishReset(){this.$refs.countDown.reset(),this.isSwap()&&this.dialogVisibleSwap&&.5===this.errorCode&&!this.loadingConfirmSwap&&this.getSwapTx(!1)},switchToken(){let e={...this.fromToken};this.fromToken=this.toToken,this.toToken=e,this.fromTokenAmount="",this.getBridgeQuote(),this.getBalanceAndAllowance(),this.fromToken.chain!==this.$store.getters.netId&&Object(kt["i"])(this.fromToken.chain)},getBridgeQuote(){var e;if(!this.fromToken.address||!this.toToken.address||!this.fromTokenAmount&&!this.toAmount||!this.fromToken.bridgeChain||!this.toToken.bridgeChain||!this.$store.state.currentAccount)return void(this.okxBridgeError="");if(this.fromToken.address===this.toToken.address&&this.fromToken.bridgeChain===this.toToken.bridgeChain)return this.okxBridgeError="",this.$toast({position:"top",message:this.$t("twoTokensCannotBeTheSame")}),void(this.loading=!1);if(this.isSwap())return void this.getQuoteInfo(this.isAmount);if(!this.$refs.selectFrom.isCanSwap||!this.$refs.selectTo.isCanSwap){this.okxBridgeError="";let e=this.$refs.selectFrom.isCanSwap?this.toToken.chain:this.fromToken.chain,o=Object(Ot["u"])(e,2);if(!o){var t;let o=wt["a"].get("chainConfig",ft["l"])||{};null===(t=o[e])||void 0===t||t.name;return this.$toast({position:"top",message:this.$t("tokenDoesNotSupportCross-chain")}),void(this.loading=!1)}let i=this.$refs.selectFrom.isCanSwap?this.toToken.symbol:this.fromToken.symbol;return this.$toast({position:"top",message:i+" "+this.$t("tokenDoesNotSupportCross-chain")}),void(this.loading=!1)}let o=""===this.toAddress,i=(Object(ft["u"])(this.toToken.address)||"tron"===this.toToken.chain)&&!Object(ft["u"])(this.toAddress),n=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&!ft["r"].test(this.toAddress)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&("SOLANA"!==this.toToken.bridgeChain||"solana"!==this.toToken.chain)&&("TON"!==this.toToken.bridgeChain||"ton"!==this.toToken.chain),s=(ft["o"].test(this.toToken.address)||"brc20"===this.toToken.chain)&&!ft["o"].test(this.toAddress),a=(Object(ft["s"])(this.toToken.address)||"solana"===this.toToken.chain)&&!Object(ft["s"])(this.toAddress),l=(Object(ft["t"])(this.toToken.address)||"ton"===this.toToken.chain)&&!Object(ft["t"])(this.toAddress);if(o||i||n||s||a||l)return this.okxBridgeError="",this.$toast({position:"top",message:this.$t("pleaseEnterCorrectReceiveAddress")}),void(this.loading=!1);let r=this.fromToken.chain,c=this.toToken.chain;if(!Object(Ot["u"])(r,2)||!Object(Ot["u"])(c,2))return void this.getOkxBridgeQuote();let d={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,fromTokenAmount:null===(e=jt["utils"].parseUnits(this.fromTokenAmount,this.fromToken.decimals||0))||void 0===e?void 0:e.toString(),fromTokenChain:this.fromToken.bridgeChain,toTokenChain:this.toToken.bridgeChain,toAddress:this.toAddress||this.$store.state.currentAccount||"",slippage:this.slippage};this.okxBridgeError="",this.loading=!0,this.loadingText=this.$t("lookingForBestChannel"),Object(Ot["v"])(d).then(e=>{var t,o;let i=(e.txData||[]).filter(e=>d.fromTokenChain!==d.toTokenChain&&["SWFT","Bridgers","Aggregator"].includes(e.dex)||d.fromTokenChain===d.toTokenChain);if(null!==(t=window)&&void 0!==t&&null!==(t=t._tw_)&&void 0!==t&&t.appSendSwftTxs&&"ETH"!==d.fromTokenChain&&"TRON"!==d.fromTokenChain&&"BTC"!==d.toTokenChain||(i=i.map(e=>({...e,isSupportNoGas:!1}))),this.hasNoGas()){let e=i.findIndex(e=>e.isSupportNoGas);if(e>-1&&i.length>1){let t={...i[e]},o={...i[0]};i[0]=t,i[e]=o}}this.bridgeList=i,this.bridge={...this.bridgeList[0]},null!==(o=this.bridgeList)&&void 0!==o&&o[0]||this.$toast({position:"top",message:this.$t("noChannel")})}).catch(e=>{console.log(e),this.$toast({position:"top",message:e})}).finally(()=>{this.loading=!1,this.countDownFinishReset()})},getOkxBridgeQuote(){var e,t,o;let i={fromChainId:Object(Ot["C"])(this.fromToken.chain),toChainId:Object(Ot["C"])(this.toToken.chain),fromTokenAddress:null===(e=this.fromToken)||void 0===e?void 0:e.address,toTokenAddress:null===(t=this.toToken)||void 0===t?void 0:t.address,amount:null===(o=jt["utils"].parseUnits(this.fromTokenAmount,this.fromToken.decimals||0))||void 0===o?void 0:o.toString(),slippage:new Qo.a(this.slippage).div(100).toFixed(),priceImpactProtectionPercentage:.4,sort:"2",userWalletAddress:this.$store.state.currentAccount,receiveAddress:this.toAddress||this.$store.state.currentAccount||""};Object(Ot["R"])(i).then(e=>{var t,o,i,n;this.okxBridgeError="",console.log("getOkxBridgeQuote",e),null!==e&&void 0!==e&&e[0]||this.$toast({position:"top",message:this.$t("noChannel")}),this.bridgeList=null===e||void 0===e?void 0:e.map(e=>{var t;return{...e,toTokenAmount:jt["utils"].formatUnits(e.toTokenAmount||"0",this.toToken.decimals||0),dex:(null===e||void 0===e||null===(t=e.router)||void 0===t?void 0:t.bridgeName)||"OKX"}});let s=Object(Ot["S"])(this.fromToken.chain);this.bridge={...this.bridgeList[0],isOkx:!0,contractAddress:s};let a=ft["k"]+"-"+(null===(t=this.fromToken)||void 0===t?void 0:t.chain),l=(null===(o=this.bridge)||void 0===o||null===(o=o.router)||void 0===o?void 0:o.crossChainFeeTokenAddress)+"-"+(null===(i=this.fromToken)||void 0===i?void 0:i.chain),{crossChainFee:r,otherNativeFee:c}=(null===(n=this.bridge)||void 0===n?void 0:n.router)||{},d=[a];Number(r||0)>0&&d.push(l),d.length>0&&Object(Ot["lb"])(d).then(e=>{var t,o;console.log("getTokensPrice",e);let i=e[0],n=e[1],s=n?new Qo.a(r||0).times((null===n||void 0===n?void 0:n.current_price_usd)||0).div(new Qo.a(10).pow(n.decimals||(null===n||void 0===n?void 0:n.decimal)||0)):new Qo.a(0),a=i?new Qo.a(c||0).times((null===i||void 0===i?void 0:i.current_price_usd)||0).div(new Qo.a(10).pow(i.decimals||(null===i||void 0===i?void 0:i.decimal)||0)):new Qo.a(0),{gasPrice:l,gasLimit:d}=(null===(t=this.bridge)||void 0===t?void 0:t.tx)||{},m=i?new Qo.a(l||0).times(d||0).times((null===i||void 0===i?void 0:i.current_price_usd)||0).div(new Qo.a(10).pow(i.decimals||(null===i||void 0===i?void 0:i.decimal)||0)):new Qo.a(0),u=new Qo.a(s).plus(new Qo.a(a)).plus(new Qo.a(m)).toFixed();this.bridge={...this.bridge,okxFee:u,receiveTokenAmount:null===(o=this.bridge)||void 0===o?void 0:o.toTokenAmount}})}).catch(e=>{this.okxBridgeError=e}).finally(()=>{this.loading=!1,this.countDownFinishReset()})},getBridgeSwap(){var e,t;if(null!==(e=this.bridge)&&void 0!==e&&e.isOkx)return void this.getOkxBridgeSwap();let o={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,fromAddress:this.$store.state.currentAccount,amountOutMin:this.bridge.amountOutMin||this.$f.formatNumShort(this.bridge.toTokenAmount*(1-this.slippage/100),3)||"0",routerPath:this.bridge.path,amounts:[],dex:this.bridge.dex,aggregator:"",fromTokenChain:this.fromToken.bridgeChain,toTokenChain:this.toToken.bridgeChain,toAddress:this.toAddress||this.$store.state.currentAccount||"",fromTokenAmount:this.bridge.fromTokenAmount,slippage:this.slippage,isNoGas:(null===(t=this.bridge)||void 0===t?void 0:t.isSupportNoGas)||!1};this.loading=!0,this.loadingText=this.$t("oneClickCrossChain"),Object(Ot["w"])(o).then(e=>{var t,i,n,s;(console.log(null===e||void 0===e||null===(t=e.txData)||void 0===t?void 0:t.noGasTxInfo),"TRON"===o.fromTokenChain||"BTC"===o.fromTokenChain||"SOLANA"===o.fromTokenChain||"TON"===o.fromTokenChain)?this.bridgeSwapTxData={...(null===e||void 0===e?void 0:e.txData)||{},bridge:o,txInfo:{...o,toTokenAmount:this.bridge.toTokenAmount},isSupportNoGas:null!==(i=null===o||void 0===o?void 0:o.isNoGas)&&void 0!==i&&i}:this.bridgeSwapTxData={from:(null===e||void 0===e||null===(n=e.txData)||void 0===n?void 0:n.from)||this.$store.state.currentAccount||void 0,...(null===e||void 0===e?void 0:e.txData)||{},txInfo:{...o,toTokenAmount:this.bridge.toTokenAmount},isSupportNoGas:null!==(s=null===o||void 0===o?void 0:o.isNoGas)&&void 0!==s&&s};e.txData?this.show=!0:this.$toast({position:"top",message:this.$t("failedTransation")})}).catch(e=>{console.log(e),this.$toast({position:"top",message:e})}).finally(()=>{this.countDownFinishReset(),this.loading=!1})},getOkxBridgeSwap(){var e,t,o;let i={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,fromAddress:this.$store.state.currentAccount,amountOutMin:this.bridge.amountOutMin||this.$f.formatNumShort(this.bridge.toTokenAmount*(1-this.slippage/100),3)||"0",routerPath:this.bridge.path,amounts:[],dex:this.bridge.dex,aggregator:"",fromTokenChain:this.fromToken.chain,toTokenChain:this.toToken.chain,toAddress:this.toAddress||this.$store.state.currentAccount||"",fromTokenAmount:this.fromTokenAmount,toTokenAmount:this.toTokenAmount,slippage:this.slippage,fromToken:this.fromToken,toToken:this.toToken,from_address_logo_url:null===(e=this.fromToken)||void 0===e?void 0:e.logo_url,to_address_logo_url:null===(t=this.toToken)||void 0===t?void 0:t.logo_url};this.loading=!0,this.loadingText=this.$t("oneClickCrossChain"),this.bridgeSwapTxData={...this.bridge.tx,txInfo:{...i,toTokenAmount:this.bridge.toTokenAmount,isOkx:!0}},null!==(o=this.bridge)&&void 0!==o&&o.isOkx&&(this.show=!0,this.loading=!1)},confirmSwap(){var e,t,o,i;if("TRON"===(null===(e=this.bridgeSwapTxData)||void 0===e||null===(e=e.bridge)||void 0===e?void 0:e.fromTokenChain))this.confirmSwapTron();else if("BTC"===(null===(t=this.bridgeSwapTxData)||void 0===t||null===(t=t.bridge)||void 0===t?void 0:t.fromTokenChain))this.confirmSwapBTC();else if("SOLANA"===(null===(o=this.bridgeSwapTxData)||void 0===o||null===(o=o.bridge)||void 0===o?void 0:o.fromTokenChain))this.confirmSwapSolana();else if("TON"===(null===(i=this.bridgeSwapTxData)||void 0===i||null===(i=i.bridge)||void 0===i?void 0:i.fromTokenChain))this.confirmSwapTon();else if(this.bridgeSwapTxData.to){var n;console.log(this.bridgeSwapTxData),this.bridgeSwapTxData.isSupportNoGas&&null!==(n=window)&&void 0!==n&&null!==(n=n._tw_)&&void 0!==n&&n.appSendSwftTxs&&"ETH"!==this.bridgeSwapTxData.bridge.fromTokenChain?this.confirmNoGasSwap():(this.loadingConfirm=!0,Object(Ot["Db"])(this.bridgeSwapTxData).then(e=>{var t,o,i,n;this.txHash=e.hash;let s={fromTokenAmount:null===e||void 0===e||null===(t=e.transferData)||void 0===t?void 0:t.fromTokenAmount,fromTokenAddress:null===e||void 0===e||null===(o=e.transferData)||void 0===o?void 0:o.fromTokenAddress,fromAddress:null===e||void 0===e||null===(i=e.transferData)||void 0===i?void 0:i.fromAddress};return null!==(n=this.bridgeSwapTxData)&&void 0!==n&&null!==(n=n.txInfo)&&void 0!==n&&n.isOkx?this.getOkxBridgeTxStatus({hash:e.hash}):this.addBridgeTransData(e.hash,s),this.show=!1,this.fromTokenAmount="",this.bridge={dex:"",logoUrl:""},""!==e.hash&&(this.confirmTxVisible=!0),e.wait()}).then(e=>{console.log(e),this.getBalanceAndAllowance()}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingConfirm=!1}))}},getOkxBridgeTxStatus({hash:e}){var t,o,i,n,s,a,l,r,c,d,m,u,h,b,p;if(!e||"Bridge"!==this.$route.name)return;let v={fromTokenSymbol:null===this||void 0===this||null===(t=this.fromToken)||void 0===t?void 0:t.symbol,fromAmount:null===this||void 0===this?void 0:this.fromTokenAmount,toTokenAddress:null===this||void 0===this||null===(o=this.toToken)||void 0===o?void 0:o.address,toTokenAmount:null===this||void 0===this?void 0:this.toTokenAmount,toTokenSymbol:null===this||void 0===this||null===(i=this.toToken)||void 0===i?void 0:i.symbol,toTokenChain:null===this||void 0===this||null===(n=this.toToken)||void 0===n?void 0:n.chain,fromTokenAddress:null===this||void 0===this||null===(s=this.fromToken)||void 0===s?void 0:s.address,fromDecimals:null===this||void 0===this||null===(a=this.fromToken)||void 0===a?void 0:a.decimals,toDecimals:null===this||void 0===this||null===(l=this.toToken)||void 0===l?void 0:l.decimals,txHash:e,fromTokenChain:null===this||void 0===this||null===(r=this.fromToken)||void 0===r?void 0:r.chain,status:"pending",createTimeT:Date.now(),dexName:(null===this||void 0===this||null===(c=this.bridge)||void 0===c?void 0:c.dex)||"OKX",walletAddress:this.$store.state.currentAccount,receiveAddress:this.toAddress||(null===(d=this.bridgeSwapTxData)||void 0===d?void 0:d.toAddress)||"",from_address_logo_url:(null===(m=this.fromToken)||void 0===m?void 0:m.logo_url)||(null===(u=this.fromToken)||void 0===u?void 0:u.logoURI)||"",to_address_logo_url:(null===(h=this.toToken)||void 0===h?void 0:h.logo_url)||(null===(b=this.toToken)||void 0===b?void 0:b.logoURI)||"",isOkx:!0};null!==(p=this.okxBridgeTxs)&&void 0!==p&&p.some(e=>e.txHash===v.txHash)||(this.okxBridgeTxs=[v,...this.okxBridgeTxs]);let g=[];for(let f=this.okxBridgeTxs.length-1;f>=0;f--){let e=this.okxBridgeTxs[f];g.some(t=>t.txHash===e.txHash)||g.unshift(e)}this.okxBridgeTxs=g,Object(Ot["U"])({hash:e}).then(t=>{console.log(t);let o=null===t||void 0===t?void 0:t[0];var i,n,s;o&&(this.okxBridgeTxs=null===(i=this.okxBridgeTxs)||void 0===i||null===(n=i.map)||void 0===n?void 0:n.call(i,e=>e.txHash===o.fromTxHash?(console.log(e,o),{...e,...o,fromAmount:null!==o&&void 0!==o&&o.fromAmount&&"0"!==(null===o||void 0===o?void 0:o.fromAmount)?jt["utils"].formatUnits(null===o||void 0===o?void 0:o.fromAmount,e.fromDecimals):null===e||void 0===e?void 0:e.fromAmount,toTokenAmount:o.toAmount&&"0"!==o.toAmount?jt["utils"].formatUnits(o.toAmount,e.toDecimals):null===e||void 0===e?void 0:e.toTokenAmount,status:"NOT_FOUND"===o.status&&Date.now()-e.createTimeT<6e4?"pending":o.status}):e),"SUCCESS"===(null===(s=this.txInfo)||void 0===s?void 0:s.status)||"NOT_FOUND"===o.status&&Date.now()-v.createTimeT<6e4?this.getBalanceAndAllowance():setTimeout(()=>{this.getOkxBridgeTxStatus({hash:e})},1e4))})},async initOkxBridgeTxs(){let e=await ni.a.getItem("okxBridgeTxs").catch(async()=>[]);for(let t of e)"SUCCESS"===(null===t||void 0===t?void 0:t.status)||"NOT_FOUND"===t.status&&Date.now()-t.createTimeT<6e4||(this.getOkxBridgeTxStatus({hash:t.fromTxHash}),await di(1e4))},confirmNoGasSwap(){var e;if(this.bridgeSwapTxData.isSupportNoGas&&(null!==(e=window)&&void 0!==e&&e._tw_)){var t,o;this.loadingConfirm=!0;let e={ave_method:"appSendSwftTxs",transactionData:this.bridgeSwapTxData.noGasTxInfo,orderId:this.bridgeSwapTxData.orderId};console.log(e),this.loadingConfirm=!0,null===(t=window)||void 0===t||null===(t=t.ethereum)||void 0===t||null===(o=t.request)||void 0===o||o.call(t,{method:"wallet_switchEthereumChain",params:[e]}).then(e=>{console.log("appSendSwftTxs result json",e);let t=e;if(e&&Object(kt["h"])(e)){var o,i;if(t=JSON.parse(e),console.log("appSendSwftTxs result object",e),800!==Number(t.resCode))return this.$toast({position:"top",message:null===(i=t)||void 0===i?void 0:i.resMsg}),void(this.loadingConfirm=!1);t=(null===(o=t)||void 0===o?void 0:o.data)||t||{}}if(this.txHash=t.transactionHash,this.addBridgeTransData(this.txHash),this.show=!1,this.fromTokenAmount="",this.bridge={dex:"",logoUrl:""},""!==t.transactionHash&&(this.confirmTxVisible=!0),t.transactionHash&&window.ethereum){let e=new jt["providers"].Web3Provider(window.ethereum);e.waitForTransaction(t.transactionHash).then(e=>{console.log(e),this.getBalanceAndAllowance()})}}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingConfirm=!1})}},async confirmSwapTron(){var e;if(console.log(this.bridgeSwapTxData),"TRON"===(null===(e=this.bridgeSwapTxData)||void 0===e||null===(e=e.bridge)||void 0===e?void 0:e.fromTokenChain)){var t;let e=null===(t=this.bridgeSwapTxData)||void 0===t?void 0:t.bridge;if("SWFT"===e.dex)if(this.loadingConfirm=!0,e.fromTokenAddress===ft["k"]){const t=window.tronWeb;t.trx.sendTransaction(this.bridgeSwapTxData.platformAddr,e.fromTokenAmount).then(e=>{var t;console.log("sendTransaction",e);let o=null===e||void 0===e||null===(t=e.transaction)||void 0===t?void 0:t.txID;this.txHash=o,this.addBridgeTransData(o),this.show=!1,this.fromTokenAmount="",this.bridge={dex:"",logoUrl:""},""!==o&&(this.confirmTxVisible=!0)}).catch(e=>{console.log(e),this.$f.handleError(e)}).finally(()=>{this.loadingConfirm=!1})}else Object(Ot["c"])(e.fromTokenAddress,this.bridgeSwapTxData.platformAddr,e.fromTokenAmount).then(e=>{var t;(console.log("TRC20Transfer",e),null!==e&&void 0!==e&&e.hash)&&(this.txHash=null===(t=e.hash)||void 0===t||null===(t=t.transaction)||void 0===t?void 0:t.txID,this.addBridgeTransData(this.txHash),this.show=!1,this.fromTokenAmount="",this.bridge={dex:"",logoUrl:""},""!==this.txHash&&(this.confirmTxVisible=!0));return e.wait()}).then(e=>{console.log(e),this.getBalanceAndAllowance()}).catch(e=>{console.log("error",e),this.$f.handleError(e.error||e.code||e)}).finally(()=>{this.loadingConfirm=!1});else{const e=window.tronWeb;this.loadingConfirm=!0,e.transactionBuilder.triggerSmartContract(this.bridgeSwapTxData.tronRouterAddrees,this.bridgeSwapTxData.functionName,this.bridgeSwapTxData.options,this.bridgeSwapTxData.parameter,this.bridgeSwapTxData.fromAddress).then(t=>{var o;return console.log("triggerSmartContract result",t),this.txHash=null===t||void 0===t||null===(o=t.transaction)||void 0===o?void 0:o.txID,e.trx.sign(t.transaction)}).then(t=>(console.log("signedTx",t),e.trx.sendRawTransaction(t))).then(e=>{if(console.log("broastTx",e),!e.result)throw new Error(e.code);{let e=this.txHash;e&&(this.addBridgeTransData(e),this.show=!1,this.fromTokenAmount="",this.bridge={dex:"",logoUrl:""},""!==e&&(this.confirmTxVisible=!0))}}).catch(e=>{this.$f.handleError(e.code||e)}).finally(()=>{this.loadingConfirm=!1})}}},async confirmSwapTon(){var e;if(console.log(this.bridgeSwapTxData),"TON"===(null===(e=this.bridgeSwapTxData)||void 0===e||null===(e=e.bridge)||void 0===e?void 0:e.fromTokenChain)){var t,o;let e=null===(t=this.bridgeSwapTxData)||void 0===t?void 0:t.bridge,[i,n]=null===(o=this.bridgeSwapTxData)||void 0===o||null===(o=o.platformAddr)||void 0===o?void 0:o.split("#");this.loadingConfirm=!0,Object(si["g"])({token:e.fromTokenAddress,address:i,amount:e.fromTokenAmount,comment:n}).then(e=>(null!==e&&void 0!==e&&e.hash&&(this.txHash=e.hash,this.addBridgeTransData(this.txHash),this.show=!1,this.fromTokenAmount="",this.bridge={dex:"",logoUrl:""},""!==this.txHash&&(this.confirmTxVisible=!0)),e.wait())).then(e=>{console.log(e),this.getBalanceAndAllowance()}).catch(e=>{console.log("error",e),this.$f.handleError(e.error||e.code||e)}).finally(()=>{this.loadingConfirm=!1})}},async confirmSwapTronOkx(){var e;if(console.log(this.bridgeSwapTxData),"tron"===(null===(e=this.bridgeSwapTxData)||void 0===e||null===(e=e.bridge)||void 0===e?void 0:e.fromTokenChain)){var t;let e=null===(t=this.bridgeSwapTxData)||void 0===t?void 0:t.bridge;this.loadingConfirm=!0;const o=window.tronWeb;o.trx.sendTransaction(this.bridgeSwapTxData.platformAddr,e.fromTokenAmount).then(e=>{var t;console.log("sendTransaction",e);let o=null===e||void 0===e||null===(t=e.transaction)||void 0===t?void 0:t.txID;this.txHash=o,this.addBridgeTransData(o),this.show=!1,this.fromTokenAmount="",this.bridge={dex:"",logoUrl:""},""!==o&&(this.confirmTxVisible=!0)}).catch(e=>{console.log(e),this.$f.handleError(e)}).finally(()=>{this.loadingConfirm=!1})}},async confirmSwapBTC(){var e;if(console.log(this.bridgeSwapTxData),"BTC"===(null===(e=this.bridgeSwapTxData)||void 0===e||null===(e=e.bridge)||void 0===e?void 0:e.fromTokenChain)){var t;let e=null===(t=this.bridgeSwapTxData)||void 0===t?void 0:t.bridge;if("SWFT"===e.dex&&(this.loadingConfirm=!0,e.fromTokenAddress===ft["k"])){const t=window.unisat;null===t||void 0===t||t.sendBitcoin(this.bridgeSwapTxData.platformAddr,Number(e.fromTokenAmount)).then(e=>{console.log("sendBitcoin",e);let t=e;this.txHash=t,this.addBridgeTransData(t),this.show=!1,this.fromTokenAmount="",this.bridge={dex:"",logoUrl:""},""!==t&&(this.confirmTxVisible=!0)}).catch(e=>{console.log(e),this.$f.handleError(e)}).finally(()=>{this.loadingConfirm=!1})}}},async confirmSwapSolana(){var e;if(console.log("solana",this.bridgeSwapTxData),"SOLANA"===(null===(e=this.bridgeSwapTxData)||void 0===e||null===(e=e.bridge)||void 0===e?void 0:e.fromTokenChain)){var t;let e=null===(t=this.bridgeSwapTxData)||void 0===t?void 0:t.bridge;"SWFT"===e.dex&&(this.loadingConfirm=!0,Object(ti["l"])(this.bridgeSwapTxData.platformAddr,e.fromTokenAddress,Number(e.fromTokenAmount)).then(e=>{console.log("sendSolanaToken",e);let t=e;this.txHash=t,this.addBridgeTransData(t),this.show=!1,this.fromTokenAmount="",this.bridge={dex:"",logoUrl:""},""!==t&&(this.confirmTxVisible=!0)}).catch(e=>{console.log("error",e),this.$f.handleError(e)}).finally(()=>{this.loadingConfirm=!1}))}},approve(){this.loading=!0,this.loadingApprove=!0,this.loadingText=this.$t("approve");let e=this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):this.bridge.contractAddress;"bsc"!==this.$store.getters.netId&&"eth"!==this.$store.getters.netId||this.$f.setSwapSendType("fast"),Object(Ot["i"])(this.fromToken.address,e).then(e=>e.wait()).then(e=>{console.log(e),this.getBalanceAndAllowance(),this.getGasBalance()}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loading=!1,this.loadingApprove=!1,this.$f.setSwapSendType("")})},onSubmit(){1===this.errorCode?this.$store.dispatch("handleWalletAddress").then(e=>{"tron"===e&&(this.getBalance(),this.getUserTokenList(),this.getBridgeTokens())}):-1===this.errorCode?this.approve():this.isSwap()?this.getSwapTx():this.getBridgeSwap()},handleMax(){var e;let t=null===(e=this.fromToken)||void 0===e?void 0:e.balance;if(this.fromToken.address===ft["k"]||"So11111111111111111111111111111111111111112"===this.fromToken.address){let e=this.fromToken.chain,o=ft["j"][e]||.01;t=new Qo.a(t).minus(o).toFixed()}if(Number(t)>0){if(this.fromTokenAmount===t)return;this.fromTokenAmount=t,this.watchFromAmount(this.fromTokenAmount)}},addBridgeTransData(e=this.txHash,t={}){var o,i,n,s,a;if(!e)return;this.bridgeHashTimes[e]=((null===(o=this.bridgeHashTimes)||void 0===o?void 0:o[e])||0)+1;let l=(null===(i=this.bridgeSwapTxData)||void 0===i?void 0:i.txInfo)||{},r={fromTokenAddress:t.fromTokenAddress||l.fromTokenAddress||this.fromToken.address,toTokenAddress:l.toTokenAddress||this.toToken.address,fromAddress:t.fromAddress||l.fromAddress||this.$store.state.currentAccount,toAddress:l.toAddress||this.toAddress||this.$store.state.currentAccount||"",fromTokenAmount:t.fromTokenAmount||l.fromTokenAmount||this.bridge.fromTokenAmount,fromChain:l.fromTokenChain||this.fromToken.bridgeChain,toChain:l.toTokenChain||this.toToken.bridgeChain,slippage:l.slippage||this.slippage,hash:e,toTokenAmount:l.toTokenAmount||this.toTokenAmount,dexName:l.dex||this.bridge.dex,transferData:null!==(n=null===(s=this.bridgeSwapTxData)||void 0===s?void 0:s.transferData)&&void 0!==n?n:null,orderId:null===(a=this.bridgeSwapTxData)||void 0===a?void 0:a.orderId};Object(Ot["d"])(r).then(t=>{console.log(t),this.getBridgeTransData(e),["success","refund_complete"].includes(null===t||void 0===t?void 0:t.finalStatus)?this.$toast.success(this.$t("swapSucceed")):this.getBridgeTransDetail(e),this.bridgeHashTimes={}}).catch(o=>{var i;console.log(o),((null===(i=this.bridgeHashTimes)||void 0===i?void 0:i[e])||0)<3?setTimeout(()=>{this.addBridgeTransData(e,t)},2e3):this.$toast({position:"top",message:o})})},getBridgeTransDetail(e=this.txHash){Object(Ot["z"])(e).then(t=>{console.log(t),["success","refund_complete"].includes(null===t||void 0===t?void 0:t.finalStatus)?(this.confirmTxVisible=!1,this.$toast.success(this.$t("swapSucceed")),this.getBridgeTransData()):setTimeout(()=>{this.getBridgeTransDetail(e)},8e3)}).catch(e=>{console.log(e),this.$toast({position:"top",message:e})})},getBridgeTransData(){let e={pageNo:1,pageSize:1e3};this.$store.state.currentAccount&&(this.loadingTxs=!0,Object(Ot["y"])(e).then(e=>{var t;console.log(e),this.txs=null!==(t=e.list)&&void 0!==t?t:[]}).catch(e=>{console.log(e),this.$toast({position:"top",message:e})}).finally(()=>{this.loadingTxs=!1}))},getRate(e=0){return this.fromTokenAmount&&this.toTokenAmount?0===e?this.$f.formatNumber2(new Qo.a(this.fromTokenAmount).div(this.toTokenAmount).toFixed()):this.$f.formatNumber2(new Qo.a(this.toTokenAmount).div(this.fromTokenAmount).toFixed()):"--"},goBridgeTx(e){this.$router.push({name:"BridgeTx",params:{hash:e.txHash}})},handleSelectAccount(e){this.toAddress=(null===e||void 0===e?void 0:e.contact_address)||"",this.show1=!1},getAvgPrice(){if((!this.fromTokenAmount||!this.toTokenAmount)&&this.fromToken.chain===this.toToken.chain)return"--";let e=this.fromTokenAmount,t=this.toTokenAmount;if(this.isTax){var o,i,n,s;let a=(null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.totalTax)||((null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.total_sell_tax)||0)+((null===(n=this.swapQuoteInfo)||void 0===n?void 0:n.total_buy_tax)||0);a=Math.min(49,a),null!==(s=this.swapQuoteInfo)&&void 0!==s&&s.isAmountOut?e=new Qo.a(e).times(100+a).div(100):t=new Qo.a(t).times(100-a).div(100)}let a="solana"===this.chain||"ton"===this.chain?this.swapTokenPrice[0]:this.swapQuoteInfo.from_price,l="solana"===this.chain||"ton"===this.chain?this.swapTokenPrice[1]:this.swapQuoteInfo.to_price;return a&&l?this.$f.formatNumber2(t/e/(a/l)*a):"--"},onSubmitSlippage(e){this.swapSlippageInfo.auto!==e.autoSlippage&&e.autoSlippage?this.swapSlippageInfo={slippage:ci,auto:e.autoSlippage}:this.swapSlippageInfo={slippage:e.slippage,auto:e.autoSlippage}},alertTips(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then(()=>{})},getSelectedRouter(e){this.dialogListRouterVisible=!1,this.selectedRouterIndex=e,this.selectedRouter()},getQuoteInfo(e=!0){if(!Number(this.fromTokenAmount)&&e||!Number(this.toAmount)&&!e)return void(this.loading=!1);if(this.fromToken.address===this.toToken.address)return void this.$toast({position:"top",message:this.$t("twoIdenticalTokens")});li&&(clearTimeout(li),li=null);let t=this.fromToken.chain;li=setTimeout(()=>{this.dealGetQuoteInfo(e,t)},500)},dealGetQuoteInfo(e,t){if((this.fromTokenAmount||this.toAmount)&&this.fromToken.address&&this.toToken.address){var o;if(console.log("isAmount",e,t),"solana"===t)return void this.quoteSolana(e,t);if("ton"===t)return void this.quoteTon(e,t);let n=this.fromToken.decimals,s=this.toToken.decimals;this.loading=!0,this.loadingText=this.$t("lookingForBestChannel");let a={from_token:this.fromToken.address,to_token:this.toToken.address,amountIn:e?jt["utils"].parseUnits(new Qo.a(this.fromTokenAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${n}})?`))[0],n).toString():0,amountOut:e?0:jt["utils"].parseUnits(new Qo.a(this.toAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${s}})?`))[0],s).toString()},l=null===(o=this.fromTokenInfo)||void 0===o?void 0:o.pairs,r="";if("core"===t&&(null===l||void 0===l?void 0:l.length)>0){var i;let e=(null===l||void 0===l||null===(i=l.find)||void 0===i?void 0:i.call(l,e=>{let t=[e.token0_address,e.token1_address];return t.includes(a.token0_address)||t.includes(a.token1_address)}))||(null===l||void 0===l?void 0:l[0]),t=null===e||void 0===e?void 0:e.amm,o={shadowswap:"0x191e94fa59739e188dce837f7f6978d84727ad01"};r=(null===o||void 0===o?void 0:o[t])||"0x40375c92d9faf44d2f9db9bd9ba41a3317a2404f"}Object(Ot["tb"])(a,r,t).then(e=>{this.swapPathList=e,this.selectedRouter(e),this.getSwapGas()}).catch(e=>{this.$f.handleError(e),this.$nextTick(()=>{setTimeout(()=>{this.loading=!1,this.countDownFinishReset()},800)})})}},quoteSolana(e,t){if("solana"===t){let t=this.fromToken.decimals,o=this.toToken.decimals;console.log("fromAmount",this.fromAmount,this.fromToken),console.log("toToken",this.toToken);let i={inputMint:this.fromToken.address,inputDecimals:t,inputMintSymbol:this.fromToken.symbol,inputMintName:this.fromToken.symbol,inputAmount:this.fromTokenAmount||0,outputMint:this.toToken.address,outputDecimals:o,outputMintSymbol:this.toToken.symbol,outputMintName:this.toToken.symbol,amount:e?jt["utils"].parseUnits(new Qo.a(this.fromTokenAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${t}})?`))[0],t).toString():jt["utils"].parseUnits(new Qo.a(this.toAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o}})?`))[0],o).toString(),slippageBps:new Qo.a(this.solanaSlippage).times(100).toFixed(0),swapMode:e?"ExactIn":"ExactOut",slippage:this.solanaSlippage||19},n=this.quoteSolanaPreParams.amount&&Object.keys(this.quoteSolanaPreParams).every(e=>i[e]===this.quoteSolanaPreParams[e]);if(n)return;this.quoteSolanaPreParams={...i},setTimeout(()=>{this.quoteSolanaPreParams={}},15e3),this.loading=!0,Object(ti["h"])(i).then(i=>{var n,s,a,l;(console.log("solanaQuoteResponse",i),i.routeInfo&&i.transaction)?(this.solanaQuoteResponse=i,console.log("amountOut",(null===(n=i.routeInfo)||void 0===n||null===(n=n.amountOut)||void 0===n||null===(n=n.amount)||void 0===n?void 0:n.toFixed())||"0"),this.toAmount=(null===(s=i.routeInfo)||void 0===s||null===(s=s.amountOut)||void 0===s||null===(s=s.amount)||void 0===s?void 0:s.toFixed())||"0",this.quoteSwapTokenPrice()):e?i.outAmount?(this.solanaQuoteResponse=i,this.toAmount=jt["utils"].formatUnits(i.outAmount||"0",o||(null===(a=this.toToken)||void 0===a?void 0:a.decimals)),this.quoteSwapTokenPrice()):this.$f.handleError("can not get quote"):i.inAmount?(this.solanaQuoteResponse=i,this.fromTokenAmount=jt["utils"].formatUnits(i.inAmount||"0",t||(null===(l=this.fromToken)||void 0===l?void 0:l.decimals)),this.quoteSwapTokenPrice()):this.$f.handleError("can not get quote");this.getSwapTx(!1),this.loading=!1,this.quoteSolanaPreParams={}}).catch(e=>{console.log(e),this.$f.handleError((null===e||void 0===e?void 0:e.error)||e),this.$nextTick(()=>{setTimeout(()=>{this.loading=!1,this.quoteSolanaPreParams={},this.countDownFinishReset()},800)})})}},async quoteTon(e,t){if("ton"===t){let t=this.fromToken.decimals,o=this.toToken.decimals;console.log("fromAmount",this.fromTokenAmount,this.fromToken),console.log("toToken",this.toToken);let i=this.fromToken.address===ft["k"]?new Qo.a(this.fromTokenAmount||0).times("0.997"):new Qo.a(this.fromTokenAmount||0),n={inputToken:this.fromToken.address,outputToken:this.toToken.address,inputTokenAmount:jt["utils"].parseUnits(i.toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${t}})?`))[0],t).toString(),slippageBps:new Qo.a(this.tonSlippage).times(100).toFixed(0)};return this.quoteLoading=!0,Object(Ot["nb"])(n).then(t=>{var i;if(console.log("tonQuoteResponse",t),t.amountOut&&t.payload){var n,s;if(this.tonQuoteResponse=t,console.log("amountIn",t.routeInfo),e)console.log("toDecimals",o,null===(n=this.toToken)||void 0===n?void 0:n.decimals),this.toAmount=jt["utils"].formatUnits(t.amountOut||"0",o||(null===(s=this.toToken)||void 0===s?void 0:s.decimals));console.log("amountOut",this.toAmount),this.quoteSwapTokenPrice()}else this.$f.handleError("can not get quote");return this.tonSwapBaseTokenPrice=null===(i=this.fromTokenInfo)||void 0===i||null===(i=i.token)||void 0===i?void 0:i.current_price_usd,this.getSwapTx(!1),this.loading=!1,t}).catch(e=>(console.log(e),this.$f.handleError((null===e||void 0===e?void 0:e.error)||e),this.$nextTick(()=>{setTimeout(()=>{this.loading=!1,this.quoteSolanaPreParams={},this.countDownFinishReset()},800)}),Promise.resolve("")))}},quoteSwapTokenPrice(){let e=this.fromToken.chain,t=this.fromToken.address+"-"+e,o=this.toToken.address+"-"+e;return sessionStorage.swap_tokenPrice===t+"-"+o?(this.swapTokenPrice=[0,0],"solana"===e?this.priceImpactSolana=0:"ton"===e&&(this.priceImpactTon=0,this.tonSwapTokenPrice=[0,0])):sessionStorage.swap_tokenPrice=t+"-"+o,Object(Ot["lb"])([t,o]).then(async t=>{var o,i;let n=(null===t||void 0===t||null===(o=t[0])||void 0===o?void 0:o.current_price_usd)||0,s=(null===t||void 0===t||null===(i=t[1])||void 0===i?void 0:i.current_price_usd)||0;this.swapTokenPrice=[n,s];let a=this.fromTokenAmount||0,l=this.toAmount||0,r=Math.abs(Number(a)*n/(Number(l)*s)-1);"solana"===e?this.priceImpactSolana=r:"ton"===e&&(this.priceImpactTon=r,this.tonSwapTokenPrice=[n,s])})},selectedRouter(e=this.swapPathList){let t=e[this.selectedRouterIndex],o=e[this.selectedRouterIndex].routerPath,i=this.isAmount,n=this.fromToken.decimals,s=this.toToken.decimals,a=!1;if(i){var l;let e=jt["utils"].parseUnits(new Qo.a(this.fromTokenAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${n}})?`))[0],n).toString(),t=(null===(l=o[0])||void 0===l?void 0:l.amount)||0;a=e===t}else{var r;let e=jt["utils"].parseUnits(new Qo.a(this.toAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${s}})?`))[0],s).toString(),t=(null===(r=o[o.length-1])||void 0===r?void 0:r.amount)||0;a=e===t}if(!a)return;if(1===t.from_cannot_sell_all){var c;let e=new Qo.a(jt["utils"].parseUnits(String(this.fromToken.balance),null===(c=this.fromToken)||void 0===c?void 0:c.decimals).toString()),o=new Qo.a(null===t||void 0===t?void 0:t.routerPath[0].amount);this.isCannotSellAll=e.gt(0)&&o.div(e).gt(.99999)}else this.isCannotSellAll=!1;this.isTax=t.totalTax>0||t.total_sell_tax>0||t.total_buy_tax>0;let d=this.getPriceImpact(t);if(console.log("routerInfo",t),this.isTax||d.gt(.5)){this.isTaxHigh=t.total_sell_tax+t.total_buy_tax+1>49.99;let e=t.totalTax||t.total_sell_tax+t.total_buy_tax,o=Number(d);if("auto"===this.customSlippage){let t=e+o+(e>5||o>5?2.5:2);t=Math.max(Math.min(t,49.99),.5),this.autoSlippageValue=String(Number(t.toFixed(2)))}}else this.isTaxHigh=!1,"auto"===this.customSlippage&&(this.autoSlippageValue=ci);if(t.weight>5e4||t.totalTax>0||t.total_sell_tax>0||t.total_buy_tax>0?this.autoSwapMode="fast":this.autoSwapMode="protect",console.log("autoSwapMode",this.autoSwapMode),this.swapQuoteInfo=t,this.swapRouterPath=o.map((e,o)=>{var i;return{symbol:e.symbol,nextAmm:(null===t||void 0===t||null===(i=t.pair_path)||void 0===i||null===(i=i[o])||void 0===i?void 0:i.amm)||""}}),this.listRouter=e.map(e=>{let t=0,o=0;if(i){var n;let o=e.routerPath[e.routerPath.length-1];t=jt["utils"].formatUnits(o.amount||"0",(null===o||void 0===o?void 0:o.decimals)||(null===(n=this.toToken)||void 0===n?void 0:n.decimals))}else{let t=e.routerPath[0];o=jt["utils"].formatUnits(t.amount||"0",(null===t||void 0===t?void 0:t.decimals)||this.fromToken.decimals)}let s=e.routerPath.map((t,o)=>{var i;return{symbol:t.symbol,nextAmm:(null===e||void 0===e||null===(i=e.pair_path)||void 0===i||null===(i=i[o])||void 0===i?void 0:i.amm)||""}});return{...s,amount:i?t:o,priceImpact:e.priceImpact}}),i){var m;let e=o[o.length-1];this.toAmount=jt["utils"].formatUnits(e.amount||"0",(null===e||void 0===e?void 0:e.decimals)||(null===(m=this.toToken)||void 0===m?void 0:m.decimals))}else{var u;let e=o[0];this.fromTokenAmount=jt["utils"].formatUnits(e.amount||"0",(null===e||void 0===e?void 0:e.decimals)||(null===(u=this.fromToken)||void 0===u?void 0:u.decimals))}a&&this.$nextTick(()=>{setTimeout(()=>{this.loading=!1,this.countDownFinishReset()},800)})},getPriceImpact(e){if(!Number(this.fromTokenAmount)&&!Number(this.toTokenAmount))return new Qo.a(0);let t=e.routerPath,o=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[0]:null,i=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[t.length-1]:null;if(o&&i){let t=e.from_price,n=e.to_price,s=jt["utils"].formatUnits(o.amount,o.decimals),a=jt["utils"].formatUnits(i.amount,i.decimals);return new Qo.a(s).times(t).div(new Qo.a(a).times(n)).minus(1).abs().times(100)}return new Qo.a(0)},isSwap(){let e=!this.hasNoGas(),t=Object.keys(ft["y"]);return this.fromToken.chain===this.toToken.chain&&this.fromToken.chain&&(t.includes(this.fromToken.chain)&&e||"solana"===this.fromToken.chain||"ton"===this.fromToken.chain)},hasNoGas(){var e;let t=new Qo.a(this.gasBalance||0),o=this.fromToken.chain||this.$store.getters.netId,i=new Qo.a(ft["j"][o]||.001).div(2);return t.lt(i)&&(null===(e=window)||void 0===e||null===(e=e._tw_)||void 0===e?void 0:e.appSendSwftTxs)&&"eth"!==o},formatPriceImpactColor(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},getSwapGas(){ri&&(clearTimeout(ri),ri=null),ri=setTimeout(()=>{var e;.5===this.errorCode&&this.$store.state.currentAccount&&!this.loading&&(null===(e=this.swapQuoteInfo)||void 0===e||null===(e=e.routerPath)||void 0===e?void 0:e.length)>0&&(Object(Ot["Ib"])(this.swapQuoteInfo,this.swapSlippage).then(async e=>{var t,o;this.swapSubmitInfo=e,this.swapInfo={...e.swapInfo,fromToken:{...this.fromToken,...(null===e||void 0===e||null===(t=e.swapInfo)||void 0===t?void 0:t.fromToken)||{}},toToken:{...this.toToken,...(null===e||void 0===e||null===(o=e.swapInfo)||void 0===o?void 0:o.toToken)||{}}},this.swapInfo.gasValue=e.gasValue,this.swapInfo.swapRouterPath=this.swapRouterPath}).catch(e=>{this.$f.handleError(e)}),this.getNativeTokenPrice(),this.getGasPrice())},3e3)},getSwapTx(e=!0){var t;if("ton"===this.chain){console.log("tonQuoteResponse",this.tonQuoteResponse);let t=[this.fromToken,this.toToken].map((e,t)=>{var o;return{symbol:e.symbol,nextAmm:0===t&&(null===(o=this.tonQuoteResponse)||void 0===o?void 0:o.dex)||""}});this.swapInfo={swapRouterPath:t,fromAmount:this.fromTokenAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},e&&(this.dialogVisibleSwap=!0),this.swapRouterPath=t}else if("solana"===this.chain){let t=[this.fromToken,this.toToken].map((e,t)=>({symbol:e.symbol,nextAmm:""}));this.swapInfo={swapRouterPath:t,fromAmount:this.fromTokenAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},e&&(this.dialogVisibleSwap=!0)}else(null===(t=this.swapQuoteInfo)||void 0===t||null===(t=t.routerPath)||void 0===t?void 0:t.length)>0&&(this.loading=!0,this.loadingText=this.$t("oneClickSwap"),console.log("this.swapSlippage",this.swapSlippage),Object(Ot["Ib"])(this.swapQuoteInfo,this.swapSlippage).then(async t=>{var o,i;if(this.swapSubmitInfo=t,this.swapInfo={...t.swapInfo,fromToken:{...this.fromToken,...(null===t||void 0===t||null===(o=t.swapInfo)||void 0===o?void 0:o.fromToken)||{}},toToken:{...this.toToken,...(null===t||void 0===t||null===(i=t.swapInfo)||void 0===i?void 0:i.toToken)||{}}},this.swapInfo.gasValue=t.gasValue,this.swapInfo.swapRouterPath=this.swapRouterPath,this.loading=!1,e){var n,s;let e=(null===(n=window)||void 0===n||null===(n=n._tw_)||void 0===n||null===(s=n.appGetFreePay)||void 0===s?void 0:s.call(n))||!1;e=!!e&&JSON.parse(e),e?this.submitSwap():this.dialogVisibleSwap=!0}}).catch(e=>{this.loading=!1,this.$f.handleError(e)}),this.getNativeTokenPrice(),this.getGasPrice())},getNativeTokenPrice(){let e=this.$store.getters.netId||this.fromToken.chain;Object(Ot["P"])(e).then(e=>{this.nativePrice=e})},getGasPrice(){var e,t,o;let i=this.$store.getters.netId||this.fromToken.chain;"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(e=e.trustwallet)&&void 0!==e&&e.solana&&(null===(t=window.ethereum)||void 0===t||null===(t=t.address)||void 0===t||null===(o=t.startsWith)||void 0===o||!o.call(t,"0x"))&&window.ethereum.address)&&(i="solana"),"solana"!==i&&Object(Ot["G"])(i).then(e=>{this.gasPrice=e.toString()}).catch(e=>{console.log(e),this.gasPrice="0"})},async submitSwap(e=this.swapSubmitInfo){try{if("solana"===this.chain)return void this.submitSolanaSwap();if("ton"===this.chain)return void this.submitTonSwap();this.loading=!0,this.loadingConfirmSwap=!0,console.log("swapSubmitInfo",e);let t=await e.swapCallStatic();console.log("swapCallStaticResult",t.toString());let o=e.swapInfo,i=!(o.fromToken.isWrapper&&o.toToken.isETH||o.toToken.isWrapper&&o.fromToken.isETH),n={from_address:o.fromToken.address,from_symbol:o.fromToken.symbol,from_amount:Number(jt["utils"].formatUnits(o.fromTokenAmount||0,o.fromToken.decimals)),to_address:o.toToken.address,to_symbol:o.toToken.symbol,to_amount:Number(jt["utils"].formatUnits(o.toTokenAmount||0,o.toToken.decimals)),chain:this.netId,transaction:"",wallet_address:this.$store.state.currentAccount},s={};"bsc"!==this.$store.getters.netId&&"eth"!==this.$store.getters.netId||this.$f.setSwapSendType(this.swapMode||"fast"),e.swap().then(e=>{var t,a;return console.log("---confirm transaction---",e),this.swapInfo.transaction=e.hash,Object(Ot["zb"])({chain:this.fromToken.chain,destination:"wallet rpc",type:10,tx_hash:e.hash,status:1,wallet:this.$store.state.currentAccount,out_token:n.to_address,out_amount:Number(jt["utils"].formatUnits(o.toTokenAmount||0,o.toToken.decimals)),in_token:n.from_address,in_amount:Number(jt["utils"].formatUnits(o.fromTokenAmount||0,o.fromToken.decimals))}),i&&(n.transaction=e.hash,s={time:parseInt(Date.now()/1e3),id:n.transaction,chain:this.fromToken.chain,transaction:e.hash,from_address:n.from_address,from_price_eth:0,from_price_usd:"",from_symbol:o.fromToken.symbol,from_amount:Number(jt["utils"].formatUnits(o.fromTokenAmount||0,o.fromToken.decimals)),to_address:n.to_address,to_price_eth:0,to_price_usd:"",to_symbol:o.toToken.symbol,to_amount:Number(jt["utils"].formatUnits(o.toTokenAmount||0,o.toToken.decimals)),is_merged:0,from_address_logo_url:o.fromToken.logo_url,to_address_logo_url:o.toToken.logo_url},this.swapTxs.unshift(s)),this.loading=!1,this.loadingConfirmSwap=!1,this.fromTokenAmount="",this.toAmount="",null===(t=this.$refs)||void 0===t||null===(t=t.percentStep)||void 0===t||null===(a=t.handleClick)||void 0===a||a.call(t,0),this.dialogVisibleSwap=!1,e.wait()}).then(e=>(console.log("----transaction---",e),1===e.status?(Object(Ot["Jb"])({chain:this.fromToken.chain,tx_hash:e.transactionHash,status:100}),this.$notify({type:"success",message:this.$t("tradeSuccess")}),this.fromToken.address&&this.fromToken.chain&&this.getBalanceAndAllowance(),i&&(this.swapTxs.forEach(t=>{t.transaction===e.transactionHash&&(t.is_merged=1,t.time=parseInt(Date.now()/1e3))}),this.getUserAllTxs(s))):(Object(Ot["Jb"])({chain:this.fromToken.chain,tx_hash:e.transactionHash,status:-100}),this.$notify({type:"error",message:this.$t("tradeFail")}),i&&(this.swapTxs=this.swapTxs.filter(t=>t.transaction!==e.transactionHash))),this.getGasBalance(),this.$f.setSwapSendType(""),e)).catch(e=>{this.$refs.countDown.reset(),this.loading=!1,this.loadingConfirmSwap=!1,i&&this.getUserAllTxs(),this.$f.handleError(e,"swap"),this.$f.setSwapSendType("")})}catch(t){this.loading=!1,this.loadingConfirmSwap=!1,this.$f.handleError(t,"swap"),this.$f.setSwapSendType("")}},async submitSolanaSwap(){try{this.loading=!0,this.loadingConfirmSwap=!0;let e=this.swapInfo,t={from_address:e.fromToken.address,from_symbol:e.fromToken.symbol,from_amount:Number(jt["utils"].formatUnits(e.fromTokenAmount||0,e.fromToken.decimals)),to_address:e.toToken.address,to_symbol:e.toToken.symbol,to_amount:Number(jt["utils"].formatUnits(e.toTokenAmount||0,e.toToken.decimals)),chain:this.netId,transaction:"",wallet_address:this.$store.state.currentAccount},o={};setTimeout(()=>{this.dialogVisibleSwap||(this.loading=!1,this.loadingConfirmSwap=!1)},6e3);let i=!0;Object(ti["k"])(this.solanaQuoteResponse).then(n=>{var s,a,l,r;(console.warn("swap confirm time end",this.$f.formatDate(Date.now())),console.log("---confirm transaction---",n),this.swapInfo.transaction=n.hash,Object(Ot["zb"])({chain:"solana",destination:"true"===localStorage.solanaProtection?"v1/blxrsol/sendSolTx":"/ave_nodes/rpc/solana/sendFastSwapTx",type:10,tx_hash:n.hash,status:1,wallet:this.$store.state.currentAccount,out_token:t.to_address,out_amount:e.toAmount,in_token:t.from_address,in_amount:e.fromAmount}),i)&&(t.transaction=n.hash,o={time:parseInt(Date.now()/1e3),id:t.transaction,chain:"solana",transaction:n.hash,from_address:t.from_address,from_price_eth:0,from_price_usd:"",from_symbol:e.fromToken.symbol,from_amount:e.fromAmount,to_address:t.to_address,to_price_eth:0,to_price_usd:"",to_symbol:e.toToken.symbol,to_amount:e.toAmount,is_merged:0,wallet_address:this.$store.state.currentAccount||"",from_address_logo_url:e.fromToken.logo_url,to_address_logo_url:e.toToken.logo_url},this.solanaTxs.unshift(o),this.solanaTxs=null===(l=this.solanaTxs)||void 0===l||null===(r=l.slice)||void 0===r?void 0:r.call(l,0,500));return this.loading=!1,this.loadingConfirmSwap=!1,this.fromTokenAmount="",this.toAmount="",null===(s=this.$refs)||void 0===s||null===(s=s.percentStep)||void 0===s||null===(a=s.handleClick)||void 0===a||a.call(s,0),this.dialogVisibleSwap=!1,n.wait()}).then(t=>{if(console.warn("swap transaction end",this.$f.formatDate(Date.now())),console.log("----transaction---",t),t){var o;Object(Ot["Jb"])({chain:"solana",tx_hash:null===t||void 0===t||null===(o=t.transaction)||void 0===o?void 0:o.signatures[0],status:100});let[n,s]=Object(ti["j"])(t,e.fromToken.address,e.toToken.address);this.$notify({type:"success",message:this.$t("tradeSuccess")}),this.fromToken.address&&this.fromToken.chain&&this.getBalanceAndAllowance(),i&&(this.solanaTxs=this.solanaTxs.slice().map(e=>{var o;let i={...e};return e.transaction===(null===t||void 0===t||null===(o=t.transaction)||void 0===o?void 0:o.signatures[0])&&(i.is_merged=1,i.time=null===t||void 0===t?void 0:t.blockTime,n&&Number(n)>0&&(i.from_amount=n),s&&Number(s)>0&&(i.to_amount=s)),i}))}else this.$notify({type:"danger",message:this.$t("tradeFail")}),i&&(this.solanaTxs=this.solanaTxs.filter(e=>e.transaction!==t.transactionHash));return this.$f.setSwapSendType(""),t}).catch(e=>{if("Timeout"===(e||(null===e||void 0===e?void 0:e.message)))this.solanaTxs=this.solanaTxs.map(e=>e.transaction===t.transaction?{...e,status:"timeout"}:{...e});else if("Swap fail"===(e||(null===e||void 0===e?void 0:e.message)))this.solanaTxs=this.solanaTxs.map(e=>e.transaction===t.transaction?{...e,status:"fail"}:{...e});else{var o,i;this.solanaTxs=(null===(o=this.solanaTxs)||void 0===o||null===(i=o.filter)||void 0===i?void 0:i.call(o,e=>e.transaction!==t.transaction))||[]}this.$refs.countDown.reset(),this.loading=!1,this.loadingConfirmSwap=!1,this.$f.handleError(e,"solana"),this.$f.setSwapSendType("")})}catch(e){this.loading=!1,this.loadingConfirmSwap=!1,this.$f.handleError(e,"solana"),this.$f.setSwapSendType("")}},async submitTonSwap(){try{var e,t,o,i;this.loadingConfirmSwap=!0,this.loadingSwap=!0;let n=(null===(e=this.fromTokenInfo)||void 0===e||null===(e=e.token)||void 0===e?void 0:e.current_price_usd)||0,s=!this.tonSwapBaseTokenPrice||new Qo.a(n).minus(this.tonSwapBaseTokenPrice).times(100).div(this.tonSwapBaseTokenPrice).abs().gt(this.tonSlippage);console.log("price",n,this.solanaSwapBaseTokenPrice,s),s&&await this.quoteTon(this.isAmount,"ton");let a=this.swapInfo,l={from_address:a.fromToken.address,from_symbol:a.fromToken.symbol,from_amount:null===a||void 0===a?void 0:a.fromAmount,from_decimals:null===a||void 0===a?void 0:a.fromToken.decimals,to_address:a.toToken.address,to_symbol:a.toToken.symbol,to_amount:null===a||void 0===a?void 0:a.toAmount,to_decimals:null===a||void 0===a?void 0:a.toToken.decimals,chain:"ton",transaction:"",wallet_address:this.$store.state.currentAccount};console.log("txInfo",l);let r={};setTimeout(()=>{this.dialogVisibleSwap||(this.loadingSwap=!1,this.loadingConfirmSwap=!1)},6e3);let c=!0;console.log("tonQuoteResponse",this.tonQuoteResponse,l);let d=[{address:null===(t=this.tonQuoteResponse)||void 0===t?void 0:t.to,amount:null===(o=this.tonQuoteResponse)||void 0===o?void 0:o.totalTransferAmount,payload:null===(i=this.tonQuoteResponse)||void 0===i?void 0:i.payload}],m=await Object(si["e"])(l);m&&d.push(m),Object(si["h"])(d).then(e=>{var t,o,i,n,s,d,m,u,h,b;(console.warn("swap confirm time end",this.$f.formatDate(Date.now())),console.log("---confirm transaction---",e),this.swapInfo.transaction=e.hash,Object(Ot["zb"])({chain:"ton",destination:"wallet rpc",type:10,tx_hash:e.hash,status:1,wallet:this.$store.state.currentAccount,out_token:l.to_address,out_amount:a.toAmount,in_token:l.from_address,in_amount:a.fromAmount}),c)&&(l.transaction=e.hash,r={time:parseInt(Date.now()/1e3),id:l.transaction,chain:"ton",transaction:e.hash,from_address:l.from_address,from_price_eth:0,from_price_usd:"",from_symbol:a.fromToken.symbol,from_amount:a.fromAmount,to_address:l.to_address,to_price_eth:0,to_price_usd:"",to_symbol:a.toToken.symbol,to_amount:a.toAmount,is_merged:0,wallet_address:this.$store.state.currentAccount||"",from_address_logo_url:(null===a||void 0===a||null===(i=a.fromToken)||void 0===i?void 0:i.logo_url)||(null===(n=this.fromToken)||void 0===n?void 0:n.logo_url)||(null===(s=this.fromToken)||void 0===s?void 0:s.logoURI),to_address_logo_url:(null===a||void 0===a||null===(d=a.toToken)||void 0===d?void 0:d.logo_url)||(null===(m=this.toToken)||void 0===m?void 0:m.logo_url)||(null===(u=this.toToken)||void 0===u?void 0:u.logoURI)},this.tonTxs.unshift(r),this.tonTxs=null===(h=this.tonTxs)||void 0===h||null===(b=h.slice)||void 0===b?void 0:b.call(h,0,500));return this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.fromTokenAmount="",this.toAmount="",null===(t=this.$refs)||void 0===t||null===(t=t.percentStep)||void 0===t||null===(o=t.handleClick)||void 0===o||o.call(t,0),this.dialogVisibleSwap=!1,e.wait()}).then(async e=>{if(console.warn("swap transaction end",this.$f.formatDate(Date.now())),console.log("----transaction---",e),e){Object(Ot["Jb"])({chain:"ton",tx_hash:null===e||void 0===e?void 0:e.hash,status:100}),this.$notify({type:"success",message:this.$t("tradeSuccess")}),this.getUserTokenList();let t=await Object(si["f"])(e);c&&(this.tonTxs=this.tonTxs.slice().map(o=>{let i={...o};return o.transaction===(null===e||void 0===e?void 0:e.hash)&&(i.is_merged=1,i.time=null===e||void 0===e?void 0:e.timestamp,i.event_id=null===e||void 0===e?void 0:e.event_id,i={...i,...t}),i}))}else Object(Ot["Jb"])({chain:"ton",tx_hash:null===e||void 0===e?void 0:e.hash,status:-100}),this.$notify({type:"danger",message:this.$t("tradeFail")}),c&&(this.tonTxs=this.tonTxs.filter(t=>t.transaction!==e.hash));return this.$f.setSwapSendType(""),e}).catch(e=>{if(console.warn("ton error",e),"Timeout"===(e||(null===e||void 0===e?void 0:e.message)))this.tonTxs=this.tonTxs.map(e=>e.transaction===l.transaction?{...e,status:"timeout"}:{...e});else if("Swap fail"===(e||(null===e||void 0===e?void 0:e.message)))this.tonTxs=this.tonTxs.map(e=>e.transaction===l.transaction?{...e,status:"fail"}:{...e});else{var t,o;this.tonTxs=(null===(t=this.tonTxs)||void 0===t||null===(o=t.filter)||void 0===o?void 0:o.call(t,e=>e.transaction!==l.transaction))||[]}this.tonSwapBaseTokenPrice=0,this.$refs.countDown.reset(),this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.$f.handleError(e,"solana"),this.$f.setSwapSendType("")})}catch(n){this.tonSwapBaseTokenPrice=0,this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.$f.handleError(n,"solana"),this.$f.setSwapSendType("")}},getUserAllTxs(e=null){let t=this.$store.state.currentAccount;t&&"solana"!==this.chain&&(this.txsLoading=!0,Object(Ot["ob"])(this.$store.getters.netId,1,100).then(t=>{var o,i,n;let s=Array.isArray(t)?t:[],a=e&&!(null!==s&&void 0!==s&&null!==(o=s.some)&&void 0!==o&&o.call(s,t=>t.transaction===e.transaction))&&Date.now()-1e3*e.time<6e5;a&&setTimeout(()=>{this.getUserAllTxs(e)},1e4),s.length>0&&(this.swapTxs=(null===s||void 0===s?void 0:s.map(e=>e.id?{...e}:{...e,id:e.transaction}))||[]),!a||null!==(i=(n=this.swapTxs).some)&&void 0!==i&&i.call(n,t=>t.transaction===e.transaction)||this.swapTxs.unshift(e)}).finally(()=>{this.txsLoading=!1}))},getFromToken(){let e=this.fromToken.address,t=this.fromToken.chain;if(e&&t){var o;let i=e+"-"+t,n=null===(o=this.$store.state)||void 0===o||null===(o=o.chainConfig)||void 0===o?void 0:o[t],s=null===n||void 0===n?void 0:n.wmainWrapper,a=null===n||void 0===n?void 0:n.mainName;e===ft["k"]&&t&&s&&(i=s+"-"+t),Object(Ot["O"])(i).then(async t=>(this.fromTokenInfo={...t,...e===ft["k"]?{token:{...t.token,token:e,symbol:a,logoURI:this.$f.formatIcon(i)}}:{}},t))}},getSwapTokenList(e){var t;let o=this.fromToken.chain||this.$store.getters.netId;if(!o)return;let i=Object(Ot["u"])(o,2)||o;i&&(null===(t=this.tokens)||void 0===t||null===(t=t[i])||void 0===t?void 0:t.length)>1||Object(Ot["hb"])(o).then(t=>{var n,s,a;let l=(null===t||void 0===t?void 0:t.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token})))||[];var r,c;"solana"===o&&(l=null===(r=this.tokens)||void 0===r||null===(c=r.filter)||void 0===c?void 0:c.call(r,e=>e.token!==ft["k"]).sort((e,t)=>"So11111111111111111111111111111111111111112"===e.token?-1:1));let d=(null===(n=this.tokens)||void 0===n||null===(n=n[i])||void 0===n||null===(s=n.slice)||void 0===s?void 0:s.call(n))||[],m=null===(a=l)||void 0===a?void 0:a.filter(e=>!(null!==d&&void 0!==d&&d.some(t=>t.address===e.address)));this.tokens[i]=[...d,...m],null===e||void 0===e||e()})},getUserTokenList(){let e=this.fromToken.chain||this.$store.getters.netId;e&&Object(Ot["qb"])(e).then(t=>{if("solana"===e||"ton"===e)this.userBalanceTokens=t;else{var o,i;let e=(null===t||void 0===t||null===(o=t.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token,balance:e.value})))||void 0===o||null===(i=o.filter)||void 0===i?void 0:i.call(o,e=>(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag))||[];this.userBalanceTokens=null===e||void 0===e?void 0:e.filter(e=>!!Number(e.value))}console.log(this.userBalanceTokens),this.userBalanceTokens.length>0&&"tron"!==e&&"ton"!==e&&"brc20"!==e&&"solana"!==e&&/^0x[0-9a-zA-Z]{40}$/.test(this.$store.state.currentAccount)&&Object(Ot["t"])(this.userBalanceTokens.map(e=>e.token||""),e).then(e=>{var t,o;this.userBalanceTokens=null===(t=this.userBalanceTokens)||void 0===t||null===(o=t.map)||void 0===o||null===(o=o.call(t,(t,o)=>({...t,balance:jt["utils"].formatUnits(e[o],t.decimals||0)})))||void 0===o?void 0:o.filter(e=>!!Number(e.balance))})})},onSubmitSolanaSlippage(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.solanaSlippage=(null===e||void 0===e?void 0:e.slippage)||"2",this.solanaSlippage=localStorage.solanaSlippage,this.isSwap()&&!this.isAmount?this.watchToAmount(this.toAmount):this.watchFromAmount(this.fromTokenAmount))},onSubmitTonSlippage(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.tonSlippage=(null===e||void 0===e?void 0:e.slippage)||"2",this.tonSlippage=localStorage.tonSlippage,this.watchFromAmount())}}};o("9ff5"),o("0dda");const ui=Nt()(mi,[["render",qe],["__scopeId","data-v-4c33b1d4"]]);var hi=ui,bi=o("965b"),pi=o.n(bi);const vi=e=>(Object(i["pushScopeId"])("data-v-2ff24eca"),e=e(),Object(i["popScopeId"])(),e),gi={class:"swap-content"},fi={key:0,class:"card-container"},ki={class:"card-container_top flex justify-between items-center"},Oi={class:"tag-box"},ji=vi(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),wi={class:"s-text"},Ti={class:"flex justify-between items-center mt-40"},yi={key:1,class:"card-container"},Si={class:"card-container_top flex justify-between items-center"},Ni=vi(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),Vi={class:"s-text"},xi={class:"flex justify-between items-center mt-40"},Ei={class:"switch-container"},_i=vi(()=>Object(i["createElementVNode"])("i",{class:"iconfont icon-switch"},null,-1)),$i=[_i],Bi={key:2,class:"card-container"},Ai={class:"card-container_top flex justify-between items-center"},Ci=vi(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),Di={class:"s-text"},Ii={class:"flex justify-between items-center mt-40"},Li={key:3,class:"card-container"},Fi={class:"card-container_top flex justify-between items-center"},Pi={class:"tag-box"},Ui=vi(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),Ri={class:"s-text"},Mi={class:"flex justify-between items-center mt-40"},zi={class:"card-container mt-6"},qi={class:"limit-price-label flex justify-between items-center"},Wi=vi(()=>Object(i["createElementVNode"])("i",{class:"iconfont icon-shuaxin",style:{"font-size":"0.28rem","margin-right":"0.05rem"}},null,-1)),Hi={style:{"margin-right":"0.05rem"}},Qi={class:"flex justify-between items-center mt-10"},Gi=["disabled"],Ji=vi(()=>Object(i["createElementVNode"])("svg",{class:"icon-svg","aria-hidden":"true"},[Object(i["createElementVNode"])("use",{"xlink:href":"#icon-jian"})],-1)),Ki=[Ji],Zi=["disabled"],Yi=vi(()=>Object(i["createElementVNode"])("svg",{class:"icon-svg","aria-hidden":"true"},[Object(i["createElementVNode"])("use",{"xlink:href":"#icon-jia"})],-1)),Xi=[Yi],en={class:"swap-label"},tn={class:"swap-label_item-left"},on={style:{display:"flex","align-items":"center"}},nn={style:{"margin-right":"0.1rem"}},sn={class:"swap-label_item-left"},an={style:{display:"flex","align-items":"center"}},ln={class:"section-bottom"},rn={class:"title",style:{padding:"0.24rem 0.32rem"}},cn={style:{"font-size":"0.28rem","font-weight":"normal",color:"#333",margin:"0"}},dn=vi(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),mn={style:{"background-color":"#fff"}},un={class:"footer-container"},hn=vi(()=>Object(i["createElementVNode"])("img",{src:pi.a,alt:"",srcset:""},null,-1));function bn(e,t,o,n,s,a){var l,r;const c=Object(i["resolveComponent"])("van-count-down"),d=Object(i["resolveComponent"])("van-button"),m=Object(i["resolveComponent"])("SwapSelectToken"),u=Object(i["resolveComponent"])("van-field"),h=Object(i["resolveComponent"])("van-form"),b=Object(i["resolveComponent"])("SlippageButton"),p=Object(i["resolveComponent"])("van-checkbox"),v=Object(i["resolveComponent"])("van-loading"),g=Object(i["resolveComponent"])("LimitTxItem"),f=Object(i["resolveComponent"])("DynamicScrollerItem"),k=Object(i["resolveComponent"])("DynamicScroller"),O=Object(i["resolveComponent"])("van-empty"),j=Object(i["resolveComponent"])("confirm-limit");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createElementVNode"])("section",{class:"swap-container",style:Object(i["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[Object(i["createVNode"])(c,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:15e3,format:"sss",onFinish:a.onCountDownFinish},{default:Object(i["withCtx"])(e=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.seconds)+"s ",1)]),_:1},8,["onFinish"]),Object(i["createElementVNode"])("div",gi,[Object(i["createVNode"])(h,{class:"swap-form",onSubmit:a.onLimitSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(i["withCtx"])(()=>{var o,l,r,c,h,b,p,v;return[1===s.activeTab?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",fi,[Object(i["createElementVNode"])("div",ki,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("sell")),1),Object(i["createElementVNode"])("div",Oi,Object(i["toDisplayString"])(e.$t("targetToken")),1),ji,Object(i["createElementVNode"])("div",wi,Object(i["toDisplayString"])(e.$t("balance"))+": "+Object(i["toDisplayString"])(e.$f.formatNumber2((null===(o=s.limitToken1)||void 0===o?void 0:o.balance)||0)),1),Object(i["createVNode"])(d,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>a.handlePercentChange1(100),["stop"]))},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("max")),1)]),_:1})]),Object(i["createElementVNode"])("div",Ti,[Object(i["createVNode"])(m,{tokens:a.swapTokens,token:s.limitToken1,"onUpdate:token":[t[1]||(t[1]=e=>s.limitToken1=e),a.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(l=e.$f.getAddressAndChainFromId(n.swapId))||void 0===l?void 0:l.chain)||s.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(i["createVNode"])(u,{modelValue:s.limitAmount1,"onUpdate:modelValue":[t[2]||(t[2]=e=>s.limitAmount1=e),a.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[3]||(t[3]=e=>a.handlePercentChange1(0,!0))},null,8,["modelValue","onUpdate:modelValue"])])])):Object(i["createCommentVNode"])("",!0),0===s.activeTab?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",yi,[Object(i["createElementVNode"])("div",Si,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("sell")),1),Ni,Object(i["createElementVNode"])("div",Vi,Object(i["toDisplayString"])(e.$t("balance"))+": "+Object(i["toDisplayString"])(e.$f.formatNumber2((null===(r=s.limitToken2)||void 0===r?void 0:r.balance)||0)),1),Object(i["createVNode"])(d,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[4]||(t[4]=Object(i["withModifiers"])(e=>a.handlePercentChange1(100),["stop"]))},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("max")),1)]),_:1})]),Object(i["createElementVNode"])("div",xi,[Object(i["createVNode"])(m,{tokens:a.swapTokens,token:s.limitToken2,"onUpdate:token":[t[5]||(t[5]=e=>s.limitToken2=e),a.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(c=e.$f.getAddressAndChainFromId(n.swapId))||void 0===c?void 0:c.chain)||s.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(i["createVNode"])(u,{modelValue:s.limitAmount2,"onUpdate:modelValue":[t[6]||(t[6]=e=>s.limitAmount2=e),a.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[7]||(t[7]=e=>a.handlePercentChange1(0,!0))},null,8,["modelValue","onUpdate:modelValue"])])])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",Ei,[Object(i["createElementVNode"])("div",{class:"switch-box",onClick:t[8]||(t[8]=Object(i["withModifiers"])((...e)=>a.switchToken&&a.switchToken(...e),["stop"]))},$i)]),1===s.activeTab?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Bi,[Object(i["createElementVNode"])("div",Ai,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("buy")),1),Ci,Object(i["createElementVNode"])("div",Di,Object(i["toDisplayString"])(e.$t("balance"))+": "+Object(i["toDisplayString"])(e.$f.formatNumber2((null===(h=s.limitToken2)||void 0===h?void 0:h.balance)||0)),1)]),Object(i["createElementVNode"])("div",Ii,[Object(i["createVNode"])(m,{tokens:a.swapTokens,token:s.limitToken2,"onUpdate:token":[t[9]||(t[9]=e=>s.limitToken2=e),a.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(b=e.$f.getAddressAndChainFromId(n.swapId))||void 0===b?void 0:b.chain)||s.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(i["createVNode"])(u,{modelValue:s.limitAmount2,"onUpdate:modelValue":[t[10]||(t[10]=e=>s.limitAmount2=e),a.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[11]||(t[11]=e=>a.handlePercentChange1(0,!0))},null,8,["modelValue","onUpdate:modelValue"])])])):Object(i["createCommentVNode"])("",!0),0===s.activeTab?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Li,[Object(i["createElementVNode"])("div",Fi,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("buy")),1),Object(i["createElementVNode"])("div",Pi,Object(i["toDisplayString"])(e.$t("targetToken")),1),Ui,Object(i["createElementVNode"])("div",Ri,Object(i["toDisplayString"])(e.$t("balance"))+": "+Object(i["toDisplayString"])(e.$f.formatNumber2((null===(p=s.limitToken1)||void 0===p?void 0:p.balance)||0)),1)]),Object(i["createElementVNode"])("div",Mi,[Object(i["createVNode"])(m,{tokens:a.swapTokens,token:s.limitToken1,"onUpdate:token":[t[12]||(t[12]=e=>s.limitToken1=e),a.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(v=e.$f.getAddressAndChainFromId(n.swapId))||void 0===v?void 0:v.chain)||s.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(i["createVNode"])(u,{modelValue:s.limitAmount1,"onUpdate:modelValue":[t[13]||(t[13]=e=>s.limitAmount1=e),a.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[14]||(t[14]=e=>a.handlePercentChange1(0,!0))},null,8,["modelValue","onUpdate:modelValue"])])])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",zi,[Object(i["createElementVNode"])("div",qi,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(i["toDisplayString"])(s.limitToken1.symbol||"")+")",1),Object(i["createElementVNode"])("div",{class:"clickable flex items-center",onClick:t[15]||(t[15]=Object(i["withModifiers"])((...e)=>a.setLimitPrice&&a.setLimitPrice(...e),["stop"]))},[Wi,Object(i["createElementVNode"])("span",Hi,Object(i["toDisplayString"])(e.$t("marketPrice")),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber(s.baseToken.token.current_price_usd||0)),1)])]),Object(i["createElementVNode"])("div",Qi,[Object(i["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[16]||(t[16]=Object(i["withModifiers"])((...e)=>a.minusLimitPrice&&a.minusLimitPrice(...e),["stop"])),disabled:!s.limitPrice},Ki,8,Gi),Object(i["createVNode"])(u,{modelValue:s.limitPrice,"onUpdate:modelValue":[t[17]||(t[17]=e=>s.limitPrice=e),a.watchLimitPrice],placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue","onUpdate:modelValue"]),Object(i["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[18]||(t[18]=Object(i["withModifiers"])((...e)=>a.addLimitPrice&&a.addLimitPrice(...e),["stop"])),disabled:!s.limitPrice},Xi,8,Zi)])]),!a.isLimitApprove||s.loadingLimitAllowance?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:4,class:"submit-btn",block:"",color:a.limitButtonColor,"native-type":"submit","loading-text":s.loadingLimitAllowance?e.$t("checkingAllowance"):s.quoteLimitLoading?e.$t("quoting"):s.loadingLimitApprove?e.$t("approve"):"",loading:s.loadingLimitApprove||s.loadingLimit||s.loadingLimitAllowance,disabled:!a.checkLimitAmount()},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(a.checkLimitAmountMessage()||e.$t("approve")),1)]),_:1},8,["color","loading-text","loading","disabled"])):(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:5,class:"submit-btn",block:"",loading:s.loadingLimit||s.limitQuoteLoading,"loading-text":s.limitQuoteLoading?e.$t("quoting"):s.loadingLimit?0===s.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:a.limitButtonColor,disabled:!a.checkLimitAmount()||!s.limitAmount1||!s.limitAmount2||s.loadingLimitAllowance,"native-type":"submit"},{default:Object(i["withCtx"])(()=>{var t;return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(a.checkLimitAmountMessage()||(0===s.activeTab?e.$t("buy"):e.$t("sell"))+" "+((null===(t=s.limitToken1)||void 0===t?void 0:t.symbol)||"")),1)]}),_:1},8,["loading","loading-text","color","disabled"]))]}),_:1},8,["onSubmit"])]),Object(i["createElementVNode"])("ul",en,[Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("div",tn,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("slippage")),1),Object(i["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[19]||(t[19]=Object(i["withModifiers"])(t=>a.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips")),["stop"]))})]),Object(i["createElementVNode"])("div",on,[Object(i["createElementVNode"])("span",nn,Object(i["toDisplayString"])(s.limitSlippage)+"%",1),Object(i["createVNode"])(b,{slippage:s.limitSlippage,"onUpdate:slippage":t[20]||(t[20]=e=>s.limitSlippage=e),icon:1,onOnSubmit:a.onSubmitLimitSlippage},null,8,["slippage","onOnSubmit"])])]),Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("div",sn,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("limitExpiredTime")),1)]),Object(i["createElementVNode"])("div",an,Object(i["toDisplayString"])(s.LimitExpiredDays)+" "+Object(i["toDisplayString"])(e.$t("days")),1)])]),Object(i["createElementVNode"])("div",ln,[Object(i["createElementVNode"])("div",rn,[Object(i["createElementVNode"])("h3",cn,Object(i["toDisplayString"])(e.$t("historyLimitOrder")),1),dn,Object(i["createVNode"])(p,{modelValue:s.isCurrentToken,"onUpdate:modelValue":t[21]||(t[21]=e=>s.isCurrentToken=e),"icon-size":"0.32rem",style:{"--van-checkbox-size":"1.1"}},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("currentToken")),1)]),_:1},8,["modelValue"]),s.loadingGetLimitOrder?(Object(i["openBlock"])(),Object(i["createBlock"])(v,{key:0,size:"0.4rem",style:{"margin-left":"0.36rem"}})):(Object(i["openBlock"])(),Object(i["createElementBlock"])("i",{key:1,class:"iconfont icon-shuaxin",onClick:t[22]||(t[22]=Object(i["withModifiers"])((...e)=>a.getLimitOrder&&a.getLimitOrder(...e),["stop"]))}))]),Object(i["createElementVNode"])("ul",mn,[(null===(l=a.filterLimitOrders)||void 0===l?void 0:l.length)>0?(Object(i["openBlock"])(),Object(i["createBlock"])(k,{key:0,items:a.filterLimitOrders,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(i["withCtx"])(({item:e,index:t,active:o})=>[Object(i["createVNode"])(f,{item:e,active:o,"data-index":t},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(g,{item:e,onRefresh:a.refreshLimit},null,8,["item","onRefresh"])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])):Object(i["createCommentVNode"])("",!0),Object(i["withDirectives"])(Object(i["createVNode"])(O,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[i["vShow"],a.filterLimitOrders&&0===a.filterLimitOrders.length]])])]),Object(i["createElementVNode"])("div",un,[Object(i["createElementVNode"])("div",{class:"section-audit",onClick:t[23]||(t[23]=Object(i["withModifiers"])((...e)=>a.goAudit&&a.goAudit(...e),["stop"]))},[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("securityAudit"))+": ",1),hn])])],4),Object(i["createVNode"])(j,{visible:s.dialogVisibleLimit,"onUpdate:visible":t[24]||(t[24]=e=>s.dialogVisibleLimit=e),limitInfo:s.limitInfo,onSubmit:a.submitLimitOrder,loading:s.loadingConfirmLimit,chain:e.$store.getters.netId||(null===(r=e.$f.getAddressAndChainFromId(n.swapId))||void 0===r?void 0:r.chain)||""},null,8,["visible","limitInfo","onSubmit","loading","chain"])],64)}var pn=o("85b6"),vn=o("57c9"),gn=o("9587");const fn=e=>(Object(i["pushScopeId"])("data-v-15aacb52"),e=e(),Object(i["popScopeId"])(),e),kn={class:"select-box"},On={key:0,class:"token-container"},jn={class:"text-s"},wn={class:"text-l"},Tn={key:1},yn=fn(()=>Object(i["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)),Sn={class:"rules-content"},Nn={class:"search-bar",action:"/"},Vn={key:0,class:"pop-title"},xn={style:{background:"#fff"}},En=["onClick"],_n={class:"main"},$n={key:0,class:"risk-status high"},Bn={key:0,class:"minor"},An=fn(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),Cn={class:"right-label"},Dn=fn(()=>Object(i["createElementVNode"])("br",null,null,-1)),In={key:0,class:"minor"};function Ln(e,t,n,s,a,l){var r,c;const d=Object(i["resolveComponent"])("van-image"),m=Object(i["resolveComponent"])("van-search"),u=Object(i["resolveComponent"])("van-empty"),h=Object(i["resolveComponent"])("van-icon"),b=Object(i["resolveComponent"])("DynamicScrollerItem"),p=Object(i["resolveComponent"])("DynamicScroller"),v=Object(i["resolveComponent"])("van-action-sheet");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",kn,[Object(i["createElementVNode"])("button",{class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>a.show=!0,["stop"]))},[n.token.address||n.token.token?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",On,[(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:n.token.logo_url||0,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:n.token.logo_url?e.$f.formatIcon({logo_url:n.token.logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"])),Object(i["createElementVNode"])("div",jn,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])((null===(r=n.token)||void 0===r?void 0:r.symbol)||""),1),Object(i["createElementVNode"])("span",wn,Object(i["toDisplayString"])(l.getChainName(null===(c=n.token)||void 0===c?void 0:c.chain)||n.chain),1)])])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Tn,Object(i["toDisplayString"])(e.$t("pleaseSelectToken")),1)),yn]),Object(i["createVNode"])(v,{show:a.show,"onUpdate:show":t[2]||(t[2]=e=>a.show=e),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",Sn,[Object(i["createElementVNode"])("form",Nn,[Object(i["createVNode"])(m,{modelValue:a.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>a.keyword=e),modelModifiers:{trim:!0},background:"#fff",shape:"round",placeholder:e.$t("searchContractORName"),onSearch:l.onSearch,onCancel:l.onCancel},null,8,["modelValue","placeholder","onSearch","onCancel"])]),""!==a.keyword||n.isBalance?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Vn,Object(i["toDisplayString"])(e.$t("popularTokens")),1)),Object(i["createElementVNode"])("ul",xn,[Object(i["withDirectives"])(Object(i["createVNode"])(u,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[i["vShow"],a.searchTokens&&0===a.searchTokens.length&&!a.loading]]),Object(i["createVNode"])(p,{items:a.searchTokens,"min-item-size":30,"key-field":"address",class:"tokens"},{default:Object(i["withCtx"])(({item:t,index:s,active:r})=>[Object(i["createVNode"])(b,{item:t,active:r,"data-index":s},{default:Object(i["withCtx"])(()=>{var s;return[Object(i["createElementVNode"])("li",{class:"token-item",onClick:Object(i["withModifiers"])(e=>l.handleSelectToken(t),["stop"])},[Object(i["createVNode"])(d,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:t.logo_url?e.$f.formatIcon({logo_url:t.logo_url}):a.errorIcon,"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("div",null,[Object(i["createElementVNode"])("div",_n,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(t.symbol),1),(t.risk_score>55||t.risk_level<0)&&1!==t.risk_level?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",$n,Object(i["toDisplayString"])(e.$t("highRisk")),1)):Object(i["createCommentVNode"])("",!0)]),(null!==t&&void 0!==t&&null!==(s=t.tags)&&void 0!==s&&s.includes("tokens")||null===t||void 0===t||!t.tags)&&t.address!==a.nativeToken?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Bn,Object(i["toDisplayString"])(t.address.slice(0,6)+"..."+t.address.slice(-6)),1)):Object(i["createCommentVNode"])("",!0)]),An,Object(i["createElementVNode"])("div",Cn,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(t.value?e.$f.formatNumber2(t.value):""),1),Dn,void 0!==t.price?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",In,"$"+Object(i["toDisplayString"])(t.value?e.$f.formatNumber2(t.value*t.price):""),1)):Object(i["createCommentVNode"])("",!0)]),t.address===(n.token.address||n.token.token)?(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,En)]}),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])])])]),_:1},8,["show","title"])])}const Fn=o("aeccf");let Pn=null;var Un={name:"SwapSelectToken",props:{tokens:Array,token:{type:Object,default:()=>({address:"",chain:"",symbol:"",isbaseToken:!1})},chain:String,hasNative:{type:Boolean,default:!0},isBalance:{type:Boolean,default:!1}},emits:["update:token"],data(){return{errorIcon:Fn,show:!1,keyword:"",searchTokens:this.tokens||[],loading:!1,nativeToken:ft["k"]}},computed:{searchResultTokens(){var e;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.tokens.filter(e=>this.hasNative||e.address!==ft["k"])}},watch:{keyword(e){""!==e?this.tokenSearch():this.searchTokens=this.tokens},show(e){var t,o;e&&(this.searchTokens=this.tokens,this.keyword=""),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)}},methods:{getChainName(e){var t;let o=wt["a"].get("chainConfig",ft["l"])||{};return(null===(t=o[e])||void 0===t?void 0:t.name)||e},onSearch(e){console.log(e),Pn&&(clearTimeout(Pn),Pn=null),this.search()},onCancel(){this.keyword="",this.show=!1},handleSelectToken(e){if(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token){let t={...e,address:e.address||e.token,isbaseToken:this.token.isbaseToken};this.$emit("update:token",t),Object.keys(t).forEach(e=>{this.token[e]=t[e]}),this.show=!1}},tokenSearch(){Pn&&(clearTimeout(Pn),Pn=null),Pn=setTimeout(()=>{this.search()},500)},search(){if(""!==this.keyword){let e=new RegExp(this.keyword,"i"),t=this.tokens.filter(t=>(e.test(t.address)||e.test(t.symbol)||e.test(t.name))&&(this.hasNative||t.address!==ft["k"]));this.loading=!0,Object(Ot["Ab"])(this.keyword,this.chain).then(e=>{var o,i;let n=null===(o=e.filter)||void 0===o||null===(o=o.call(e,e=>e.chain===this.chain&&!t.some(t=>t.token===e.token)))||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,e=>({...e,address:e.token}));this.searchTokens=[...t,...n]}).catch(e=>{console.log(e),this.searchTokens=[]}).finally(()=>{this.loading=!1})}else this.searchTokens=this.tokens.filter(e=>this.hasNative||e.address!==ft["k"])}}};o("2bd0");const Rn=Nt()(Un,[["render",Ln],["__scopeId","data-v-15aacb52"]]);var Mn=Rn,zn=o("ce94"),qn=o("cf1a"),Wn=o("3edc"),Hn=o("7f08"),Qn=o("f465");const Gn=o("ddc3");let Jn=null,Kn=null,Zn=null,Yn=null;Wn["a"].props.components.default=()=>({OpenIndicator:{render:()=>Object(i["h"])("span",{innerHTML:'<svg height="8" viewBox="0 0 14 8" width="14" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="matrix(0 1 -1 0 16 -5)"><path d="m0 0h18v18h-18z"/><path d="m12.8008158 9.14463395c-.0305856.13208319-.0973435.25748808-.2002738.36041835l-6.0104076 6.0104076c-.29289322.2928933-.76776696.2928933-1.06066017 0-.29289322-.2928932-.29289322-.7677669 0-1.0606601l5.48233267-5.48233272-5.48147681-5.48147682c-.29289322-.29289322-.29289322-.76776696 0-1.06066017.29289321-.29289322.76776695-.29289322 1.06066017 0l6.01040764 6.01040764c.1909127.19091266.2573853.45914247.1994179.70389622z" fill="#999"/></g></svg>'})}});const Xn="2";var es={name:"BridgeLimit",components:{PercentStep:pn["a"],TxItem:vn["a"],SwapSelectToken:Mn,ConfirmSwap:zo["a"],PriceChart:qn["a"],SlippageButton:We["a"],ConfirmLimit:zn["a"],LimitTxItem:gn["a"],vSelect:Wn["a"]},setup(){var e,t,o;let i=wt["a"].get("chainConfig",ft["l"])||{},n=Object.values(i),s=(null===(e=window)||void 0===e||null===(e=e.ethereum)||void 0===e?void 0:e.chainId)&&(null===(t=n.find(e=>Number(e.chainId)===Number(window.ethereum.chainId)))||void 0===t?void 0:t.netName)||Ko["a"].getters.netId,a=ft["k"],l=a+"-"+s,r=Object(Go["useStorage"])("bridge_limitId",l,localStorage),c=null===(o=Object(Hn["getAddressAndChainFromId"])(r.value))||void 0===o?void 0:o.chain;return c!==s&&(r.value=l),{swapId:r,swapToken:a,swapChain:s}},data(){var e,t;return{LimitExpiredDays:ft["f"],nativeToken:ft["k"],height:100,tokens:[],token1:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:""},token2:{address:"",chain:"",balance:0,symbol:""},fromAmount:"",toAmount:"",baseToken:{token:{symbol:""},pairs:[]},baseTokenExtra:{},selected:0,dataX:[],dataY:[],swapQuoteInfo:{},isPairShowMore:!1,quoteLoading:!1,allowance:0,loadingApprove:!1,swapRouterPath:[],nativePrice:0,initTxs:[],txsLoading:!1,isCurrentToken:!0,userBalanceTokens:[],isAndroid:!(null===(e=window)||void 0===e||null===(e=e._tw_)||void 0===e||!e.appGetPlatform),gasPrice:"0",spender:"",isCannotSellAll:!1,baseTokenPrice:0,isTax:!1,txsTokens:sessionStorage.txsTokens?JSON.parse(sessionStorage.txsTokens||[]):[],isAmount:!0,swapPathList:[],listRouter:[],dialogListRouterVisible:!1,selectedRouterIndex:0,openLp:null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t?void 0:t.openLp,tx:{},userTokenList:[],activeTab:Number(this.$route.query.dir)||0,limitFromToken:{address:"",chain:"",balance:0,symbol:"",price:0},limitFromAmount:"",limitToToken:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:"",price:0},limitToAmount:"",limitPrice:"",loadingLimit:!1,dialogVisibleLimit:!1,loadingConfirmLimit:!1,limitInfo:{fromToken:{address:"",chain:"",balance:0,symbol:"",price:0},toToken:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:"",price:0},fromAmount:"",toAmount:"",targetToken:"",targetLimitPrice:""},limitAllowance:0,loadingLimitApprove:!1,quoteLimitLoading:!1,limitOrders:[],limitMinReturn:0,loadingGetLimitOrder:!1,limitToken1:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:"",price:0},limitAmount1:"",limitToken2:{address:"",chain:"",balance:0,symbol:"",price:0},limitAmount2:"",rateType:!0,limitQuoteLoading:!1,limitSlippage:localStorage.limitSlippage||"20",loadingAllowance:!1,loadingLimitAllowance:!1,triggerPrice:""}},computed:{typeTabs(){return[{name:this.$t("buy"),type:0},{name:this.$t("sell"),type:1}]},netId(){return this.$store.getters.netId||""},tokenInfo(){if("Bridge"!==this.$route.name)return{id:"",token:"",chain:""};let[e,t]=this.$f.getAddressAndChainFromId(this.swapId,1);return{id:this.swapId,token:e,chain:t}},tabs(){return[{name:this.$t("buy"),value:"buy"},{name:this.$t("sell"),value:"sell"}]},isLimitApprove(){if(!this.limitAllowance)return!1;let e=0===this.activeTab?this.limitToken2:this.limitToken1,t=e.decimals||0,o=0===this.activeTab?this.limitAmount2:this.limitAmount1;return jt["utils"].parseUnits(new Qo.a(o||0).toFixed(t),t).lte(this.limitAllowance)},minReceived(){var e;let t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},o=t[t.length-1];return new Qo.a(null===o||void 0===o?void 0:o.amount).times(100-Number(this.slippage)).div(10**(((null===o||void 0===o?void 0:o.decimals)||0)+2)).toFixed((null===o||void 0===o?void 0:o.decimals)||0)},maxSold(){var e;let t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},o=t[0];return new Qo.a(null===o||void 0===o?void 0:o.amount).times(1+Number(this.slippage)/100).div(10**((null===o||void 0===o?void 0:o.decimals)||0)).toFixed((null===o||void 0===o?void 0:o.decimals)||0)},txs(){if(this.isCurrentToken){var e,t;let[o,i]=this.$f.getAddressAndChainFromId(this.swapId,1),n=null===(e=this.$store.state)||void 0===e||null===(e=e.chainConfig)||void 0===e?void 0:e[i],s=null===n||void 0===n?void 0:n.wmainWrapper;return o=o===ft["k"]?s:o,null===(t=this.initTxs)||void 0===t?void 0:t.filter(e=>e.from_address===o||e.to_address===o||(o===ft["k"]||o===s)&&(e.from_address===ft["k"]||e.from_address===s||e.to_address===ft["k"]||e.to_address===s))}return this.initTxs},filterLimitOrders(){if(this.isCurrentToken){var e;let t=this.limitToken1.address;return null===(e=this.limitOrders)||void 0===e?void 0:e.filter(e=>e.target_token===t)}return this.limitOrders},taxStr(){var e,t,o,i,n;let s=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.totalTax)||((null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.total_sell_tax)||0)+((null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.total_buy_tax)||0);return s>0?`(${this.$t("tax")}: ${this.$f.formatNumber2(s,1)}%)`:0===this.activeTab&&(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.buy_tax)>0?`(${this.$t("tax")}: ${this.$f.formatNumber2(null===(a=this.baseTokenExtra)||void 0===a?void 0:a.buy_tax,1)}%)`:1===this.activeTab&&(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.sell_tax)>0?`(${this.$t("tax")}: ${this.$f.formatNumber2(null===(l=this.baseTokenExtra)||void 0===l?void 0:l.sell_tax,1)}%)`:"";var a,l},priceImpactV(){if(!Number(this.fromAmount)&&!Number(this.toAmount))return"";let e=this.swapQuoteInfo.routerPath,t=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[0]:null,o=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[e.length-1]:null;if(t&&o){let e=this.swapQuoteInfo.from_price,i=this.swapQuoteInfo.to_price,n=jt["utils"].formatUnits(t.amount,t.decimals),s=jt["utils"].formatUnits(o.amount,o.decimals);return new Qo.a(n).times(e).div(new Qo.a(s).times(i)).minus(1).abs()}return""},priceImpact(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},swapButtonColor(){var e,t,o,i;return this.$store.state.currentAccount?null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#999":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(i=o.gt)&&void 0!==i&&i.call(o,.1)?"#F7933F":0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},limitButtonColor(){return this.$store.state.currentAccount?0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},priceImpactColor(){var e,t,o,i,n,s;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(i=o.gt)&&void 0!==i&&i.call(o,.1)?"#F7933F":null!==(n=this.priceImpactV)&&void 0!==n&&null!==(s=n.gt)&&void 0!==s&&s.call(n,.05)?"#f8be46":""},swapTokens(){var e,t;let o=[...null===(e=this.userBalanceTokens.slice())||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,e=>!e.isWrapped)];return this.tokens.slice().forEach(e=>{let t=o.find(t=>t.id===e.id);t?t.logo_url=e.logo_url:o.push(e)}),o.length>0?o:this.tokens.slice()},isShow(){var e;let t=this.$store.state.chainConfig||wt["a"].get("chainConfig"),o=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"";var i,n,s;return!(!t||!o)&&(null!==(i=null===(n=t[o])||void 0===n||null===(n=n.swaps)||void 0===n||null===(s=n.some)||void 0===s?void 0:s.call(n,e=>e.router_address))&&void 0!==i&&i)},fromToken(){return 1===this.activeTab?this.token1:this.token2},toToken(){return 1===this.activeTab?this.token2:this.token1},disabled1(){var e;if(!Number(this.limitPrice))return!0;let t=null===(e=this.baseToken)||void 0===e||null===(e=e.token)||void 0===e?void 0:e.current_price_usd;return 1===this.activeTab&&this.limitPrice<t},disabled2(){var e;if(!Number(this.limitPrice))return!0;let t=null===(e=this.baseToken)||void 0===e||null===(e=e.token)||void 0===e?void 0:e.current_price_usd;return 0===this.activeTab&&this.limitPrice>t}},watch:{swapId(e){e&&"Bridge"===this.$route.name&&(this.slippage=Xn,this.isCannotSellAll=!1,this.baseTokenExtra={},this.baseTokenPrice=0,this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.selectedRouterIndex=0,this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getTokenDetails(),this.supportChainLimit(),this.getLimitAllowance())},"$store.state.currentAccount"(e){e&&"Bridge"===this.$route.name&&(this.slippage=Xn,this.isCannotSellAll=!1,this.selectedRouterIndex=0,this.getUserAllTxs(),this.getUserTokenList(),this.getSwapTokenList(),this.getAllowance(),this.getTokenDetails(),this.getLimitAllowance())},isPairShowMore(){this.getLeftHeight()},"$store.state.ws.tx"(e){this.tx=e,Jn||(Jn=setTimeout(()=>{var e;let t=this.tx,o=this.$store.state.chainConfig||wt["a"].get("chainConfig"),i=this.baseToken.token.chain||"",n=null===o||void 0===o?void 0:o[i],s=null===n||void 0===n?void 0:n.wmainWrapper,a=null===(e=this.baseToken)||void 0===e?void 0:e.token.token;a===ft["k"]&&i&&s&&(a=s);let l=this.baseToken.token.price_change,r=100*Number(this.baseToken.token.current_price_usd)/(100+Number(l));t.from_address===a?(this.baseToken.token.current_price_usd=t.from_price_usd,this.baseToken.token.price_change=100*(t.from_price_usd-r)/r):t.to_address===a&&(this.baseToken.token.current_price_usd=t.to_price_usd,this.baseToken.token.price_change=100*(t.to_price_usd-r)/r),t.from_address===this.limitToken1.address?this.limitToken1.price=t.from_price_usd:t.to_address===this.limitToken1.address&&(this.limitToken1.price=t.to_price_usd),t.to_address===this.limitToken2.address?this.limitToken2.price=t.to_price_usd:t.from_address===this.limitToken2.address&&(this.limitToken2.price=t.from_price_usd),this.dataY=this.dataY.map((e,t,o)=>t===o.length-1?this.baseToken.token.current_price_usd:e);let c=this.baseToken.pairs.findIndex(e=>e.pair===t.pair_address);if(c>-1){let e=this.baseToken.pairs[c];t.from_address===e.token0_address?(t.from_reserve&&(this.baseToken.pairs[c].reserve0=t.from_reserve,this.baseToken.pairs[c].token0_price_usd=t.from_price_usd),t.to_reserve&&(this.baseToken.pairs[c].reserve1=t.to_reserve,this.baseToken.pairs[c].token1_price_usd=t.to_price_usd)):(t.to_reserve&&(this.baseToken.pairs[c].reserve0=t.to_reserve,this.baseToken.pairs[c].token0_price_usd=t.to_price_usd),t.from_reserve&&(this.baseToken.pairs[c].reserve1=t.from_reserve,this.baseToken.pairs[c].token1_price_usd=t.from_price_usd))}Jn=null},1e3))}},methods:{init(){var e,t;this.getFeeInfo(),this.handleWalletAddress(!1);let o=sessionStorage.swap_token1?JSON.parse(sessionStorage.swap_token1):"",i=(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.address)||"",n=this.$store.getters.netId||(null===(t=this.$f.getAddressAndChainFromId(this.swapId))||void 0===t?void 0:t.chain)||"";i&&(i!==this.token1.address||o&&o.address!==i)?(this.token1={address:i||"",chain:n||"",balance:0,symbol:""},this.limitToken1={...this.token1}):i||!o||n!==o.chain||this.token1.address||(this.limitToken1={...this.swap_token1});let s=sessionStorage.swap_token2?JSON.parse(sessionStorage.swap_token2):"";s&&n===s.chain&&!this.token2.address&&(this.token2={...s},this.limitToken2={...s}),this.getBaseToken(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),this.supportChainLimit(),this.getLimitOrder(),this.getLimitAllowance()},formatUnits:jt["utils"].formatUnits,getFeeInfo(){Object(Ot["E"])().then(e=>{let t=this.$store.getters.netId;this.$store.state.feeInfo=this.$f.formatFee(e,t)})},watchFromAmount(){if(this.quoteLoading&&!this.isAmount)return;let e=this.fromAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.toAmount)?(this.toAmount=0,this.quoteLoading=!1):t&&(this.isAmount=!0,this.toAmount="",this.getQuoteInfo())},watchToAmount(){if(this.quoteLoading&&this.isAmount)return;let e=this.toAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.fromAmount)?(this.fromAmount=0,this.quoteLoading=!1):t&&(this.fromAmount="",this.isAmount=!1,this.getQuoteInfo(!1))},switchTab(e){this.activeTab=e,this.$refs.percentStep1.handleClick(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance()},switchToken(){1===this.activeTab?this.activeTab=0:this.activeTab=1,this.handlePercentChange1(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance()},handlePercentChange1(e,t){if(t)return;let o=e/100,i=0===this.activeTab?this.limitToken2:this.limitToken1,n=i.balance||0;if(o){let e=i.decimals||18;if((null===i||void 0===i?void 0:i.address)===ft["k"]){let t=i.chain,s=ft["j"][t]||.01;n=new Qo.a(n).minus(s).times(o).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`))[0]}else n=new Qo.a(n).times(o).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`))[0];0===Number(n)&&(n="")}else n="";0===this.activeTab?this.limitAmount2!==n&&(this.limitAmount2=n<0?0:n,this.watchLimitAmount2()):this.limitAmount1!==n&&(this.limitAmount1=n<0?0:n,this.watchLimitAmount1())},watchLimitAmount1(){this.limitQuoteLoading||(Kn&&(clearTimeout(Kn),Kn=null),Kn=setTimeout(()=>{let e=this.limitAmount1,t=Number(e);""===e||"."===e?(this.limitAmount1="",this.limitAmount2=""):0===t&&0!==Number(this.limitAmount2)?this.limitAmount2=0:t&&(this.limitAmount2="",this.watchLimitPrice())},500))},watchLimitAmount2(){this.limitQuoteLoading||(Zn&&(clearTimeout(Zn),Zn=null),Zn=setTimeout(()=>{let e=this.limitAmount2,t=Number(e);""===e||"."===e?(this.limitAmount1="",this.limitAmount2=""):0===t&&0!==Number(this.limitAmount1)?this.limitAmount1=0:t&&(this.limitAmount1="",this.watchLimitPrice())},500))},watchLimitPrice(){this.supportChainLimit()&&(Number(this.limitPrice)&&(Number(this.limitAmount1)||Number(this.limitAmount2))&&this.limitToken1.address!==this.limitToken2.address&&""!==this.$store.state.wallet?(Yn&&(clearTimeout(Yn),Yn=null),Yn=setTimeout(()=>{let e=0===this.activeTab?this.limitToken2:this.limitToken1,t=1===this.activeTab?this.limitToken2:this.limitToken1,o=jt["utils"].parseUnits((0===this.activeTab?this.limitAmount2:this.limitAmount1)||"0",e.decimals).toString(),i=jt["utils"].parseUnits((1===this.activeTab?this.limitAmount2:this.limitAmount1)||"0",t.decimals).toString(),n=e.address,s=t.address,a={from_token:n,to_token:s,amountIn:o,amountOut:i};this.limitQuoteLoading=!0,Object(Ot["wb"])(a).then(e=>{var o,i,n,s;if(1===e.toWrapper||2===e.toWrapper)return void(this.limitQuoteLoading=!1);let a=null===e||void 0===e||null===(o=e.routerPath)||void 0===o||null===(i=o.find)||void 0===i?void 0:i.call(o,e=>e.address===this.limitToken1.address),l=null===e||void 0===e||null===(n=e.routerPath)||void 0===n||null===(s=n.find)||void 0===s?void 0:s.call(n,e=>e.address===this.limitToken2.address);if(this.limitToken1.price=a.price,this.limitToken2.price=l.price,new Qo.a((null===a||void 0===a?void 0:a.amount)||0).lte(0)||new Qo.a((null===l||void 0===l?void 0:l.amount)||0).lte(0))return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("limitOrderAmount"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});this.limitPrice&&this.limitAmount1&&this.limitAmount2?0===this.activeTab?this.limitAmount1=new Qo.a(jt["utils"].formatUnits(a.amount,a.decimals)).times(a.price||0).div(this.limitPrice||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${this.limitToken1.decimals}})?`))[0]:this.limitAmount2=new Qo.a(jt["utils"].formatUnits(l.amount,l.decimals)).times(this.limitPrice||0).div(a.price||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${this.limitToken2.decimals}})?`))[0]:this.limitPrice&&this.limitAmount1?this.limitAmount2=new Qo.a(jt["utils"].formatUnits(l.amount,l.decimals)).times(this.limitPrice||0).div(a.price||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${this.limitToken2.decimals}})?`))[0]:this.limitPrice&&this.limitAmount2&&(this.limitAmount1=new Qo.a(jt["utils"].formatUnits(a.amount,a.decimals)).times(a.price||0).div(this.limitPrice||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${this.limitToken1.decimals}})?`))[0]);let r=new Qo.a(this.limitSlippage||0);r=new Qo.a(1).minus(r.div(100));let c=0===this.activeTab?this.limitAmount1:this.limitAmount2;this.limitMinReturn=new Qo.a(c||0).times(r).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${t.decimals}})?`))[0]}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.limitQuoteLoading=!1})},500)):this.limitToken1.address===this.limitToken2.address&&this.$toast({position:"top",message:this.$t("twoIdenticalTokens")}))},minusLimitPrice(){this.limitPrice&&new Qo.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Qo.a(this.limitPrice).times(.99).toFixed()),this.watchLimitPrice())},addLimitPrice(){this.limitPrice&&new Qo.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Qo.a(this.limitPrice).times(1.01).toFixed()),this.watchLimitPrice())},getLeftHeight(){this.$nextTick(()=>{let{height:e}=Object(Qn["o"])(this.$refs.swapLeft);this.height=e})},handleWalletAddress(e=!0){var t,o;""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet?!window.ethereum||null!==(t=window)&&void 0!==t&&t.tronLink?this.$toast({message:this.$t("browserWalletNotDetected"),position:"top"}):(this.$store.state.importAddressVisible=!1,null!==(o=window)&&void 0!==o&&o.tronLink||this.$store.commit("changeConnectVisible",!0)):e&&this.$store.commit("changeDisconnectVisible",!0)},handleTaxSlippage(){if(1===this.activeTab){var e,t;if(Number(this.slippage)>Number(null===(e=this.baseTokenExtra)||void 0===e?void 0:e.sell_tax)+1)return;let o=Math.max(Math.min(Number(null===(t=this.baseTokenExtra)||void 0===t?void 0:t.sell_tax)+1,49.99),.5);this.slippage=String(Number(o.toFixed(2)))}else{var o,i;if(Number(this.slippage)>Number(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.buy_tax)+1)return;let e=Math.max(Math.min(Number(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.buy_tax)+1,49.99),.5);this.slippage=String(Number(e.toFixed(2)))}},getSwapTokenList(){var e;let t=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"bsc";Object(Ot["hb"])(t).then(e=>{if(this.tokens=(null===e||void 0===e?void 0:e.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token})))||[],(!this.token2.address||this.token1.address===this.token2.address)&&this.tokens.length>0){let e=this.tokens.findIndex(e=>/USDT/.test(e.symbol));e=e<0?0:e;let o=this.tokens[e];var t;if(this.token1.address===o.address)o=0===e&&null!==(t=this.tokens[1])&&void 0!==t?t:this.tokens[0];this.token2={...o}}if((!this.limitToken2.address||this.limitToken1.address===this.limitToken2.address)&&this.tokens.length>0){let e=this.tokens.findIndex(e=>/USDT/.test(e.symbol));e=e<0?0:e;let t=this.tokens[e];var o;if(this.limitToken1.address===t.address)t=0===e&&null!==(o=this.tokens[1])&&void 0!==o?o:this.tokens[0];this.limitToken2={...t}}this.getTokenDetails()})},getUserTokenList(){var e;let t=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"bsc";Object(Ot["qb"])(t).then(e=>{var o,i,n;this.userBalanceTokens=null===(o=(null===e||void 0===e||null===(i=e.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token})))||void 0===i||null===(n=i.filter)||void 0===n?void 0:n.call(i,e=>(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag))||[])||void 0===o?void 0:o.filter(e=>!!Number(e.value)),this.userBalanceTokens.length>0&&"tron"!==t&&"brc20"!==t&&"solana"!==t&&/^0x[0-9a-zA-Z]{40}$/.test(this.$store.state.currentAccount)&&Object(Ot["t"])(this.userBalanceTokens.map(e=>e.token||""),t).then(e=>{var t,o;this.userBalanceTokens=null===(t=this.userBalanceTokens)||void 0===t||null===(o=t.map)||void 0===o||null===(o=o.call(t,(t,o)=>({...t,value:jt["utils"].formatUnits(e[o],t.decimals||0)})))||void 0===o?void 0:o.filter(e=>!!Number(e.value))})})},getTokenDetails(){Promise.all([this.getToken2Info(),this.getToken1Info()]).then(()=>{0===this.activeTab?this.allowance=this.token2.allowance||"0":this.allowance=this.token1.allowance||"0"})},getToken2Info(){var e,t;return Object(Ot["ib"])(null===(e=this.token2)||void 0===e?void 0:e.address,null===(t=this.token2)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(async e=>(this.token2={...this.token2,...e},sessionStorage.swap_token2=JSON.stringify(this.token2),this.limitToken2={...this.limitToken2,...e},e))},getToken1Info(){var e,t;return Object(Ot["ib"])(null===(e=this.token1)||void 0===e?void 0:e.address,null===(t=this.token1)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(async e=>(this.token1={...this.token1,...e},sessionStorage.swap_token1=JSON.stringify(this.token1),this.limitToken1={...this.limitToken1,...e},e))},getBaseToken(){let e=this.swapId||"",[t,o]=this.$f.getAddressAndChainFromId(e,1);if(this.token1.address&&(t=this.token1.address),this.token1.chain&&(o=this.token1.chain),t&&o){var i;let n=t+"-"+o,s=null===(i=this.$store.state)||void 0===i||null===(i=i.chainConfig)||void 0===i?void 0:i[o],a=null===s||void 0===s?void 0:s.wmainWrapper,l=null===s||void 0===s?void 0:s.mainName;t===ft["k"]&&o&&a&&(n=a+"-"+o);let r=Object(Ot["O"])(n).then(async e=>{var o;this.baseToken={...e,...t===ft["k"]?{token:{...e.token,token:t,symbol:l,logoURI:this.$f.formatIcon(n)}}:{}};let i=null===e||void 0===e||null===(o=e.pairs)||void 0===o?void 0:o[0],s=null===i||void 0===i?void 0:i.pair,a=null===i||void 0===i?void 0:i.chain;return s&&this.getKlineHistory(s+"-"+a),this.token1={...this.token1,address:this.baseToken.token.token,...this.baseToken.token},sessionStorage.swap_token1=JSON.stringify(this.token1),this.limitToken1={...this.limitToken1,address:this.baseToken.token.token,...this.baseToken.token},this.getLeftHeight(),this.limitPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.triggerPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",e}),c=Object(Ot["jb"])(e).then(async e=>(this.baseTokenExtra={...e,buy_tax:Number(Number(e.buy_tax).toFixed(2)),sell_tax:Number(Number(e.sell_tax).toFixed(2))},this.handleTaxSlippage(),e));Promise.all([r,c]).finally(()=>{this.$store.dispatch("initWs",n)})}},handleSelectToken2(e){sessionStorage.swap_token2=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.slippage=Xn,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getAllowance(),this.getToken2Info()},handleSelectToken1(e){sessionStorage.swap_token1=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.slippage=Xn,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getToken1Info(),this.swapId=((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain},handleSelectLimitToken1(e){this.slippage=Xn,this.limitAmount1="",this.limitAmount2="",this.handlePercentChange1(0),1===this.activeTab&&this.getLimitAllowance(),sessionStorage.swap_token1=JSON.stringify(e),this.token1={...e},this.swapId=((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,this.getToken1Info()},handleSelectLimitToken2(e){this.slippage=Xn,this.limitAmount1="",this.limitAmount2="",this.handlePercentChange1(0),sessionStorage.swap_token2=JSON.stringify(e),this.token2={...e},this.getToken2Info(),0===this.activeTab&&this.getLimitAllowance()},getAllowance(){if(this.$store.getters.netId&&this.$store.getters.netId===this.fromToken.chain&&this.fromToken.address){let e=this.$f.getSwapContract(this.$store.getters.netId);this.loadingAllowance=!0,Object(Ot["f"])(this.fromToken.address,e).then(e=>{this.allowance=e.toString()}).finally(()=>{this.loadingAllowance=!1})}},async approve(){this.loadingApprove=!0,"bsc"!==this.$store.getters.netId&&"eth"!==this.$store.getters.netId||this.$f.setSwapSendType("fast"),Object(Ot["i"])(this.fromToken.address).then(e=>e.wait()).then(e=>{console.log(e),this.getAllowance()}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingApprove=!1,this.$f.setSwapSendType("")})},checkAmountMessage(){var e,t,o;let i=this.fromToken.balance||0;return this.$store.state.currentAccount?!this.$store.state.currentAccount||window.ethereum||null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window.trustwallet)&&void 0!==t&&t.solana||null!==(o=window)&&void 0!==o&&o.tronWeb?0===Number(i)||Number(i)<Number(this.fromAmount)||!this.$store.state.currentAccount?this.$t("insufficientBalance"):"0"===String(this.fromAmount)?this.$t("AmountCannotBeZero"):void 0:this.$t("observeAddressNotSwap"):this.$t("pConnectWallet")},getKlineHistory(e){var t;Object(Ot["K"])(e,"1",(null===(t=this.$f.getAddressAndChainFromId(this.swapId))||void 0===t?void 0:t.chain)||"").then(e=>{var t;let o=(null===e||void 0===e||null===(t=e.slice)||void 0===t?void 0:t.call(e,-10))||[];this.dataX=o.map(e=>e.time),this.dataY=o.map(e=>e.close)})},getUserAllTxs(e=null){let t=this.$store.state.currentAccount;t&&(this.txsLoading=!0,Object(Ot["ob"])().then(t=>{var o,i,n,s;let a=Array.isArray(t)?t:[],l=e&&!(null!==a&&void 0!==a&&null!==(o=a.some)&&void 0!==o&&o.call(a,t=>t.transaction===e.transaction))&&Date.now()-1e3*e.time<6e5;l&&setTimeout(()=>{this.getUserAllTxs(e)},1e4),a.length>0&&(this.initTxs=(null===a||void 0===a?void 0:a.map(e=>e.id?{...e}:{...e,id:e.transaction}))||[]),!l||null!==(i=(n=this.initTxs).some)&&void 0!==i&&i.call(n,t=>t.transaction===e.transaction)||this.initTxs.unshift(e);let r=[],c={};null===a||void 0===a||null===(s=a.forEach)||void 0===s||s.call(a,e=>{c[e.from_address]||(r.push({address:e.from_address,symbol:e.from_symbol,chain:e.chain}),c[e.from_address]=!0),c[e.to_address]||(r.push({address:e.to_address,symbol:e.to_symbol,chain:e.chain}),c[e.to_address]=!0)}),this.txsTokens=r,sessionStorage.txsTokens=JSON.stringify(r||[])}).finally(()=>{this.txsLoading=!1}))},alertTips(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then(()=>{})},alertSupportChainTips(e,t=!1){var o;t?this.$dialog.confirm({title:"",message:e,confirmButtonText:null!==(o=window)&&void 0!==o&&null!==(o=o._tw_)&&void 0!==o&&o.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then(()=>{var e,t;null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.appSwitchChain&&(null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||t.appSwitchChain())}):this.$dialog.alert({title:"",message:e,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"})},supportChain(){if("Bridge"===this.$route.name){var e,t,o,i,n,s,a,l;let r=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"",c=Object.keys(ft["y"]),d=this.$store.state.chainConfig||wt["a"].get("chainConfig"),m=null===c||void 0===c||null===(t=c.map)||void 0===t||null===(t=t.call(c,e=>d[e].name))||void 0===t||null===(o=t.join)||void 0===o?void 0:o.call(t,", "),u=null===d||void 0===d||null===(i=d[r])||void 0===i?void 0:i.name;if(!this.$store.getters.netId&&this.$store.state.chainId)return this.alertSupportChainTips(this.$t("notYetSupportedChainTips",{chains:m}),!0),!1;if(null!==(n=this.$store.state.currentAccount)&&void 0!==n&&null!==(s=n.startsWith)&&void 0!==s&&s.call(n,"T"))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:"TRON",chains:m})),!1;if(r&&(null===c||void 0===c||null===(a=c.includes)||void 0===a||!a.call(c,r)))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:u,chains:m}),!0),!1;if((null===(l=this.$f.getAddressAndChainFromId(this.swapId))||void 0===l?void 0:l.chain)!==this.$store.getters.netId&&this.$store.getters.netId)return this.alertSupportChainTips(this.$t("chainNotSame"),!0),!1}return!0},goAudit(){this.$f.openBrowser("https://beosin.com/audits/SwapFinder_202209021725.pdf")},onCountDownFinish(){this.token1.address!==this.token2.address&&(this.loadingApprove||"hidden"===document.visibilityState?this.$refs.countDown.reset():this.isAmount?this.watchFromAmount():this.watchToAmount())},countDownFinishReset(){this.$refs.countDown.reset()},appSwitchChain(e){var t,o;null!==(t=window)&&void 0!==t&&null!==(t=t._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(o=window)||void 0===o||null===(o=o._tw_)||void 0===o||o.appSwitchChain(),e.stopPropagation())},formatPriceImpactColor(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},goLiquidity(){var e;if(null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.openLp){var t,o,i;let e=this.$store.state.chainConfig||wt["a"].get("chainConfig"),l=this.$store.getters.netId||(null===(t=this.$f.getAddressAndChainFromId(this.swapId))||void 0===t?void 0:t.chain)||"",r=null===e||void 0===e?void 0:e[l],c=null===r||void 0===r?void 0:r.wmainWrapper,d=null===(o=e[l])||void 0===o?void 0:o.swaps,m=null===(i=this.baseToken)||void 0===i?void 0:i.pairs,u=m.find(e=>d.some(t=>t.name===e.amm&&t.router_address));if(u){var n;let e=u.token0_address===c?ft["k"]:u.token0_address,t=u.token1_address===c?ft["k"]:u.token1_address,o=u.amm;null===(n=window)||void 0===n||null===(n=n._tw_)||void 0===n||n.openLp(e,t,o)}else{var s,a;let e=this.tokenInfo.address||(null===(s=this.baseToken)||void 0===s||null===(s=s.token)||void 0===s?void 0:s.token)||"";e=e===c?ft["k"]:e,null===(a=window)||void 0===a||null===(a=a._tw_)||void 0===a||a.openLp(e,"","")}}},checkLimitAmount(){if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return!0;let e=0===this.activeTab?this.limitToken2:this.limitToken1,t=e.balance||0,o=0===this.activeTab?this.limitAmount2:this.limitAmount1;return!(0===Number(t)||Number(t)<Number(o)||""===this.$store.state.wallet||"0"===String(o)||this.limitToken1.address===this.limitToken2.address)},checkLimitAmountMessage(){var e,t,o;let i=0===this.activeTab?this.limitToken2:this.limitToken1,n=i.balance||0,s=0===this.activeTab?this.limitAmount2:this.limitAmount1;return this.$store.state.currentAccount?!this.$store.state.currentAccount||window.ethereum||null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window.trustwallet)&&void 0!==t&&t.solana||null!==(o=window)&&void 0!==o&&o.tronWeb?Number(0===n||Number(n)<Number(s)||""===this.$store.state.wallet)?this.$t("insufficientBalance"):"0"===String(s)?this.$t("AmountCannotBeZero"):"":this.$t("observeAddressNotSwap"):this.$t("pConnectWallet")},getLimitAllowance(){let e=0===this.activeTab?this.limitToken2:this.limitToken1;if(this.$store.getters.netId&&this.$store.getters.netId===e.chain&&e.address){let t=e.chain||this.$store.getters.netId||"bsc";if("solana"===t||"ton"===t)return;let o=ft["v"][t];this.loadingLimitAllowance=!0,Object(Ot["f"])(e.address,o).then(e=>{this.limitAllowance=e.toString(),console.log("limitAllowance",this.limitAllowance)}).finally(()=>{this.loadingLimitAllowance=!1})}},getLimitOrder(){if(this.$store.getters.netId){let e=this.limitToken1.chain||this.$store.getters.netId||"bsc";this.loadingGetLimitOrder=!0,Object(Ot["M"])({chain:e}).then(e=>{this.limitOrders=e}).finally(()=>{setTimeout(()=>{this.loadingGetLimitOrder=!1},800)})}},refreshLimit(e){this.getLimitOrder(),e.from_token===ft["k"]&&(e.from_token===this.limitToken1.address?this.getToken1Info():e.from_token===this.limitToken2.address&&this.getToken2Info())},async approveLimit(){if(!this.supportChainLimit())return;this.loadingLimitApprove=!0;let e=this.limitToken1.chain||this.$store.getters.netId||"bsc",t=ft["v"][e],o=0===this.activeTab?this.limitToken2:this.limitToken1;"bsc"!==this.$store.getters.netId&&"eth"!==this.$store.getters.netId||this.$f.setSwapSendType("fast"),Object(Ot["i"])(o.address,t).then(e=>e.wait()).then(e=>{console.log(e),this.getLimitAllowance()}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingLimitApprove=!1,this.$f.setSwapSendType("")})},supportChainLimit(){if("Bridge"===this.$route.name){var e,t,o,i,n;let a=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"",l=Object.keys(ft["v"]),r=this.$store.state.chainConfig||wt["a"].get("chainConfig"),c=l.map(e=>r[e].name).join(", ");if(null!==(t=this.$store.state.currentAccount)&&void 0!==t&&null!==(o=t.startsWith)&&void 0!==o&&o.call(t,"T")||a&&(null===l||void 0===l||null===(i=l.includes)||void 0===i||!i.call(l,a)))return this.$toast({message:this.$t("notYetSupportedChainLimitTips",{chains:c}),position:"top"}),!1;var s;if(console.log(this.$store.getters.netId,this.swapId),(null===(n=this.$f.getAddressAndChainFromId(this.swapId))||void 0===n?void 0:n.chain)!==this.$store.getters.netId&&this.$store.getters.netId)return this.$dialog.confirm({title:"",message:this.$t("chainNotSame"),confirmButtonText:null!==(s=window)&&void 0!==s&&null!==(s=s._tw_)&&void 0!==s&&s.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then(()=>{var e,t;null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.appSwitchChain&&(null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||t.appSwitchChain())}),!1}return!0},onLimitSubmit(){try{var e;if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChainLimit())return;let t=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(this.swapId))||void 0===e?void 0:e.chain)||"";if(t!==this.netId)return void this.$toast({message:this.$t("plsSwitchChain",{chain:t}),position:"top"});this.isLimitApprove?this.openConfirmLimit():this.approveLimit()}catch(t){console.log(t)}},openConfirmLimit(){let e=0===this.activeTab?this.limitToken2:this.limitToken1,t=0===this.activeTab?this.limitToken1:this.limitToken2,o=0===this.activeTab?this.limitAmount2:this.limitAmount1,i=0===this.activeTab?this.limitAmount1:this.limitAmount2,n=0===this.activeTab?this.limitToken1.decimals:this.limitToken2.decimals,s=new Qo.a(this.limitSlippage||0);if(s=new Qo.a(1).minus(s.div(100)),e.address===ft["k"]){let e=window.navigator.userAgent;if(e.includes("OSType/2")){let t=e.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),o=Gn.lte(t,"2.4.0")&&"1.0.6"!==t;if(o)return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("limitOrderTips1"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}}let a=new Qo.a(ft["w"][e.chain||this.$store.getters.netId]||0).times(5);a=a.gte(3)?a.gte(50)?new Qo.a(50):a:new Qo.a(3);let l=new Qo.a(o).times(e.price).gte(a.times(.999));l?(this.limitInfo={orderType:this.selected,fromToken:e,toToken:t,fromAmount:o,toAmount:i,targetToken:this.limitToken1.address,targetTokenInfo:this.limitToken1,targetLimitPrice:this.limitPrice,triggerPrice:this.triggerPrice,activeTab:this.activeTab,minReturn:new Qo.a(i||0).times(s).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${n}})?`))[0]},console.log("limitInfo",this.limitInfo),this.dialogVisibleLimit=!0):this.$dialog.alert({title:this.$t("tips"),message:this.$t("minimumTransactionAmount",{n:a.toFixed()}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})},submitLimitOrder(){if(!this.supportChainLimit())return;let e=new Qo.a(this.limitSlippage||0);e=new Qo.a(1).minus(e.div(100));let t=this.$store.state.currentAccount;console.log("maker",t);let o=0===this.activeTab?this.limitToken2:this.limitToken1,i=0===this.activeTab?this.limitToken1:this.limitToken2,n=0===this.activeTab?this.limitAmount2:this.limitAmount1,s=0===this.activeTab?this.limitAmount1:this.limitAmount2,a=o.address,l=jt["utils"].parseUnits(new Qo.a(n||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o.decimals}})?`))[0],o.decimals).toString(),r=i.address,c=jt["utils"].parseUnits(new Qo.a(s||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${i.decimals}})?`))[0],i.decimals).toString(),d=jt["utils"].parseUnits(new Qo.a(s||0).times(e).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${i.decimals}})?`))[0],i.decimals).toString(),m=this.limitToken1.address,u=this.limitPrice;this.loadingConfirmLimit=!0;let h=this.selected,b=this.triggerPrice,p=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"";Object(Ot["Eb"])(t,a,l,r,d,c,m,u,h,b,p).then(e=>{console.log(e),this.$notify({type:"success",message:this.$t("submitOrdersSuccess")}),this.getLimitOrder(),this.limitAmount1="",this.limitAmount2="",a===ft["k"]&&(a===this.limitToken1.address?this.getToken1Info():a===this.limitToken2.address&&this.getToken2Info())}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingConfirmLimit=!1,this.dialogVisibleLimit=!1})},onSubmitLimitSlippage(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.limitSlippage=(null===e||void 0===e?void 0:e.slippage)||"20")},minusTriggerPrice(){this.triggerPrice&&new Qo.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Qo.a(this.triggerPrice).times(.99).toFixed()))},addTriggerPrice(){this.limitPrice&&new Qo.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Qo.a(this.triggerPrice).times(1.01).toFixed()))},setLimitPrice(){this.baseToken.token.current_price_usd&&(this.limitPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"")}}};o("74ca");const ts=Nt()(es,[["render",bn],["__scopeId","data-v-2ff24eca"]]);var os=ts;const is=e=>(Object(i["pushScopeId"])("data-v-44624085"),e=e(),Object(i["popScopeId"])(),e),ns={class:"section-container color-999 text-size-12"},ss={class:"form-container"},as={class:"flex items-center justify-between card mb-8 text-size-12"},ls={class:"card"},rs={class:"flex items-center justify-between text-size-12"},cs={class:"flex items-center"},ds={class:"mr-5"},ms={class:"flex items-center justify-between mt-26"},us=is(()=>Object(i["createElementVNode"])("span",{class:"flex-1"},null,-1)),hs={class:"icon-plus-container"},bs={class:"card mb-10"},ps={class:"flex items-center justify-between text-size-12"},vs={class:"flex items-center"},gs={class:"mr-5"},fs={class:"flex items-center justify-between mt-26"},ks=is(()=>Object(i["createElementVNode"])("span",{class:"flex-1"},null,-1)),Os={class:"text-size-12 font-400 mb-20"},js={class:"flex items-center justify-between text-size-12"},ws={class:"color-999"},Ts={class:"flex items-center"},ys={class:"ml-5 color-333"},Ss={class:"flex items-center justify-between mt-5"},Ns={class:"color-999"},Vs={class:"color-333"},xs={class:"flex items-center justify-between mt-5"},Es=is(()=>Object(i["createElementVNode"])("span",{class:"color-999"},null,-1)),_s={class:"color-333"},$s={class:"flex items-center justify-between mt-5"},Bs={class:"color-999"},As={class:"color-333"},Cs={class:"flex items-center justify-between mt-5"},Ds=is(()=>Object(i["createElementVNode"])("span",{class:"color-999"},null,-1)),Is={class:"color-333"},Ls={class:"flex items-center justify-between mt-5"},Fs={class:"color-999"},Ps={class:"color-333"},Us={class:"flex items-center justify-between mt-5"},Rs={class:"color-999"},Ms={class:"color-333"},zs={class:"flex items-center justify-between mt-5"},qs={class:"color-999"},Ws={class:"color-333"},Hs={class:"flex items-center justify-between mt-5"},Qs=is(()=>Object(i["createElementVNode"])("span",{class:"color-999"},null,-1)),Gs={class:"color-333"},Js={class:"flex items-center justify-between mt-5"},Ks={class:"color-999"},Zs={class:"color-333"},Ys={class:"flex items-center justify-between mt-5"},Xs={class:"color-999"},ea={class:"color-333 flex items-center"},ta={class:"flex justify-center mt-20 text-size-14"},oa={class:"card-container txs-container"},ia={class:"van-hairline--bottom"},na={class:"color-333 text-size-14"},sa={class:"card flex items-center color-333 text-size-14 mt-10"},aa=is(()=>Object(i["createElementVNode"])("span",null,"/",-1)),la=is(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),ra={key:0},ca={key:1},da={class:"flex items-center justify-between color-333 text-size-14 mt-14"},ma={class:"flex items-center justify-between"},ua={class:"ml-5 color-333 text-size-14"},ha={class:"flex items-center justify-between color-333 text-size-14 mt-10"},ba={class:"flex items-center justify-between"},pa={class:"ml-5 color-333 text-size-14"},va={class:"flex items-center justify-between mt-5 text-size-12 mt-14"},ga={class:"color-999"},fa={class:"flex items-center"},ka={class:"ml-5 color-333"},Oa={class:"flex items-center justify-between mt-5 text-size-12"},ja={class:"color-999"},wa={class:"color-333"},Ta={class:"flex items-center justify-between mt-5 text-size-12"},ya=is(()=>Object(i["createElementVNode"])("span",{class:"color-999"},null,-1)),Sa={class:"color-333"},Na={class:"flex items-center justify-between mt-5 text-size-12"},Va={class:"color-999"},xa={class:"color-333"},Ea={class:"flex items-center justify-between mt-5 text-size-12"},_a=is(()=>Object(i["createElementVNode"])("span",{class:"color-999"},null,-1)),$a={class:"color-333"},Ba={class:"flex items-center justify-between mt-5 text-size-12"},Aa={class:"color-999"},Ca={class:"color-333"},Da={class:"flex items-center justify-between mt-5 text-size-12"},Ia=is(()=>Object(i["createElementVNode"])("span",{class:"color-999"},null,-1)),La={class:"color-333"},Fa={class:"flex items-center justify-between mt-5 text-size-12 mb-30"},Pa={class:"color-999"},Ua={class:"color-333 flex items-center"},Ra={class:"pop-content text-center pt-50 pb-100"},Ma={class:"icon-container"},za={class:"text-size-14 font-400 color-333 text-center mt-15 mb-6"};function qa(e,t,n,s,a,l){var r,c,d,m,u,h,b,p;const v=Object(i["resolveComponent"])("SelectSwap"),g=Object(i["resolveComponent"])("van-button"),f=Object(i["resolveComponent"])("van-field"),k=Object(i["resolveComponent"])("SelectToken"),O=Object(i["resolveComponent"])("van-icon"),j=Object(i["resolveComponent"])("van-image"),w=Object(i["resolveComponent"])("Slippage"),T=Object(i["resolveComponent"])("LPHistory"),y=Object(i["resolveComponent"])("van-form"),S=Object(i["resolveComponent"])("van-action-sheet");return Object(i["openBlock"])(),Object(i["createElementBlock"])("section",ns,[Object(i["createElementVNode"])("div",ss,[Object(i["createElementVNode"])("div",as,[Object(i["createElementVNode"])("div",null,Object(i["toDisplayString"])(e.$t("selectPool")),1),Object(i["createVNode"])(v,{swaps:a.swaps,swap:a.swap,"onUpdate:swap":[t[0]||(t[0]=e=>a.swap=e),l.handleSelectSwap],chain:l.chain},null,8,["swaps","swap","chain","onUpdate:swap"])]),Object(i["createElementVNode"])("div",ls,[Object(i["createElementVNode"])("div",rs,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("amount")),1),Object(i["createElementVNode"])("div",cs,[Object(i["createElementVNode"])("span",ds,Object(i["toDisplayString"])(e.$t("balance"))+": "+Object(i["toDisplayString"])(e.$f.formatNumber2(a.token0.balance||a.token0.value||0)),1),Object(i["createVNode"])(g,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:Object(i["withModifiers"])(l.handleMax0,["stop"])},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("max")),1)]),_:1},8,["onClick"])])]),Object(i["createElementVNode"])("div",ms,[Object(i["createVNode"])(f,{modelValue:a.amount0,"onUpdate:modelValue":[t[1]||(t[1]=e=>a.amount0=e),l.watchAmount0],placeholder:"0.0",type:"number",clearable:"",class:"input-number",border:!1},null,8,["modelValue","onUpdate:modelValue"]),us,Object(i["createVNode"])(k,{isBalance:!0,tokens:l.userTokens,disabledToken:a.token1.address||"",token:a.token0,"onUpdate:token":[t[2]||(t[2]=e=>a.token0=e),l.handleSelectToken0],chain:l.chain},null,8,["tokens","disabledToken","token","chain","onUpdate:token"])])]),Object(i["createElementVNode"])("div",hs,[Object(i["createVNode"])(O,{class:"icon-plus color-primary p-8 rd-50 bg-F6F6F6",name:"plus"})]),Object(i["createElementVNode"])("div",bs,[Object(i["createElementVNode"])("div",ps,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("amount")),1),Object(i["createElementVNode"])("div",vs,[Object(i["createElementVNode"])("span",gs,Object(i["toDisplayString"])(e.$t("balance"))+": "+Object(i["toDisplayString"])(e.$f.formatNumber2(a.token1.balance||a.token1.value||0)),1),Object(i["createVNode"])(g,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:Object(i["withModifiers"])(l.handleMax1,["stop"])},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("max")),1)]),_:1},8,["onClick"])])]),Object(i["createElementVNode"])("div",fs,[Object(i["createVNode"])(f,{modelValue:a.amount1,"onUpdate:modelValue":[t[3]||(t[3]=e=>a.amount1=e),l.watchAmount1],placeholder:"0.0",type:"number",border:!1,clearable:"",class:"input-number"},null,8,["modelValue","onUpdate:modelValue"]),ks,Object(i["createVNode"])(k,{isBalance:!0,tokens:l.userTokens,disabledToken:a.token0.address||"",token:a.token1,"onUpdate:token":[t[4]||(t[4]=e=>a.token1=e),l.handleSelectToken1],chain:l.chain},null,8,["tokens","disabledToken","token","chain","onUpdate:token"])])]),Object(i["createElementVNode"])("ul",Os,[Object(i["createElementVNode"])("li",js,[Object(i["createElementVNode"])("span",ws,Object(i["toDisplayString"])(e.$t("currentPool")),1),Object(i["createElementVNode"])("div",Ts,[a.swap.name?(Object(i["openBlock"])(),Object(i["createBlock"])(j,{key:0,class:"w-16 h-16",round:"","lazy-load":"",src:`${e.$store.state.s3BaseUrl}swap/${a.swap.name}.jpeg`,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("span",ys,Object(i["toDisplayString"])(a.swap.show_name||""),1)])]),a.reserves.pair===a.ZERO_ADDRESS?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createElementVNode"])("li",Ss,[Object(i["createElementVNode"])("span",Ns,Object(i["toDisplayString"])(e.$t("rate")),1),Object(i["createElementVNode"])("span",Vs,"1 "+Object(i["toDisplayString"])(a.token1.symbol||"")+" = "+Object(i["toDisplayString"])(a.amount0&&a.amount1?e.$f.formatNumber2(Number(a.amount0||0)/Number(a.amount1)):0)+" "+Object(i["toDisplayString"])(a.token0.symbol||""),1)]),Object(i["createElementVNode"])("li",xs,[Es,Object(i["createElementVNode"])("span",_s,"1 "+Object(i["toDisplayString"])(a.token0.symbol||"")+" = "+Object(i["toDisplayString"])(a.amount0&&a.amount1?e.$f.formatNumber2(Number(a.amount1||0)/Number(a.amount0)):0)+" "+Object(i["toDisplayString"])(a.token1.symbol||""),1)]),null!==(r=a.token0)&&void 0!==r&&r.current_price_usd&&null!==(c=a.token1)&&void 0!==c&&c.current_price_usd?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createElementVNode"])("li",$s,[Object(i["createElementVNode"])("span",Bs,Object(i["toDisplayString"])(e.$t("referenceRate1")),1),Object(i["createElementVNode"])("span",As,"1 "+Object(i["toDisplayString"])(a.token1.symbol||"")+" = "+Object(i["toDisplayString"])(e.$f.formatNumber2(Number(null===(d=a.token1)||void 0===d?void 0:d.current_price_usd)/Number(null===(m=a.token0)||void 0===m?void 0:m.current_price_usd)))+" "+Object(i["toDisplayString"])(a.token0.symbol||""),1)]),Object(i["createElementVNode"])("li",Cs,[Ds,Object(i["createElementVNode"])("span",Is,"1 "+Object(i["toDisplayString"])(a.token0.symbol||"")+" = "+Object(i["toDisplayString"])(e.$f.formatNumber2(Number(null===(u=a.token0)||void 0===u?void 0:u.current_price_usd)/Number(null===(h=a.token1)||void 0===h?void 0:h.current_price_usd)))+" "+Object(i["toDisplayString"])(a.token1.symbol||""),1)]),Object(i["createElementVNode"])("li",Ls,[Object(i["createElementVNode"])("span",Fs,Object(i["toDisplayString"])(a.token0.symbol||"")+" "+Object(i["toDisplayString"])(e.$t("referencePrice")),1),Object(i["createElementVNode"])("span",Ps,"$"+Object(i["toDisplayString"])(e.$f.formatNumber2((null===(b=a.token0)||void 0===b?void 0:b.current_price_usd)||0)),1)]),Object(i["createElementVNode"])("li",Us,[Object(i["createElementVNode"])("span",Rs,Object(i["toDisplayString"])(a.token1.symbol||"")+" "+Object(i["toDisplayString"])(e.$t("referencePrice")),1),Object(i["createElementVNode"])("span",Ms,"$"+Object(i["toDisplayString"])(e.$f.formatNumber2(null===(p=a.token1)||void 0===p?void 0:p.current_price_usd)),1)])],64)):Object(i["createCommentVNode"])("",!0)],64)):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createElementVNode"])("li",zs,[Object(i["createElementVNode"])("span",qs,Object(i["toDisplayString"])(e.$t("rate")),1),Object(i["createElementVNode"])("span",Ws,"1 "+Object(i["toDisplayString"])(a.token1.symbol||"")+" = "+Object(i["toDisplayString"])(a.reserves.reserve0&&a.reserves.reserve1?e.$f.formatNumber2(Number(a.reserves.reserve0)*10**a.token1.decimals/10**a.token0.decimals/Number(a.reserves.reserve1)):"")+" "+Object(i["toDisplayString"])(a.token0.symbol||""),1)]),Object(i["createElementVNode"])("li",Hs,[Qs,Object(i["createElementVNode"])("span",Gs,"1 "+Object(i["toDisplayString"])(a.token0.symbol||"")+" = "+Object(i["toDisplayString"])(a.reserves.reserve0&&a.reserves.reserve1?e.$f.formatNumber2(Number(a.reserves.reserve1)*10**a.token0.decimals/10**a.token1.decimals/Number(a.reserves.reserve0)):"")+" "+Object(i["toDisplayString"])(a.token1.symbol||""),1)])],64)),Object(i["createElementVNode"])("li",Js,[Object(i["createElementVNode"])("span",Ks,Object(i["toDisplayString"])(e.$t("shareRatio")),1),Object(i["createElementVNode"])("span",Zs,Object(i["toDisplayString"])(a.reserves.reserve0&&a.amount0?e.$f.formatNumber2(Math.min(100*Number(a.amount0)/Number(a.utils.formatUnits(a.reserves.reserve0,a.token0.decimals)),100)):0)+"%",1)]),Object(i["createElementVNode"])("li",Ys,[Object(i["createElementVNode"])("span",Xs,Object(i["toDisplayString"])(e.$t("slippage")),1),Object(i["createElementVNode"])("div",ea,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(a.slippage)+"%",1),Object(i["createVNode"])(w,{slippage:a.slippage,"onUpdate:slippage":t[5]||(t[5]=e=>a.slippage=e)},null,8,["slippage"])])])]),Object(i["createElementVNode"])("div",null,[!l.isApprove0&&l.error<=0?(Object(i["openBlock"])(),Object(i["createBlock"])(g,{key:0,type:"primary",color:"#743FF7",block:"",loading:a.loading0,"loading-text":e.$t("approve"),disabled:""===l.walletAddress||""===a.token0.address||void 0===a.token0.address,class:"mb-10 br-6",onClick:Object(i["withModifiers"])(l._approve0,["stop"])},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("approve"))+" "+Object(i["toDisplayString"])(a.token0.symbol||""),1)]),_:1},8,["loading","loading-text","disabled","onClick"])):Object(i["createCommentVNode"])("",!0),!l.isApprove1&&l.error<=0?(Object(i["openBlock"])(),Object(i["createBlock"])(g,{key:1,type:"primary",color:"#743FF7",block:"",loading:a.loading1,"loading-text":e.$t("approve"),disabled:""===l.walletAddress||""===a.token1.address||void 0===a.token1.address,class:"mb-10 br-6",onClick:Object(i["withModifiers"])(l._approve1,["stop"])},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("approve"))+" "+Object(i["toDisplayString"])(a.token1.symbol||""),1)]),_:1},8,["loading","loading-text","disabled","onClick"])):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(g,{color:l.error>2?"#999":"#3F80F7",block:"",class:"br-6",loading:a.loadingSubmit,"loading-text":e.$t("add"),disabled:l.disabled,onClick:t[6]||(t[6]=Object(i["withModifiers"])(e=>a.confirmSubmitVisible=!0,["stop"]))},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(l.errorMessage),1)]),_:1},8,["color","loading","loading-text","disabled"]),Object(i["createElementVNode"])("div",ta,[Object(i["createElementVNode"])("button",{class:"border-none clickable color-3f80f7",onClick:t[7]||(t[7]=Object(i["withModifiers"])((...e)=>l.goMyLiquidity&&l.goMyLiquidity(...e),["stop"]))},Object(i["toDisplayString"])(e.$t("myLiquidity")),1)])])]),Object(i["createElementVNode"])("div",oa,[Object(i["createElementVNode"])("h3",ia,Object(i["toDisplayString"])(e.$t("lpHistory")),1),Object(i["createVNode"])(T,{tableList:a.historyList,loading:a.loadingHistory},null,8,["tableList","loading"])]),Object(i["createVNode"])(S,{show:a.confirmSubmitVisible,"onUpdate:show":t[8]||(t[8]=e=>a.confirmSubmitVisible=e),title:a.reserves.pair===a.ZERO_ADDRESS?e.$t("createLiquidityConfirm"):e.$t("addLiquidityConfirm")},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(y,{onSubmit:l._addLiquidity,class:"pop-content"},{default:Object(i["withCtx"])(()=>{var t,n,s,r,c,d,m,u,h,b;return[Object(i["createElementVNode"])("div",na,Object(i["toDisplayString"])(e.$t("youWillReceive")),1),Object(i["createElementVNode"])("div",sa,[Object(i["createVNode"])(j,{class:"w-20 h-20",round:"","lazy-load":"",src:null!==(t=a.token0)&&void 0!==t&&t.logo_url?e.$f.formatIcon(a.token0):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createVNode"])(j,{class:"w-20 h-20 ml-4 mr-6",round:"","lazy-load":"",src:null!==(n=a.token1)&&void 0!==n&&n.logo_url?e.$f.formatIcon(a.token1):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(a.token0.symbol),1),aa,Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(a.token1.symbol),1),la,"-"!==l.lpAmount?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",ra,"+ "+Object(i["toDisplayString"])(e.$f.formatNumber2(l.lpAmount)),1)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",ca))]),Object(i["createElementVNode"])("div",da,[Object(i["createElementVNode"])("div",ma,[Object(i["createVNode"])(j,{class:"w-20 h-20",round:"","lazy-load":"",src:null!==(s=a.token0)&&void 0!==s&&s.logo_url?e.$f.formatIcon(a.token0):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",ua,Object(i["toDisplayString"])(a.token0.symbol||""),1)]),Object(i["createElementVNode"])("div",null,"- "+Object(i["toDisplayString"])(e.$f.formatNumber2(a.amount0)),1)]),Object(i["createElementVNode"])("div",ha,[Object(i["createElementVNode"])("div",ba,[Object(i["createVNode"])(j,{class:"w-20 h-20",round:"","lazy-load":"",src:null!==(r=a.token1)&&void 0!==r&&r.logo_url?e.$f.formatIcon(a.token1):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",pa,Object(i["toDisplayString"])(a.token1.symbol||""),1)]),Object(i["createElementVNode"])("div",null,"- "+Object(i["toDisplayString"])(e.$f.formatNumber2(a.amount1)),1)]),Object(i["createElementVNode"])("div",va,[Object(i["createElementVNode"])("span",ga,Object(i["toDisplayString"])(e.$t("currentPool")),1),Object(i["createElementVNode"])("div",fa,[a.swap.name?(Object(i["openBlock"])(),Object(i["createBlock"])(j,{key:0,class:"w-16 h-16",round:"","lazy-load":"",src:`${e.$store.state.s3BaseUrl}swap/${a.swap.name}.jpeg`,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("span",ka,Object(i["toDisplayString"])(a.swap.show_name||""),1)])]),a.reserves.pair===a.ZERO_ADDRESS&&null!==(c=a.token0)&&void 0!==c&&c.current_price_usd&&null!==(d=a.token1)&&void 0!==d&&d.current_price_usd?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createElementVNode"])("li",Oa,[Object(i["createElementVNode"])("span",ja,Object(i["toDisplayString"])(e.$t("rate")),1),Object(i["createElementVNode"])("span",wa,"1 "+Object(i["toDisplayString"])(a.token1.symbol||"")+" = "+Object(i["toDisplayString"])(a.amount0&&a.amount1?e.$f.formatNumber2(Number(a.amount0||0)/Number(a.amount1)):0)+" "+Object(i["toDisplayString"])(a.token0.symbol||""),1)]),Object(i["createElementVNode"])("li",Ta,[ya,Object(i["createElementVNode"])("span",Sa,"1 "+Object(i["toDisplayString"])(a.token0.symbol||"")+" = "+Object(i["toDisplayString"])(a.amount0&&a.amount1?e.$f.formatNumber2(Number(a.amount1||0)/Number(a.amount0)):0)+" "+Object(i["toDisplayString"])(a.token1.symbol||""),1)]),Object(i["createElementVNode"])("li",Na,[Object(i["createElementVNode"])("span",Va,Object(i["toDisplayString"])(e.$t("referenceRate1")),1),Object(i["createElementVNode"])("span",xa,"1 "+Object(i["toDisplayString"])(a.token1.symbol||"")+" = "+Object(i["toDisplayString"])(e.$f.formatNumber2(Number(null===(m=a.token1)||void 0===m?void 0:m.current_price_usd)/Number(null===(u=a.token0)||void 0===u?void 0:u.current_price_usd)))+" "+Object(i["toDisplayString"])(a.token0.symbol||""),1)]),Object(i["createElementVNode"])("li",Ea,[_a,Object(i["createElementVNode"])("span",$a,"1 "+Object(i["toDisplayString"])(a.token0.symbol||"")+" = "+Object(i["toDisplayString"])(e.$f.formatNumber2(Number(null===(h=a.token0)||void 0===h?void 0:h.current_price_usd)/Number(null===(b=a.token1)||void 0===b?void 0:b.current_price_usd)))+" "+Object(i["toDisplayString"])(a.token1.symbol||""),1)])],64)):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createElementVNode"])("li",Ba,[Object(i["createElementVNode"])("span",Aa,Object(i["toDisplayString"])(e.$t("rate")),1),Object(i["createElementVNode"])("span",Ca,"1 "+Object(i["toDisplayString"])(a.token1.symbol||"")+" = "+Object(i["toDisplayString"])(a.reserves.reserve0&&a.reserves.reserve1?e.$f.formatNumber2(Number(a.reserves.reserve0)/Number(a.reserves.reserve1)):"")+" "+Object(i["toDisplayString"])(a.token0.symbol||""),1)]),Object(i["createElementVNode"])("li",Da,[Ia,Object(i["createElementVNode"])("span",La,"1 "+Object(i["toDisplayString"])(a.token0.symbol||"")+" = "+Object(i["toDisplayString"])(a.reserves.reserve0&&a.reserves.reserve1?e.$f.formatNumber2(Number(a.reserves.reserve1)/Number(a.reserves.reserve0)):"")+" "+Object(i["toDisplayString"])(a.token1.symbol||""),1)])],64)),Object(i["createElementVNode"])("div",Fa,[Object(i["createElementVNode"])("span",Pa,Object(i["toDisplayString"])(e.$t("slippage")),1),Object(i["createElementVNode"])("div",Ua,Object(i["toDisplayString"])(a.slippage)+"%",1)]),Object(i["createVNode"])(g,{color:"#3F80F7",block:"",class:"br-6",loading:a.loadingSubmit,"loading-text":a.reserves.pair===a.ZERO_ADDRESS?e.$t("confirmCreate"):e.$t("confirmAdd"),disabled:l.disabled,"native-type":"submit"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(a.reserves.pair===a.ZERO_ADDRESS?e.$t("confirmCreate"):e.$t("confirmAdd")),1)]),_:1},8,["loading","loading-text","disabled"])]}),_:1},8,["onSubmit"])]),_:1},8,["show","title"]),Object(i["createVNode"])(S,{show:a.confirmTxVisible,"onUpdate:show":t[10]||(t[10]=e=>a.confirmTxVisible=e),title:e.$t("createLiquidityConfirm")},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",Ra,[Object(i["createElementVNode"])("div",Ma,[Object(i["createVNode"])(O,{class:"icon-s",name:"success",size:"0.64rem",color:"#3F80F7"})]),Object(i["createElementVNode"])("div",za,Object(i["toDisplayString"])(e.$t("transactionSubmitted")),1),Object(i["createElementVNode"])("a",{class:"text-size-12 font-400 color-3f80f7 clickable",href:"javascript:;",onClick:t[9]||(t[9]=e=>{var t,o;return l.openBrowser(a.transaction,"tx",(null===(t=a.token0)||void 0===t?void 0:t.chain)||(null===(o=a.token1)||void 0===o?void 0:o.chain)||l.chain)}),rel:"noopener noreferrer"},Object(i["toDisplayString"])(e.$t("viewBlockExplorerTransactionHistory")),1)])]),_:1},8,["show","title"])])}var Wa=o("47e2");const Ha=e=>(Object(i["pushScopeId"])("data-v-557a6e45"),e=e(),Object(i["popScopeId"])(),e),Qa={class:"ml-5 color-333 text-size-14"},Ga={key:1,class:"ml-5 color-333 text-size-14"},Ja=Ha(()=>Object(i["createElementVNode"])("i",{class:"iconfont icon-collapse-down ml-5 color-999"},null,-1)),Ka={class:"rules-content"},Za={class:"search-bar",action:"/"},Ya={key:0,class:"pop-title"},Xa={style:{background:"#fff"},class:"pb-50"},el=["onClick"],tl={class:"main"},ol={key:0,class:"risk-status high"},il={key:0,class:"minor"},nl=Ha(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),sl={class:"right-label"},al=Ha(()=>Object(i["createElementVNode"])("br",null,null,-1)),ll={key:0,class:"minor"};var rl={props:{tokens:Array,token:Object,chain:String,isBalance:Boolean,disabledToken:String},emits:["update:token"],setup(e,{emit:t}){const n=e,{t:s}=Object(Wa["b"])();let a=Object(i["ref"])(!1),l=Object(i["ref"])(""),r=Object(i["ref"])(n.tokens||[]),c=Object(i["ref"])(!1);Object(i["watch"])(l,e=>{""!==e?m():r.value=n.tokens}),Object(i["watch"])(a,e=>{var t,o;e&&(r.value=n.tokens||[]),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)});let d=null;function m(){d&&(clearTimeout(d),d=null),d=setTimeout(()=>{u()},500)}function u(){if(""!==l.value){var e;let t=new RegExp(l.value,"i"),o=(null===(e=n.tokens)||void 0===e?void 0:e.filter(e=>t.test((null===e||void 0===e?void 0:e.address)||"")||t.test((null===e||void 0===e?void 0:e.symbol)||"")||t.test((null===e||void 0===e?void 0:e.name)||"")))||[];(null===o||void 0===o?void 0:o.length)>0?r.value=o:(c.value=!0,Object(Ot["Ab"])(l.value,n.chain).then(e=>{var t,o;r.value=null===(t=e.filter)||void 0===t||null===(t=t.call(e,e=>e.chain===n.chain))||void 0===t||null===(o=t.map)||void 0===o?void 0:o.call(t,e=>({...e,address:e.token}))}).catch(e=>{console.log(e),r.value=[]}).finally(()=>{c.value=!1}))}else r.value=n.tokens}function h(e){console.log(e),d&&(clearTimeout(d),d=null),u()}function b(){l.value="",a.value=!1}function p(e){e.address!==n.disabledToken&&(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token)&&(t("update:token",e),a.value=!1)}return(t,d)=>{var m,u,v;const g=Object(i["resolveComponent"])("van-image"),f=Object(i["resolveComponent"])("van-search"),k=Object(i["resolveComponent"])("van-empty"),O=Object(i["resolveComponent"])("van-icon"),j=Object(i["resolveComponent"])("van-action-sheet");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createElementVNode"])("button",{class:"flex items-center active-opacity-50",onClick:d[0]||(d[0]=Object(i["withModifiers"])(e=>Object(i["isRef"])(a)?a.value=!0:a=!0,["stop"]))},[null!==n&&void 0!==n&&null!==(m=n.token)&&void 0!==m&&m.address?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createVNode"])(g,{class:"w-16 h-16",round:"","lazy-load":"",src:null!==(u=n.token)&&void 0!==u&&u.logo_url?Object(i["unref"])(Hn["formatIcon"])(n.token):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",Qa,Object(i["toDisplayString"])((null===(v=n.token)||void 0===v?void 0:v.symbol)||""),1)],64)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ga,Object(i["toDisplayString"])(Object(i["unref"])(s)("plsSelectToken")),1)),Ja]),Object(i["createVNode"])(j,{show:Object(i["unref"])(a),"onUpdate:show":d[2]||(d[2]=e=>Object(i["isRef"])(a)?a.value=e:a=e),title:Object(i["unref"])(s)("selectToken"),style:{height:"80%"}},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",Ka,[Object(i["createElementVNode"])("form",Za,[Object(i["createVNode"])(f,{modelValue:Object(i["unref"])(l),"onUpdate:modelValue":d[1]||(d[1]=e=>Object(i["isRef"])(l)?l.value=e:l=e),modelModifiers:{trim:!0},clearable:"",background:"#fff",shape:"round",placeholder:Object(i["unref"])(s)("searchTokenContractName"),onSearch:h,onCancel:b},null,8,["modelValue","placeholder"])]),""!==Object(i["unref"])(l)||e.isBalance?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ya,Object(i["toDisplayString"])(Object(i["unref"])(s)("popularTokens")),1)),Object(i["createElementVNode"])("ul",Xa,[Object(i["withDirectives"])(Object(i["createVNode"])(k,{description:Object(i["unref"])(s)("noData"),class:"empty"},null,8,["description"]),[[i["vShow"],Object(i["unref"])(r)&&0===Object(i["unref"])(r).length&&!Object(i["unref"])(c)]]),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(Object(i["unref"])(r),(a,l)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{class:Object(i["normalizeClass"])(["token-item",{disabled:a.address===e.disabledToken}]),key:l,onClick:Object(i["withModifiers"])(e=>p(a),["stop"])},[Object(i["createVNode"])(g,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:null!==a&&void 0!==a&&a.logo_url?Object(i["unref"])(Hn["formatIcon"])(a):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("div",null,[Object(i["createElementVNode"])("div",tl,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(a.symbol),1),Number(null===a||void 0===a?void 0:a.risk_score)>60?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",ol,Object(i["toDisplayString"])(Object(i["unref"])(s)("highRisk")),1)):Object(i["createCommentVNode"])("",!0)]),a.address&&a.address!==Object(i["unref"])(ft["k"])?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",il,Object(i["toDisplayString"])(a.address.slice(0,6)+"..."+a.address.slice(-6)),1)):Object(i["createCommentVNode"])("",!0)]),nl,Object(i["createElementVNode"])("div",sl,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(a.value?Object(i["unref"])(Hn["formatNumber2"])(a.value):""),1),al,Number(null===a||void 0===a?void 0:a.value)>0&&a.current_price_usd?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",ll,Object(i["toDisplayString"])(a.value?t.$f.formatNumberCurrencyUnit(Number(a.value)*Number(a.current_price_usd)):""),1)):Object(i["createCommentVNode"])("",!0)]),a.address===(n.token.address||n.token.token)?(Object(i["openBlock"])(),Object(i["createBlock"])(O,{key:0,size:"0.48rem",color:"#3F80F7",name:"success"})):(Object(i["openBlock"])(),Object(i["createBlock"])(O,{key:1,style:{opacity:"0"},size:"0.48rem",color:"#3F80F7",name:"success"}))],10,el))),128))])])]),_:1},8,["show","title"])],64)}}};o("1e3d");const cl=Nt()(rl,[["__scopeId","data-v-557a6e45"]]);var dl=cl;const ml=e=>(Object(i["pushScopeId"])("data-v-779f66de"),e=e(),Object(i["popScopeId"])(),e),ul={class:"ml-5 color-333 text-size-14"},hl={key:1,class:"ml-5 color-333 text-size-14"},bl=ml(()=>Object(i["createElementVNode"])("i",{class:"iconfont icon-collapse-down ml-5 color-999"},null,-1)),pl={key:1,type:"button",class:"flex items-center opacity-50",disabled:""},vl=ml(()=>Object(i["createElementVNode"])("span",{class:"ml-5 color-333 text-size-14"},"Raydium",-1)),gl={class:"rules-content"},fl={class:"search-bar",action:"/"},kl={style:{background:"#fff"},class:"pb-50"},Ol=["onClick"],jl={class:"right-label"},wl=ml(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1));var Tl={props:{swaps:Array,chain:String,swap:Object},emits:["update:swap"],setup(e,{emit:t}){const n=e,{t:s}=Object(Wa["b"])();let a=Object(i["ref"])(!1),l=Object(i["ref"])(""),r=Object(i["ref"])(n.swaps||[]),c=Object(i["ref"])(!1);Object(i["watch"])(l,e=>{""!==e?m():r.value=n.swaps}),Object(i["watch"])(a,e=>{var t,o;e&&(r.value=n.swaps||[]),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)});let d=null;function m(){d&&(clearTimeout(d),d=null),d=setTimeout(()=>{u()},500)}function u(){if(""!==l.value){var e;let t=new RegExp(l.value,"i"),o=(null===(e=n.swaps)||void 0===e?void 0:e.filter(e=>t.test((null===e||void 0===e?void 0:e.name)||"")||t.test((null===e||void 0===e?void 0:e.show_name)||"")||t.test((null===e||void 0===e?void 0:e.factory_address)||"")||t.test((null===e||void 0===e?void 0:e.router_address)||"")))||[];(null===o||void 0===o?void 0:o.length)>0&&(r.value=o)}else r.value=n.swaps}function h(e){console.log(e),d&&(clearTimeout(d),d=null),u()}function b(){l.value="",a.value=!1}function p(e){(null!==e&&void 0!==e&&e.name||null!==e&&void 0!==e&&e.router_address)&&(t("update:swap",e),a.value=!1)}return(e,t)=>{var d,m,u;const v=Object(i["resolveComponent"])("van-image"),g=Object(i["resolveComponent"])("van-search"),f=Object(i["resolveComponent"])("van-empty"),k=Object(i["resolveComponent"])("van-icon"),O=Object(i["resolveComponent"])("van-action-sheet");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,["solana"!==(null===n||void 0===n?void 0:n.chain)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{key:0,type:"button",class:"flex items-center active-opacity-50",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>Object(i["isRef"])(a)?a.value=!0:a=!0,["stop"]))},[null!==n&&void 0!==n&&null!==(d=n.swap)&&void 0!==d&&d.name?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createVNode"])(v,{class:"w-16 h-16",round:"","lazy-load":"",src:`${e.$store.state.s3BaseUrl}swap/${null===n||void 0===n||null===(m=n.swap)||void 0===m?void 0:m.name}.jpeg`,"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",ul,Object(i["toDisplayString"])((null===n||void 0===n||null===(u=n.swap)||void 0===u?void 0:u.show_name)||""),1)],64)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",hl,Object(i["toDisplayString"])(Object(i["unref"])(s)("plsSelectSwap")),1)),bl])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("button",pl,[Object(i["createVNode"])(v,{class:"w-16 h-16",round:"","lazy-load":"",src:e.$store.state.s3BaseUrl+"swap/raydium.jpeg","error-icon":o("aeccf")},null,8,["src","error-icon"]),vl])),Object(i["createVNode"])(O,{show:Object(i["unref"])(a),"onUpdate:show":t[2]||(t[2]=e=>Object(i["isRef"])(a)?a.value=e:a=e),title:Object(i["unref"])(s)("selectSwap"),style:{height:"80%"}},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",gl,[Object(i["createElementVNode"])("form",fl,[Object(i["createVNode"])(g,{modelValue:Object(i["unref"])(l),"onUpdate:modelValue":t[1]||(t[1]=e=>Object(i["isRef"])(l)?l.value=e:l=e),modelModifiers:{trim:!0},clearable:"",background:"#fff",shape:"round",placeholder:Object(i["unref"])(s)("searchPool"),onSearch:h,onCancel:b},null,8,["modelValue","placeholder"])]),Object(i["createElementVNode"])("ul",kl,[Object(i["withDirectives"])(Object(i["createVNode"])(f,{description:Object(i["unref"])(s)("emptyData"),class:"empty"},null,8,["description"]),[[i["vShow"],Object(i["unref"])(r)&&0===Object(i["unref"])(r).length&&!Object(i["unref"])(c)]]),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(Object(i["unref"])(r),(t,s)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{class:"token-item",key:s,onClick:Object(i["withModifiers"])(e=>p(t),["stop"])},[Object(i["createVNode"])(v,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:`${e.$store.state.s3BaseUrl}swap/${t.name}.jpeg`,"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("div",jl,Object(i["toDisplayString"])(t.show_name),1),wl,t.name===n.swap.name?(Object(i["openBlock"])(),Object(i["createBlock"])(k,{key:0,size:"0.48rem",color:"#3F80F7",name:"success"})):(Object(i["openBlock"])(),Object(i["createBlock"])(k,{key:1,style:{opacity:"0"},size:"0.48rem",color:"#3F80F7",name:"success"}))],8,Ol))),128))])])]),_:1},8,["show","title"])],64)}}};o("9eb5");const yl=Nt()(Tl,[["__scopeId","data-v-779f66de"]]);var Sl=yl,Nl=o("75e6");const Vl=e=>(Object(i["pushScopeId"])("data-v-0ce3f71c"),e=e(),Object(i["popScopeId"])(),e),xl={class:"popup-title"},El={class:"slippage-label"},_l=["onClick"],$l={style:{width:"100%"}},Bl={class:"radio-group"},Al={key:0,style:{flex:"1"}},Cl=["id","value"],Dl=["for"],Il={class:"slippage-input"},Ll=Vl(()=>Object(i["createElementVNode"])("span",null,"%",-1)),Fl={class:"form-submit"};var Pl={props:{slippage:[String,Number]},emits:["update:slippage"],setup(e,{emit:t}){const o=e,{t:n}=Object(Wa["b"])();let s=Object(i["ref"])(!1),a=Object(i["ref"])(["0.1","0.5","1"]),l=Object(i["ref"])(o.slippage||"1");function r(){t("update:slippage",l.value),s.value=!1}function c(){Nl["a"].alert({title:n("slippage"),message:n("slippageTips"),confirmButtonText:n("iKnown"),confirmButtonColor:"#3F80F7",messageAlign:"left"}).then(()=>{})}function d(){s.value&&Number(l.value)<0&&(l.value="0")}function m(e){return Number(e)<=49.99}return Object(i["watch"])(s,e=>{e&&(l.value=o.slippage||"1")}),(e,t)=>{const o=Object(i["resolveComponent"])("van-field"),u=Object(i["resolveComponent"])("van-button"),h=Object(i["resolveComponent"])("van-form"),b=Object(i["resolveComponent"])("van-popup");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createElementVNode"])("i",{class:"iconfont icon-edit clickable",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>Object(i["isRef"])(s)?s.value=!0:s=!0,["stop"]))}),Object(i["createVNode"])(b,{show:Object(i["unref"])(s),"onUpdate:show":t[4]||(t[4]=e=>Object(i["isRef"])(s)?s.value=e:s=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("h3",xl,Object(i["toDisplayString"])(Object(i["unref"])(n)("setSlippage")),1),Object(i["createVNode"])(h,{class:"popup-content",onSubmit:r},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",El,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(Object(i["unref"])(n)("slippage")),1),Object(i["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:Object(i["withModifiers"])(c,["stop"]),style:{"font-size":"0.38rem","margin-left":"0.05rem",color:"#3F80F7"}},null,8,_l)]),Object(i["createVNode"])(o,{name:"slippage",modelValue:Object(i["unref"])(l),"onUpdate:modelValue":t[3]||(t[3]=e=>Object(i["isRef"])(l)?l.value=e:l=e),label:"",style:{"--van-cell-horizontal-padding":"0"},rules:[{required:!0,message:Object(i["unref"])(n)("enterSlippage")},{validator:m,message:Object(i["unref"])(n)("slippageMaxTip")}],border:!1},{input:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",$l,[Object(i["createElementVNode"])("div",Bl,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(Object(i["unref"])(a),(e,o)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:o},[0!==o?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Al)):Object(i["createCommentVNode"])("",!0),Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{type:"radio",id:"radio-"+e,"onUpdate:modelValue":t[1]||(t[1]=e=>Object(i["isRef"])(l)?l.value=e:l=e),value:e,class:"radio-input"},null,8,Cl),[[i["vModelRadio"],Object(i["unref"])(l)]]),Object(i["createElementVNode"])("label",{for:"radio-"+e,class:"radio-item"},Object(i["toDisplayString"])(e)+"%",9,Dl)],64))),128))]),Object(i["createElementVNode"])("div",Il,[Object(i["createVNode"])(o,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",modelValue:Object(i["unref"])(l),"onUpdate:modelValue":t[2]||(t[2]=e=>Object(i["isRef"])(l)?l.value=e:l=e),onBlur:d,clearable:""},null,8,["modelValue"]),Ll])])]),_:1},8,["modelValue","rules"]),Object(i["createElementVNode"])("div",Fl,[Object(i["createVNode"])(u,{class:"btn",block:"",round:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(Object(i["unref"])(n)("confirm1")),1)]),_:1})])]),_:1})]),_:1},8,["show"])],64)}}};o("67e3");const Ul=Nt()(Pl,[["__scopeId","data-v-0ce3f71c"]]);var Rl=Ul;const Ml={class:"pb-50"},zl={class:"text-size-14 w-100p table-history color-333"},ql={class:"text-size-12 color-999 t-header"},Wl={class:"text-left font-400"},Hl={class:"text-left font-400"},Ql={class:"text-right font-400"},Gl=["onClick"],Jl={class:"text-left font-400"},Kl={class:"text-center font-400"},Zl={class:"flex items-center mb-5"},Yl={class:"mr-5"},Xl={class:"flex items-center"},er={class:"mr-5"},tr={class:"text-right font-400"},or={class:"flex items-center justify-end mb-5"},ir={class:"flex items-center justify-end"},nr={class:"color-999 text-size-12"};function sr(e,t,n,s,a,l){const r=Object(i["resolveComponent"])("van-image"),c=Object(i["resolveComponent"])("van-empty");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ml,[Object(i["createElementVNode"])("table",zl,[Object(i["createElementVNode"])("tr",ql,[Object(i["createElementVNode"])("th",Wl,Object(i["toDisplayString"])(e.$t("type")),1),Object(i["createElementVNode"])("th",Hl,Object(i["toDisplayString"])(e.$t("token"))+"/"+Object(i["toDisplayString"])(e.$t("amount")),1),Object(i["createElementVNode"])("th",Ql,"DEX/"+Object(i["toDisplayString"])(e.$t("volume")),1)]),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(n.tableList,(t,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("tr",{key:n,class:"t-row clickable",onClick:Object(i["withModifiers"])(o=>e.$f.openBrowser(t.transaction,"tx",t.chain),["stop"])},[Object(i["createElementVNode"])("td",Jl,[Object(i["createElementVNode"])("div",{style:Object(i["normalizeStyle"])({color:"addLiquidity"===t.type?"#12B886":"#F6465D"})},Object(i["toDisplayString"])("addLiquidity"===t.type?e.$t("add"):e.$t("remove")),5)]),Object(i["createElementVNode"])("td",Kl,[Object(i["createElementVNode"])("div",Zl,[Object(i["createVNode"])(r,{class:"w-16 h-16 mr-5",round:"","lazy-load":"",src:null!==t&&void 0!==t&&t.token0_logo_url?e.$f.formatIcon({logo_url:t.token0_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",Yl,Object(i["toDisplayString"])(e.$f.formatNumber2(t.amount0)),1),Object(i["createElementVNode"])("div",null,Object(i["toDisplayString"])(l.formatTokenSymbol(t.token0_address,t.chain,t.token0_symbol)),1)]),Object(i["createElementVNode"])("div",Xl,[Object(i["createVNode"])(r,{class:"w-16 h-16 mr-5",round:"","lazy-load":"",src:null!==t&&void 0!==t&&t.token1_logo_url?e.$f.formatIcon({logo_url:t.token1_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",er,Object(i["toDisplayString"])(e.$f.formatNumber2(t.amount1)),1),Object(i["createElementVNode"])("div",null,Object(i["toDisplayString"])(l.formatTokenSymbol(t.token1_address,t.chain,t.token1_symbol)),1)])]),Object(i["createElementVNode"])("td",tr,[Object(i["createElementVNode"])("div",or,[Object(i["createVNode"])(r,{class:"w-16 h-16 mr-5",round:"","lazy-load":"",src:`${e.$store.state.s3BaseUrl}swap/${t.amm}.jpeg`,"error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumberCurrencyUnit(Number(t.amount_usd)<0?-1*Number(t.amount_usd):t.amount_usd)),1)]),Object(i["createElementVNode"])("div",ir,[Object(i["createElementVNode"])("div",nr,Object(i["toDisplayString"])(this.$f.formatDate(t.time,"MM-DD HH:mm:ss")),1)])])],8,Gl))),128))]),Object(i["withDirectives"])(Object(i["createVNode"])(c,{description:e.$t("empty"),image:e.emptyNoDataLight,class:"empty"},null,8,["description","image"]),[[i["vShow"],(n.tableList&&0===n.tableList.length||!n.tableList)&&!n.loading]])])}var ar={name:"LiquidityHistory",props:{tableList:Array,loading:Boolean},methods:{formatTokenSymbol(e,t,o){let i=this.$f.formatChainInfo(t);return e===(null===i||void 0===i?void 0:i.wmainWrapper)?null===i||void 0===i?void 0:i.mainName:o}}};o("c638");const lr=Nt()(ar,[["render",sr],["__scopeId","data-v-58206826"]]);var rr=lr,cr=o("f325"),dr=o("4128"),mr=o.n(dr),ur=o("8b19"),hr=o("64b9");async function br(e){const t=await ti["e"].getAccountInfo(new hr["e"](e));if(null===t)throw Error(" get id info error ");const o=cr["f"].decode(t.data),i=o.marketId,n=await ti["e"].getAccountInfo(i);if(null===n)throw Error(" get market info error");const s=cr["j"].decode(n.data),a=o.lpMint,l=await ti["e"].getAccountInfo(a);if(null===l)throw Error(" get lp mint info error");const r=cr["p"].decode(l.data);return{id:e,baseMint:o.baseMint.toString(),quoteMint:o.quoteMint.toString(),lpMint:o.lpMint.toString(),baseDecimals:o.baseDecimal.toNumber(),quoteDecimals:o.quoteDecimal.toNumber(),lpDecimals:r.decimals,version:4,programId:t.owner.toString(),authority:cr["h"].getAssociatedAuthority({programId:t.owner}).publicKey.toString(),openOrders:o.openOrders.toString(),targetOrders:o.targetOrders.toString(),baseVault:o.baseVault.toString(),quoteVault:o.quoteVault.toString(),withdrawQueue:o.withdrawQueue.toString(),lpVault:o.lpVault.toString(),marketVersion:3,marketProgramId:o.marketProgramId.toString(),marketId:o.marketId.toString(),marketAuthority:cr["k"].getAssociatedAuthority({programId:o.marketProgramId,marketId:o.marketId}).publicKey.toString(),marketBaseVault:s.baseVault.toString(),marketQuoteVault:s.quoteVault.toString(),marketBids:s.bids.toString(),marketAsks:s.asks.toString(),marketEventQueue:s.eventQueue.toString(),lookupTableAccount:hr["e"].default.toString()}}var pr=o("3bd4");async function vr(e){var t,o,i,n,s,a,l,r,c,d;let{token0:m,token1:u}=e,h=await Object(Ot["L"])(m,u,"solana");if(console.log("poolInfos",h),null===h||void 0===h||!h[0])throw new Error("cannot find pool");let b=h[0];console.log("poolInfo",b);let p=b.pair;const v=await br(p);if(!v)throw new Error("cannot find the target pool");const g=Object(cr["z"])(v);console.log("will add liquidity poolKeys",g);const f=await cr["h"].fetchInfo({connection:ti["e"],poolKeys:g});console.log("will add liquidity extraPoolInfo",f);let k={pair:v.lpMint,factory_address:"",router_address:"",token0:m,token1:u,reserve0:m===v.baseMint?null===f||void 0===f||null===(t=f.baseReserve)||void 0===t||null===(o=t.toString)||void 0===o?void 0:o.call(t):null===f||void 0===f||null===(i=f.quoteReserve)||void 0===i||null===(n=i.toString)||void 0===n?void 0:n.call(i),reserve1:u===v.baseMint?null===f||void 0===f||null===(s=f.baseReserve)||void 0===s||null===(a=s.toString)||void 0===a?void 0:a.call(s):null===f||void 0===f||null===(l=f.quoteReserve)||void 0===l||null===(r=l.toString)||void 0===r?void 0:r.call(l),totalSupply:null===f||void 0===f||null===(c=f.lpSupply)||void 0===c||null===(d=c.toString)||void 0===d?void 0:d.call(c),decimals:v.lpDecimals};return{poolKeys:g,targetPoolInfo:v,extraPoolInfo:f,poolInfo:b,reserves:k}}async function gr(e){var t,o,i,n,s,a,l,r,c,d,m,u,h,b,p;let{token0:v,token1:g,amount0:f,amount1:k,slippage:O,targetPoolInfo:j,extraPoolInfo:w,poolInfo:T}=e,y=[v,g].includes(null===(t=T)||void 0===t?void 0:t.token0_address)&&[v,g].includes(null===(o=T)||void 0===o?void 0:o.token1_address);if(null===(i=T)||void 0===i||!i.pair||!y){let e=await Object(Ot["L"])(v,g,"solana");if(null===e||void 0===e||!e[0])throw new Error("cannot find pool");T=e[0]}let S=T.pair,N=new cr["r"](cr["q"],new hr["e"](v),v===T.token0_address?T.token0_decimal:T.token1_decimal,v===T.token0_address?T.token0_symbol:T.token1_symbol,v===T.token0_address?T.token0_symbol:T.token1_symbol),V=new cr["r"](cr["q"],new hr["e"](g),g===T.token0_address?T.token0_decimal:T.token1_decimal,g===T.token0_address?T.token0_symbol:T.token1_symbol,g===T.token0_address?T.token0_symbol:T.token1_symbol),x=new Qo.a(f||k||0),E={},_={};k&&!f?(E=V,_=N):(E=N,_=V),O=new cr["l"](100*Number(O||1),1e4);let $=new cr["s"](E,x.times(10**E.decimals).toFixed(0)),B={baseToken:E,quoteToken:_,targetPool:S,inputTokenAmount:$,slippage:O};if(j&&(null===(n=j)||void 0===n?void 0:n.id)===B.targetPool||(j=await br(B.targetPool)),!j)throw new Error("cannot find the target pool");console.log("will add liquidity params",B);const A=Object(cr["z"])(j);w&&(null===(s=j)||void 0===s?void 0:s.id)===B.targetPool||(w=await cr["h"].fetchInfo({connection:ti["e"],poolKeys:A}));const{maxAnotherAmount:C,anotherAmount:D,liquidity:I}=cr["h"].computeAnotherAmount({poolKeys:A,poolInfo:{...j,...w},amount:B.inputTokenAmount,anotherCurrency:B.quoteToken,slippage:B.slippage});let L={pair:j.lpMint,factory_address:"",router_address:"",token0:v,token1:g,reserve0:v===j.baseMint?null===(a=w)||void 0===a||null===(a=a.baseReserve)||void 0===a||null===(l=a.toFixed)||void 0===l?void 0:l.call(a):null===(r=w)||void 0===r||null===(r=r.quoteReserve)||void 0===r||null===(c=r.toFixed)||void 0===c?void 0:c.call(r),reserve1:g===j.baseMint?null===(d=w)||void 0===d||null===(d=d.baseReserve)||void 0===d||null===(m=d.toFixed)||void 0===m?void 0:m.call(d):null===(u=w)||void 0===u||null===(u=u.quoteReserve)||void 0===u||null===(h=u.toFixed)||void 0===h?void 0:h.call(u),totalSupply:null===(b=w)||void 0===b||null===(b=b.lpSupply)||void 0===b||null===(p=b.toFixed)||void 0===p?void 0:p.call(b),decimals:j.lpDecimals};return console.log("will add liquidity info",{poolKeys:A,liquidity:I.toString(),liquidityD:new mr.a(I.toString()).div(10**w.lpDecimals).toString(),maxAnotherAmount:C,anotherAmount:D,inputTokenAmount:B.inputTokenAmount,targetPoolInfo:j,extraPoolInfo:w,poolInfo:T,reserves:L}),{poolKeys:A,liquidity:I.toString(),liquidityD:new mr.a(I.toString()).div(10**w.lpDecimals).toString(),maxAnotherAmount:C,anotherAmount:D,inputTokenAmount:B.inputTokenAmount,targetPoolInfo:j,extraPoolInfo:w,poolInfo:T,reserves:L}}async function fr(e,t=Ko["a"].state.currentAccount){console.log("will add liquidity",e);let{poolKeys:o,maxAnotherAmount:i,inputTokenAmount:n}=e,s=new hr["e"](t),a=await Object(pr["b"])(ti["e"],s);const{innerTransactions:l}=await cr["h"].makeAddLiquidityInstructionSimple({connection:ti["e"],poolKeys:o,userKeys:{owner:s,payer:s,tokenAccounts:a},amountInA:n,amountInB:i,fixedSide:"a",makeTxVersion:ur["e"]});console.log("innerTransactions",l);let r=await Object(pr["a"])(l);console.log("transaction",r);let c=null===r||void 0===r?void 0:r[0];return Object(ti["b"])(c).then(async e=>({hash:e,wait:()=>Object(ti["c"])(e)}))}function kr(e){return new Promise(t=>{setTimeout(t,e)})}var Or={name:"BridgeLiquidity",components:{SelectToken:dl,SelectSwap:Sl,Slippage:Rl,LPHistory:rr},data(){return{utils:jt["utils"],ZERO_ADDRESS:ft["m"],swaps:[],swap:{chain:"",name:"",show_name:"",factory_address:"",router_address:""},amount0:"",amount1:"",token0:{address:"",chain:"",logo_url:""},token1:{address:"",chain:"",logo_url:""},reserves:{},userBalanceTokens:[],tokenList:[],loading0:!1,loading1:!1,confirmSubmitVisible:!1,confirmTxVisible:!1,transaction:"",slippage:.5,loadingSubmit:!1,historyList:[],loadingHistory:!1,solanaLiquidityInfo:{},lastLp:["",""]}},computed:{chain(){return this.$store.getters.netId},walletAddress(){return this.$store.state.currentAccount},isApprove0(){var e;if("solana"===this.chain)return!0;let t=jt["utils"].parseUnits(this.amount0||"0",this.token0.decimals||0);return Wo["a"].from((null===(e=this.token0)||void 0===e?void 0:e.allowance)||"0").gte(t)},isApprove1(){var e;if("solana"===this.chain)return!0;let t=jt["utils"].parseUnits(this.amount1||"0",this.token1.decimals||0);return Wo["a"].from((null===(e=this.token1)||void 0===e?void 0:e.allowance)||"0").gte(t)},userTokens(){var e,t;let o=[...null===(e=this.userBalanceTokens.slice())||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,e=>!e.isWrapped)],i=this.tokenList,n=i.slice().filter(e=>o.every(t=>t.id!==e.id)&&!("solana"===e.chain&&"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"===e.token));return i.slice().forEach(e=>{let t=o.find(t=>t.id===e.id);t&&(t.logo_url=e.logo_url)}),o=o.concat(n),o.length>0?o:i.slice()},routerAddress(){return this.swap.router_address},tips(){return this.reserves.pair===ft["m"]?this.$t("createLpTip"):this.$t("addLpTip")},error(){var e,t;let o=this.token0,i=this.token1,n=this.reserves;if(null!==o&&void 0!==o&&o.address&&(null===o||void 0===o||null===(e=o.address)||void 0===e?void 0:e.toLowerCase())===(null===i||void 0===i||null===(t=i.address)||void 0===t?void 0:t.toLowerCase()))return 4;if(""===this.amount0||""===this.amount1)return n.pair===ft["m"]?1:2;let s=new Qo.a(this.amount0||0),a=new Qo.a(o.balance||0),l=new Qo.a(this.amount1||0),r=new Qo.a(i.balance||0);return s.gt(a)||l.gt(r)?3:n.pair===ft["m"]?-1:0},errorMessage(){let e={0:this.$t("add"),"-1":this.$t("create"),1:this.$t("create"),2:this.$t("add"),3:this.$t("insufficientBalance1"),4:this.$t("twoTokenCannotBeSame")};return e[this.error]||""},lpAmount(){var e;return""===this.amount0||""===this.amount1?"0":"0"===this.reserves.reserve0||"1"===this.reserves.reserve0?"-":jt["utils"].formatUnits(new Qo.a(this.amount0||0).times(new Qo.a(10).exponentiatedBy((null===(e=this.token0)||void 0===e?void 0:e.decimals)||0)).times(this.reserves.totalSupply||0).div(this.reserves.reserve0||1).toFixed(0),this.reserves.decimals||0)},disabled(){var e,t;return!this.isApprove0||!this.isApprove1||""===this.walletAddress||""===this.token0.address||void 0===this.token0.address||""===this.token1.address||void 0===this.token1.address||this.error>0||(null===(e=this.token0)||void 0===e||null===(e=e.address)||void 0===e?void 0:e.toLowerCase())===(null===(t=this.token1)||void 0===t||null===(t=t.address)||void 0===t?void 0:t.toLowerCase())}},methods:{openBrowser:Hn["openBrowser"],init(){var e,t,o;"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(e=e.trustwallet)&&void 0!==e&&e.solana&&(null===(t=window.ethereum)||void 0===t||null===(t=t.address)||void 0===t||null===(o=t.startsWith)||void 0===o||!o.call(t,"0x"))&&window.ethereum.address)?Object(ti["d"])().then(e=>{console.log("currentAccount",this.$store.state.currentAccount),this.initLP(),this._getUserTokenList(),this._getTokenList(),this.getToken0Balance(),this.getToken1Balance(),this._getReserves(),this._getChainSwaps(),this._getUserLpHistory(),this.$f.setSwapSendType("")}):(this.initLP(),this._getUserTokenList(),this._getTokenList(),this.getToken0Balance(),this.getToken1Balance(),this._getReserves(),this._getChainSwaps(),this._getUserLpHistory(),this.$f.setSwapSendType(""))},handleSelectSwap(e){this.swap=e,this.amount0="",this.amount1="",this.getToken0Balance(),this.getToken1Balance(),this._getReserves(),sessionStorage.LP_swap=JSON.stringify(e)},initLP(){let e=this.$route.query,t=this.$route.query.chain,o=this.chain||this.$store.getters.netId;if(!o||!t||o===t){if(o&&o===t){let t=e.swap?Object(Hn["formatSwapInfo"])(o,e.swap):null;this.token0={address:e.token0||"",chain:o||""},this.token1={address:e.token1||"",chain:o||""},this.swap={chain:o||"",name:e.swap||"",show_name:(null===t||void 0===t?void 0:t.show_name)||"",factory_address:(null===t||void 0===t?void 0:t.factory_address)||"",router_address:(null===t||void 0===t?void 0:t.router_address)||""}}if(!e.swap||o!==t){let e=sessionStorage.LP_swap?JSON.parse(sessionStorage.LP_swap):null;!this.swap.name&&e&&o===e.chain&&(this.swap=e)}if(!e.token0||o!==t){let e=sessionStorage.LP_token0?JSON.parse(sessionStorage.LP_token0):null;!this.token0.address&&e&&o===e.chain&&(this.token0=e)}if(!e.token1||o!==t){let e=sessionStorage.LP_token1?JSON.parse(sessionStorage.LP_token1):null;!this.token1.address&&e&&o===e.chain&&(this.token1=e)}}},handleSelectToken0(e){this.token0=e,this.amount0="",this.getToken0Balance(),this._getReserves()},handleSelectToken1(e){this.token1=e,this.amount1="",this.getToken1Balance(),this._getReserves()},_getChainSwaps(){var e,t;Object(Ot["D"])((null===(e=this.token0)||void 0===e?void 0:e.chain)||(null===(t=this.token1)||void 0===t?void 0:t.chain)||this.chain||"bsc").then(e=>{this.swaps=e||[]})},watchAmount0(){if("solana"===this.chain){var e,t,o;if(this.token0.address&&this.token1.address&&this.amount0&&!Number.isNaN(this.amount0)&&0!==Number(this.amount0))gr({token0:this.token0.address,token1:this.token1.address,amount0:this.amount0,slippage:this.slippage,targetPoolInfo:null===(e=this.solanaLiquidityInfo)||void 0===e?void 0:e.targetPoolInfo,extraPoolInfo:null===(t=this.solanaLiquidityInfo)||void 0===t?void 0:t.extraPoolInfo,poolInfo:null===(o=this.solanaLiquidityInfo)||void 0===o?void 0:o.poolInfo}).then(e=>{var t,o;this.amount1=null===e||void 0===e||null===(t=e.anotherAmount)||void 0===t||null===(t=t.toFixed())||void 0===t||null===(o=t.replace)||void 0===o?void 0:o.call(t,/\.0$/,""),this.solanaLiquidityInfo=e}).catch(e=>{console.log(e),this.solanaLiquidityInfo={},Object(Hn["handleError"])(e)});else this.amount1="";return}let i=this.reserves;if("0"!==i.reserve0&&"0"!==i.reserve1)if(i.reserve0&&i.reserve1&&this.amount0&&!Number.isNaN(this.amount0)&&0!==Number(this.amount0)){var n,s,a,l;let e=new Qo.a(i.reserve0),t=new Qo.a(i.reserve1),o=Number(null===(n=this.token0)||void 0===n?void 0:n.decimals)||0,r=Number(null===(s=this.token1)||void 0===s?void 0:s.decimals)||0,c=new Qo.a(this.amount0);this.amount1=null===(a=jt["utils"].formatUnits(t.times(c).times(10**o).div(e).toFixed(0),r))||void 0===a||null===(l=a.replace)||void 0===l?void 0:l.call(a,/\.0$/,"")}else this.amount1=""},watchAmount1(){if("solana"===this.chain){var e,t,o;if(this.token0.address&&this.token1.address&&this.amount1&&!Number.isNaN(this.amount1)&&0!==Number(this.amount1))gr({token0:this.token0.address,token1:this.token1.address,amount1:this.amount1,slippage:this.slippage,targetPoolInfo:null===(e=this.solanaLiquidityInfo)||void 0===e?void 0:e.targetPoolInfo,extraPoolInfo:null===(t=this.solanaLiquidityInfo)||void 0===t?void 0:t.extraPoolInfo,poolInfo:null===(o=this.solanaLiquidityInfo)||void 0===o?void 0:o.poolInfo}).then(e=>{var t,o;this.amount1&&!Number.isNaN(this.amount1)&&0!==Number(this.amount1)?this.amount0=null===e||void 0===e||null===(t=e.anotherAmount)||void 0===t||null===(t=t.toFixed())||void 0===t||null===(o=t.replace)||void 0===o?void 0:o.call(t,/\.0$/,""):this.amount0="";this.solanaLiquidityInfo=e}).catch(e=>{console.log(e),this.solanaLiquidityInfo={},Object(Hn["handleError"])(e)});else this.amount0="";return}let i=this.reserves;if("0"!==i.reserve0&&"0"!==i.reserve1)if(i.reserve0&&i.reserve1&&this.amount1&&!Number.isNaN(this.amount1)&&0!==Number(this.amount1)){var n,s,a;let e=new Qo.a(i.reserve0),t=new Qo.a(i.reserve1),o=Number(null===(n=this.token0)||void 0===n?void 0:n.decimals)||0,l=Number(null===(s=this.token1)||void 0===s?void 0:s.decimals)||0,r=new Qo.a(this.amount1);this.amount0=null===jt["utils"]||void 0===jt["utils"]||null===(a=jt["utils"].formatUnits)||void 0===a?void 0:a.call(jt["utils"],e.times(r).times(10**l).div(t).toFixed(0),o)}else this.amount0=""},handleMax0(){if(this.token0.address===ft["k"]||"So11111111111111111111111111111111111111112"===this.token0.address){let e=new Qo.a(this.token0.balance||this.token0.value||0).minus(.01);this.amount0=e.lte(0)?"0":e.toFixed()}else this.amount0=this.token0.balance||this.token0.value?new Qo.a(this.token0.balance||this.token0.value||0).toFixed():"";this.watchAmount0()},handleMax1(){if(this.token1.address===ft["k"]||"So11111111111111111111111111111111111111112"===this.token1.address){let e=new Qo.a(this.token1.balance||this.token1.value||0).minus(.01);this.amount1=e.lte(0)?"0":e.toFixed()}else this.amount1=this.token1.balance||this.token1.value?new Qo.a(this.token1.balance||this.token1.value||0).toFixed():"";this.watchAmount1()},_getUserTokenList(){let e=this.chain;Object(Ot["qb"])().then(t=>{var o,i,n;"solana"===e?this.userBalanceTokens=null===t||void 0===t?void 0:t.map(e=>({...e,value:e.balance})):this.userBalanceTokens=null===(o=(null===t||void 0===t||null===(i=t.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token})))||void 0===i||null===(n=i.filter)||void 0===n?void 0:n.call(i,e=>(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag))||[])||void 0===o?void 0:o.filter(e=>!!Number(e.value));this.userBalanceTokens.length>0&&"tron"!==e&&"brc20"!==e&&"solana"!==e&&/^0x[0-9a-zA-Z]{40}$/.test(this.$store.state.currentAccount)&&Object(Ot["t"])(this.userBalanceTokens.map(e=>e.token||""),e).then(e=>{var t,o;this.userBalanceTokens=null===(t=this.userBalanceTokens)||void 0===t||null===(o=t.map)||void 0===o||null===(o=o.call(t,(t,o)=>({...t,value:jt["utils"].formatUnits(e[o],t.decimals||0)})))||void 0===o?void 0:o.filter(e=>!!Number(e.value))})})},_getTokenList(){Object(Ot["kb"])(this.chain||"bsc").then(e=>{this.tokenList=(null===e||void 0===e?void 0:e.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token})))||[]})},getToken0Balance(){var e,t;Object(Ot["N"])((null===(e=this.token0)||void 0===e?void 0:e.address)||"",this.routerAddress,(null===(t=this.token0)||void 0===t?void 0:t.chain)||this.chain,this.walletAddress).then(e=>{this.token0={...this.token0,...e},sessionStorage.LP_token0=JSON.stringify(this.token0)})},getToken1Balance(){var e,t;Object(Ot["N"])((null===(e=this.token1)||void 0===e?void 0:e.address)||"",this.routerAddress,(null===(t=this.token1)||void 0===t?void 0:t.chain)||this.chain,this.walletAddress).then(e=>{this.token1={...this.token1,...e},sessionStorage.LP_token1=JSON.stringify(this.token1)})},async _getReserves(e){let t=this.token0,o=this.token1,i=this.routerAddress,n=this.chain;if("solana"===n&&null!==t&&void 0!==t&&t.address&&null!==o&&void 0!==o&&o.address)return console.log(null===t||void 0===t?void 0:t.address,null===o||void 0===o?void 0:o.address),this.lastLp[0]===(null===t||void 0===t?void 0:t.address)&&this.lastLp[1]===(null===o||void 0===o?void 0:o.address)?(await kr(1e3),void this._getReserves()):(this.lastLp=[null===t||void 0===t?void 0:t.address,null===o||void 0===o?void 0:o.address],void vr({token0:null===t||void 0===t?void 0:t.address,token1:null===o||void 0===o?void 0:o.address}).then(e=>{this.solanaLiquidityInfo=e,this.reserves=e.reserves,console.log(e)}).catch(e=>{console.log(e),this.solanaLiquidityInfo={},this.reserves={}}).finally(()=>{this.lastLp=["",""]}));t.address&&o.address&&i&&t.address!==o.address&&Object(Ot["V"])(t.address,o.address,i,(null===t||void 0===t?void 0:t.chain)||(null===o||void 0===o?void 0:o.chain)||n||"bsc").then(i=>{if(this.reserves=i,"0"!==this.reserves.reserve0&&"0"!==this.reserves.reserve0&&(this.amount0?this.watchAmount0():this.amount1&&this.watchAmount1()),this.reserves.pair===ft["m"]){let e=`${t.address}-${t.chain}`,i=`${o.address}-${o.chain}`;Object(Ot["mb"])([e,i]).then(t=>{let o=t[e],n=t[i];this.token0={...this.token0,current_price_usd:o.current_price_usd},this.token1={...this.token1,current_price_usd:n.current_price_usd}})}e&&e()})},_approve0(){var e;this.loading0=!0,Object(Ot["i"])((null===(e=this.token0)||void 0===e?void 0:e.address)||"",this.routerAddress).then(e=>e.wait()).then(e=>{console.log(e),this.$notify({type:"success",message:this.$t("approveSuccess")}),this.getToken0Balance()}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loading0=!1})},_approve1(){var e;this.loading1=!0,Object(Ot["i"])((null===(e=this.token1)||void 0===e?void 0:e.address)||"",this.routerAddress).then(e=>e.wait()).then(e=>{console.log(e),this.$notify({type:"success",message:this.$t("approveSuccess")}),this.getToken1Balance()}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loading1=!1})},_addLiquidity(){var e,t,o,i;let n=jt["utils"].parseUnits(this.amount0||"0",this.token0.decimals||0).toString(),s=jt["utils"].parseUnits(this.amount1||"0",this.token1.decimals||0).toString();this.loadingSubmit=!0,"solana"!==this.chain?(this.$f.setSwapSendType("protect"),Object(Ot["e"])({token0:(null===(e=this.token0)||void 0===e?void 0:e.address)||"",token1:(null===(t=this.token1)||void 0===t?void 0:t.address)||"",amount0:n,amount1:s,slippage:this.slippage,router:this.routerAddress},(null===(o=this.token0)||void 0===o?void 0:o.chain)||(null===(i=this.token1)||void 0===i?void 0:i.chain)||this.chain).then(e=>(this.transaction=e.hash,""!==this.transaction&&(this.confirmSubmitVisible=!1,this.confirmTxVisible=!0),e.wait())).then(e=>{console.log(e),this.amount0="",this.amount1="",this.getToken0Balance(),this.getToken1Balance(),this._getReserves(this._updateUserLp),this._getUserTokenList(),this._getUserLpHistory(),this.$notify({type:"success",message:this.$t("addLqSuccess")})}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingSubmit=!1,this.$f.setSwapSendType("")})):fr(this.solanaLiquidityInfo).then(e=>(this.transaction=e.hash,""!==this.transaction&&(this.confirmSubmitVisible=!1,this.confirmTxVisible=!0),e.wait())).then(e=>{var t,o,i;console.log(e),Object(ti["g"])({hash:this.transaction,token0:null===(t=this.token0)||void 0===t?void 0:t.address,token1:null===(o=this.token1)||void 0===o?void 0:o.address,lpToken:null===(i=this.solanaLiquidityInfo)||void 0===i||null===(i=i.targetPoolInfo)||void 0===i?void 0:i.lpMint,parsedTransaction:e}),this.amount0="",this.amount1="",this.getToken0Balance(),this.getToken1Balance(),this._getReserves(),this._getUserTokenList(),this.$notify({type:"success",message:this.$t("addLqSuccess")})}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingSubmit=!1,this.$f.setSwapSendType("")})},_updateUserLp(){var e,t;this.reserves.pair&&this.reserves.pair!==ft["m"]&&Object(Ot["Kb"])(this.reserves.pair,(null===(e=this.token0)||void 0===e?void 0:e.chain)||(null===(t=this.token1)||void 0===t?void 0:t.chain)||this.chain)},_getUserLpHistory(){let e=this.$store.getters.netId,t=this.$store.state.currentAccount;this.loadingHistory=!0,Object(Ot["pb"])(e,t).then(e=>{this.historyList=e||[]}).catch(e=>{console.log(e),this.$f.handleError(e)}).finally(()=>{this.loadingHistory=!1})},goMyLiquidity(){var e,t,o;let i=((null===(e=this.globalConfig)||void 0===e?void 0:e.lp_url)||"https://m.jfliquidity.xyz/add").replace("/add","");if(null!==(t=window)&&void 0!==t&&null!==(t=t.WKWebViewJavascriptBridge)&&void 0!==t&&t.callHandler)location.href=i;else if(null!==(o=window)&&void 0!==o&&null!==(o=o._tw_)&&void 0!==o&&o.openLp){var n;null===(n=window)||void 0===n||null===(n=n._tw_)||void 0===n||n.openLp("","","my_lp")}else location.href=i}}};o("b56d");const jr=Nt()(Or,[["render",qa],["__scopeId","data-v-44624085"]]);var wr=jr,Tr={name:"Bridge",components:{RebateImg:r["a"],SwapBridge:hi,Limit:os,Liquidity:wr},setup(){let e=Object(Go["useStorage"])("bridge_tabActive","swap",sessionStorage),t=Object(Go["useStorage"])("ave_globalConfig",{},localStorage);return{tabActive:e,globalConfig:t}},data(){return{caches:{swap:!1,limit:!1,liquidity:!1}}},computed:{tabs(){return[{name:this.$t("swapOrBridge"),value:"swap"},{name:this.$t("limit"),value:"limit"},{name:this.$t("pool"),value:"liquidity"}]}},watch:{tabActive(){this.init()},"$route.name"(e,t){"Bridge"!==e&&e!==t&&(this.caches={swap:!1,limit:!1,liquidity:!1})}},activated(){this.init()},methods:{init(){"swap"===this.tabActive?this.caches.swap||(this.$refs.swapBridge.init(),this.caches.swap=!0):"limit"===this.tabActive?this.caches.limit||(this.$refs.limitBridge.init(),this.caches.limit=!0):"liquidity"===this.tabActive&&(this.caches.liquidity||(this.$refs.liquidityBridge.init(),this.caches.liquidity=!0))},handleTab(e){this.tabActive=e.value},goLiquidity(){var e;if(null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.openLp){var t;null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||t.openLp("","","")}else{var o;let e=(null===(o=this.globalConfig)||void 0===o?void 0:o.lp_url)||"https://m.jfliquidity.xyz/add";this.$f.appOpenWebPage(e)}}}};o("6676");const yr=Nt()(Tr,[["render",l],["__scopeId","data-v-3642a5cf"]]);t["default"]=yr},"0885":function(e,t,o){"use strict";o("d40b")},"0dda":function(e,t,o){"use strict";o("d2cd")},"0e64":function(e,t,o){},"0e93":function(e,t,o){},"1e3d":function(e,t,o){"use strict";o("a113")},24500:function(e,t,o){},"26d9":function(e,t,o){"use strict";o("cffb")},"2b92":function(e,t,o){"use strict";o("ca58")},"2bd0":function(e,t,o){"use strict";o("7f8b")},"2c74":function(e,t,o){},"2dd5":function(e,t,o){"use strict";o("2c74")},3731:function(e,t,o){"use strict";o("f898")},3963:function(e,t,o){},"3d41":function(e,t,o){},"3dfd":function(e,t,o){},"3ee7":function(e,t,o){"use strict";o("3d41")},"431d":function(e,t,o){},"449c":function(e,t,o){"use strict";var i=o("7a23");const n=e=>(Object(i["pushScopeId"])("data-v-0301828e"),e=e(),Object(i["popScopeId"])(),e),s=n(()=>Object(i["createElementVNode"])("use",{"xlink:href":"#icon-slippage"},null,-1)),a=[s],l={class:"popup-title"},r={class:"slippage-label"},c=n(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),d={style:{width:"100%"}},m={class:"radio-group"},u={key:0,style:{flex:"1"}},h=["id","value","disabled"],b=["for"],p={class:"slippage-input"},v=n(()=>Object(i["createElementVNode"])("span",null,"%",-1)),g={key:0,class:"flex justify-between items-center mt-15 color-333"},f={class:"flex flex-col justify-center text-14px flex-1"},k={class:"text-12px mt-3px color-#FF9E19"},O={class:"form-submit"};function j(e,t,o,n,s,j){const w=Object(i["resolveComponent"])("van-checkbox"),T=Object(i["resolveComponent"])("van-field"),y=Object(i["resolveComponent"])("van-switch"),S=Object(i["resolveComponent"])("van-button"),N=Object(i["resolveComponent"])("van-form"),V=Object(i["resolveComponent"])("van-popup");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[0===o.icon?(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{key:0,class:"icon-svg icon-slippage","aria-hidden":"true",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>s.slippageVisible=!0,["stop"]))},a)):1===o.icon?(Object(i["openBlock"])(),Object(i["createElementBlock"])("i",{key:1,class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[1]||(t[1]=Object(i["withModifiers"])(e=>s.slippageVisible=!0,["stop"]))})):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(V,{show:s.slippageVisible,"onUpdate:show":t[8]||(t[8]=e=>s.slippageVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("h3",l,Object(i["toDisplayString"])(e.$t("setSlippage")),1),Object(i["createVNode"])(N,{class:"popup-content",onSubmit:j.confirmSubmit},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",r,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("slippage")),1),Object(i["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[2]||(t[2]=Object(i["withModifiers"])((...e)=>j.openSlippageTips&&j.openSlippageTips(...e),["stop"])),style:{"font-size":"0.38rem","margin-left":"0.05rem",color:"#558BED"}}),c,o.isAutoSlippage?(Object(i["openBlock"])(),Object(i["createBlock"])(w,{key:0,modelValue:s.autoSlippage,"onUpdate:modelValue":t[3]||(t[3]=e=>s.autoSlippage=e)},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("autoSlippage")),1)]),_:1},8,["modelValue"])):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])(T,{name:"slippage",modelValue:s.slippageValue,"onUpdate:modelValue":t[6]||(t[6]=e=>s.slippageValue=e),disabled:s.autoSlippage,label:"",style:{"--van-cell-horizontal-padding":"0"},rules:[{required:!0,message:this.$t("enterSlippage")},{validator:j.validator,message:this.$t("slippageMaxTip")}],border:!1},{input:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",d,[Object(i["createElementVNode"])("div",m,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(o.slippageList,(e,o)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:o},[0!==o?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",u)):Object(i["createCommentVNode"])("",!0),Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{type:"radio",id:"radio-"+e,"onUpdate:modelValue":t[4]||(t[4]=e=>s.slippageValue=e),value:e,class:"radio-input",disabled:s.autoSlippage},null,8,h),[[i["vModelRadio"],s.slippageValue]]),Object(i["createElementVNode"])("label",{for:"radio-"+e,class:"radio-item"},Object(i["toDisplayString"])(e)+"%",9,b)],64))),128))]),Object(i["createElementVNode"])("div",p,[Object(i["createVNode"])(T,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",modelValue:s.slippageValue,"onUpdate:modelValue":t[5]||(t[5]=e=>s.slippageValue=e),disabled:s.autoSlippage,onBlur:j.handleBlur,clearable:""},null,8,["modelValue","disabled","onBlur"]),v])])]),_:1},8,["modelValue","disabled","rules"]),o.isProtection?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",g,[Object(i["createElementVNode"])("div",f,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("protection")),1),Object(i["createElementVNode"])("span",k,Object(i["toDisplayString"])(e.$t("protectionTip")),1)]),Object(i["createVNode"])(y,{modelValue:s.protection,"onUpdate:modelValue":t[7]||(t[7]=e=>s.protection=e),size:"0.4rem","inactive-color":"#BFBFBF","active-color":"#558BED"},null,8,["modelValue"])])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",O,[Object(i["createVNode"])(S,{class:"btn",block:"",round:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("confirm1")),1)]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["show"])],64)}var w={name:"slippageButton",props:{slippage:{type:String,default:"2"},slippageList:{type:Array,default:()=>["0.5","1","2"]},min:{type:Number,default:0},icon:{type:Number,default:0},isAutoSlippage:{type:Boolean,default:!1},initAutoSlippage:{type:Boolean,default:!0},isProtection:{type:Boolean,default:!1},initProtection:{type:Boolean,default:!1}},emits:["update:slippage","onSubmit"],data(){return{slippageVisible:!1,slippageValue:this.slippage||"1",autoSlippage:this.initAutoSlippage,protection:this.initProtection||!1}},watch:{slippageVisible(e){var t,o;e&&(this.slippageValue=this.slippage||"1",this.isAutoSlippage?this.autoSlippage=this.initAutoSlippage:this.autoSlippage=!1),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)}},methods:{confirmSubmit(){this.slippageVisible&&Number(this.slippageValue)<this.min&&(this.slippageValue=this.min),this.$emit("update:slippage",this.slippageValue),this.$emit("onSubmit",{slippage:this.slippageValue,autoSlippage:this.autoSlippage,protection:this.protection}),this.slippageVisible=!1},openSlippageTips(){this.$dialog.alert({title:this.$t("slippage"),message:this.$t("slippageTips"),confirmButtonText:this.$t("iKnown"),confirmButtonColor:"#558BED",messageAlign:"left"}).then(()=>{})},handleBlur(){this.slippageVisible&&Number(this.slippageValue)<0&&(this.slippageValue=0),this.slippageVisible&&Number(this.slippageValue)<this.min&&(this.slippageValue=this.min)},validator(e){return Number(e)<=49.99}}},T=(o("6d9f"),o("6b0d")),y=o.n(T);const S=y()(w,[["render",j],["__scopeId","data-v-0301828e"]]);t["a"]=S},"497e":function(e,t,o){"use strict";var i=o("7a23"),n=o("335a"),s=o("7f08"),a=o("4360");const l=["onClick"],r={class:"rebate-bg"},c={class:"rebate-bg fastTrade"};var d={setup(e){var t,d,m,u,h,b,p,v;const g=o("ddc3");let f=null===(t=(null===(m=window)||void 0===m?void 0:m.main)||(null===(u=window)||void 0===u?void 0:u._tw_)||{})||void 0===t||null===(d=t.appGetPlatform)||void 0===d?void 0:d.call(t),k=null===(h=(null===(p=window)||void 0===p?void 0:p.main)||(null===(v=window)||void 0===v?void 0:v._tw_)||{})||void 0===h||null===(b=h.getAppVersionCode)||void 0===b?void 0:b.call(h),O=Object(i["computed"])(()=>{let e=window.navigator.userAgent;return!!e.includes("OSType/2")||"android"===f&&k>104}),j=Object(i["computed"])(()=>{var e,t;let o=window.navigator.userAgent,i=a["a"].getters.netId;if(o.includes("OSType/2")){var n,s;let e=o.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),t=g.gte(e,"2.3.0");return(null===(n=(s=["eth","bsc"]).includes)||void 0===n?void 0:n.call(s,i))&&t}let l="android"===f&&k>112;return(null===(e=(t=["eth","bsc"]).includes)||void 0===e?void 0:e.call(t,i))&&l});function w(){var e;let t=(null===(e=n["a"].get("ave_globalConfig",{}))||void 0===e?void 0:e.inviter_url)||"https://avedataxyz1.github.io";Object(s["appOpenWebPage"])(t)}return(e,t)=>{const o=Object(i["resolveComponent"])("van-swipe-item"),n=Object(i["resolveComponent"])("van-swipe");return Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createBlock"])(n,{class:"rebate-swipe",autoplay:3e3,"lazy-render":"","show-indicators":!1},{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(o,null,{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",{class:"rebate-container clickable",onClick:Object(i["withModifiers"])(w,["stop"])},[Object(i["createElementVNode"])("div",r,Object(i["toDisplayString"])(e.$t("rebateTips")),1)],8,l)]),_:1}),Object(i["unref"])(j)?(Object(i["openBlock"])(),Object(i["createBlock"])(o,{key:0},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",{class:"rebate-container",onClick:t[0]||(t[0]=Object(i["withModifiers"])(()=>{},["stop"]))},[Object(i["createElementVNode"])("div",c,Object(i["toDisplayString"])(e.$t("fastTradeTips")),1)])]),_:1})):Object(i["createCommentVNode"])("",!0)]),_:1},512)),[[i["vShow"],Object(i["unref"])(O)]])}}},m=(o("2dd5"),o("6b0d")),u=o.n(m);const h=u()(d,[["__scopeId","data-v-cfb9e7fe"]]);t["a"]=h},"57c9":function(e,t,o){"use strict";var i=o("7a23"),n=o("afd7"),s=o.n(n);const a={class:"tx-li-item_1"},l={style:{display:"flex","align-items":"center","justify-content":"left","min-width":"42%"}},r={style:{display:"flex","align-items":"center",flex:"1","justify-content":"center","overflow-x":"hidden","min-width":"0.4rem"}},c={key:0,src:s.a,style:{width:"100%"},alt:"",srcset:""},d={key:1,class:"iconfont icon-jiantou2"},m={style:{display:"flex","align-items":"center","min-width":"42%","justify-content":"right","flex-wrap":"wrap"}},u={style:{"text-align":"right","word-break":"break-word","margin-left":"0.1rem"}},h={class:"tx-li-item_3"},b={key:0},p={key:1,style:{color:"#999999"}},v={key:2};function g(e,t,n,s,g,f){var k,O,j,w,T,y,S,N,V,x,E,_;const $=Object(i["resolveComponent"])("van-image");return Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{class:"tx-li-item",onClick:t[0]||(t[0]=Object(i["withModifiers"])((...e)=>f.goLink&&f.goLink(...e),["stop"]))},[Object(i["createElementVNode"])("div",a,[Object(i["createElementVNode"])("div",l,[Object(i["createVNode"])($,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:null!==(k=n.item)&&void 0!==k&&k.from_address_logo_url?e.$f.formatIcon({logo_url:n.item.from_address_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.from_amount))+" "+Object(i["toDisplayString"])(n.item.from_symbol||""),1)]),Object(i["createElementVNode"])("div",r,[0===(null===(O=n.item)||void 0===O?void 0:O.is_merged)&&1e3*(null===(j=n.item)||void 0===j?void 0:j.time)>=Date.now()-6e4&&"timeout"!==(null===(w=n.item)||void 0===w?void 0:w.status)&&"fail"!==(null===(T=n.item)||void 0===T?void 0:T.status)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",c)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("i",d))]),Object(i["createElementVNode"])("div",m,[Object(i["createVNode"])($,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem","min-width":"0.32rem"},"lazy-load":"","show-loading":"",src:null!==(y=n.item)&&void 0!==y&&y.to_address_logo_url?e.$f.formatIcon({logo_url:n.item.to_address_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.to_amount)),1),Object(i["createElementVNode"])("span",u,Object(i["toDisplayString"])(n.item.to_symbol||""),1)])]),Object(i["createElementVNode"])("ul",h,[Object(i["createElementVNode"])("li",null,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(n.item.time?e.$f.formatDate(n.item.time):"--"),1),1===n.item.is_merged&&""!==n.item.from_price_usd?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",b,Object(i["toDisplayString"])(e.$f.formatNumberCurrencyUnit((Number(n.item.from_amount)||0)*(Number(n.item.from_price_usd)||0))),1)):!("timeout"===(null===(S=n.item)||void 0===S?void 0:S.status)||"fail"===(null===(N=n.item)||void 0===N?void 0:N.status)||1e3*(null===(V=n.item)||void 0===V?void 0:V.time)<Date.now()-6e4)||0!==n.item.is_merged||"solana"!==(null===(x=n.item)||void 0===x?void 0:x.chain)&&"ton"!==(null===(E=n.item)||void 0===E?void 0:E.chain)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",v,"--")):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",p,Object(i["toDisplayString"])("fail"===(null===(_=n.item)||void 0===_?void 0:_.status)?e.$t("failed"):e.$t("timeout")),1))])])])}var f={name:"TxItem",props:{item:Object},data(){return{}},methods:{goLink(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.item.chain,this.item.transaction,"tx"))}}},k=(o("26d9"),o("6b0d")),O=o.n(k);const j=O()(f,[["render",g],["__scopeId","data-v-11f60edf"]]);t["a"]=j},"5c10":function(e,t,o){},6676:function(e,t,o){"use strict";o("431d")},"67e3":function(e,t,o){"use strict";o("df7a")},"68d9":function(e,t,o){},"6d9f":function(e,t,o){"use strict";o("0e93")},"74ca":function(e,t,o){"use strict";o("e886")},"7a28":function(e,t,o){},"7b28":function(e,t,o){},"7f8b":function(e,t,o){},"817e":function(e,t,o){"use strict";o("68d9")},"85b6":function(e,t,o){"use strict";var i=o("7a23");const n=e=>(Object(i["pushScopeId"])("data-v-b557f64c"),e=e(),Object(i["popScopeId"])(),e),s={key:0,class:"gap"},a=["onClick"],l=n(()=>Object(i["createElementVNode"])("div",{class:"bar"},null,-1)),r={class:"text"};function c(e,t,o,n,c,d){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"percent-container",style:Object(i["normalizeStyle"])({"--percent-active-color":o.activeColor})},[Object(i["createElementVNode"])("div",{for:"percent-radio-0",class:Object(i["normalizeClass"])({active:0===c.activePercent})},null,2),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(c.percentList,(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:t},[0!==t?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",s)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["label",{active:e===c.activePercent}]),onClick:Object(i["withModifiers"])(t=>d.handleClick(e),["stop"])},[l,Object(i["createElementVNode"])("div",r,Object(i["toDisplayString"])(e)+"%",1)],10,a)],64))),128))],4)}var d={name:"PercentStep",props:{activeColor:String},emits:["change"],data(){return{activePercent:0,percentList:[25,50,75,100]}},methods:{handleClick(e,t=!1){e===this.activePercent?(this.activePercent=0,this.$emit("change",0,t)):(this.activePercent=e,this.$emit("change",e,t))}}},m=(o("3731"),o("6b0d")),u=o.n(m);const h=u()(d,[["render",c],["__scopeId","data-v-b557f64c"]]);t["a"]=h},"8da3e":function(e,t,o){},"8e2e":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o("a002"),n=o.n(i),s=o("7a23");function a(e,t){let o=Object(s["ref"])(t);function i(){n.a.getItem(e).then(i=>{console.log("read",e,null!==i&&void 0!==i?i:t),null===i?(o.value=t,n.a.setItem(e,t)):o.value=i}).catch(e=>{o.value=v})}function a(t){let i=t||o.value;return i?Array.isArray(i)?n.a.setItem(e,JSON.parse(JSON.stringify(o.value))):void("object"===typeof o.value?n.a.setItem(e,{...i}):n.a.setItem(e,i)):n.a.removeItem(e)}return i(),Object(s["watch"])(o,e=>{a()}),o}},"940b":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o("4360");o("a18c");function n(){window.addEventListener("message",(function(e){e.data.message&&"accountsChanged"===e.data.message.action&&(console.log("got accountsChanged event",e.data),i["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58)),e.data.message&&"setNode"==e.data.message.action&&console.log("got setNode event",e.data),e.data.message&&"connect"==e.data.message.action&&console.log("got connect event",e.data),e.data.message&&"disconnect"==e.data.message.action&&(console.log("got connect event",e.data),i["a"].commit("setWallet",""),i["a"].commit("setProvider",""))}))}function s(){return new Promise((e,t)=>{window.tronLink?e(!0):(window.addEventListener("tronLink#initialized",()=>{window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))},{once:!0}),setTimeout(()=>{window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))},3e3))})}function a(){return n(),new Promise((e,t)=>{var o,n;window.tronLink?(console.log("---tron_requestAccounts start----",null===(o=window)||void 0===o?void 0:o.tronWeb),null===(n=window)||void 0===n||null===(n=n.tronLink)||void 0===n||n.request({method:"tron_requestAccounts"}).then(o=>{var n;console.log("tron_requestAccounts",o),200===o.code&&null!==(n=window)&&void 0!==n&&null!==(n=n.tronWeb)&&void 0!==n&&null!==(n=n.defaultAddress)&&void 0!==n&&n.base58?(i["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),i["a"].commit("setProvider",window.tronWeb),i["a"].commit("setChainId","tron"),i["a"].commit("setWallet","TronLink"),e(window.tronWeb.defaultAddress.base58)):4001===o.code&&t(o)}).catch(e=>{console.log("connect tronLink error",e),4001===e.code?t("please connect tronLink"):console.error(e)})):s().then(()=>{var o;null===(o=window)||void 0===o||null===(o=o.tronLink)||void 0===o||o.request({method:"tron_requestAccounts"}).then(o=>{var n;console.log("tron_requestAccounts",o),200===o.code&&null!==(n=window)&&void 0!==n&&null!==(n=n.tronWeb)&&void 0!==n&&null!==(n=n.defaultAddress)&&void 0!==n&&n.base58?(i["a"].commit("setProvider",window.tronWeb),i["a"].commit("setChainId","tron"),i["a"].commit("setWallet","TronLink"),i["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),e(window.tronWeb.defaultAddress.base58)):4001===o.code&&t(o)}).catch(e=>{console.log("connect tronLink error",e),4001===e.code?t("è¯·è¿žæŽ¥"):console.error(e)})})})}},9587:function(e,t,o){"use strict";var i=o("7a23");const n=e=>(Object(i["pushScopeId"])("data-v-3219b752"),e=e(),Object(i["popScopeId"])(),e),s={class:"flex items-center"},a={class:"label mr-20"},l={key:0,class:"token-container"},r={class:"icon-token-container mr-5"},c=["src"],d={class:"mr-5"},m=n(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),u={class:"flex items-center mt-10"},h={class:"label mr-20"},b={key:0,class:"token-container"},p={class:"icon-token-container mr-5"},v=["src"],g={class:"mr-5"},f={class:"flex items-center mt-10"},k={class:"label mr-20"},O={key:0,class:"token-container"},j={class:"flex items-center justify-between mt-10"},w={class:"label mr-20 flex items-center"},T={key:0},y=n(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),S={class:"flex items-center"},N={class:"label mr-20"},V={key:0,class:"token-container"},x={class:"icon-token-container mr-5"},E=["src"],_={class:"mr-5"},$=n(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),B={class:"flex items-center mt-10"},A={class:"label mr-20"},C={key:0,class:"token-container"},D={class:"icon-token-container mr-5"},I=["src"],L={class:"mr-5"},F={class:"flex justify-between mt-10"},P={class:"label mr-20"},U={class:"token-container flex items-end flex-col",style:{"align-items":"end"}},R={class:"text-size-12"},M={class:"color-999 text-size-12"},z={class:"flex items-center justify-between mt-10"},q={class:"mr-20 label"},W={key:0,class:"color-333 text-size-12"},H={class:"label"},Q={key:1,class:"color-333 text-size-12"},G={class:"label"},J={key:0,class:"flex items-center justify-between mt-10"},K={class:"mr-20 label"},Z={class:"color-333 text-size-12"};function Y(e,t,n,Y,X,ee){var te,oe,ie,ne,se,ae,le,re,ce;const de=Object(i["resolveComponent"])("van-image"),me=Object(i["resolveComponent"])("van-loading"),ue=Object(i["resolveComponent"])("van-button");return"solana"!==n.item.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{key:0,class:"tx-li-item van-hairline--bottom clickable",onClick:t[1]||(t[1]=Object(i["withModifiers"])(e=>ee.goLink(n.item),["stop"]))},[Object(i["createElementVNode"])("div",s,[Object(i["createElementVNode"])("span",a,Object(i["toDisplayString"])(e.$t("from")),1),n.item.from_token?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",l,[Object(i["createElementVNode"])("div",r,[Object(i["createVNode"])(de,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(te=n.item)&&void 0!==te&&te.from_token_logo_url?e.$f.formatIcon({logo_url:n.item.from_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${n.item.chain}.png`,alt:"",srcset:""},null,8,c)]),Object(i["createElementVNode"])("span",d,Object(i["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(n.item.from_amount,n.item.from_token_decimals))),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(n.item.from_token_symbol||""),1)])):Object(i["createCommentVNode"])("",!0),m,0===n.item.is_merged?(Object(i["openBlock"])(),Object(i["createBlock"])(me,{key:1,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"})):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",u,[Object(i["createElementVNode"])("span",h,Object(i["toDisplayString"])(e.$t("to")),1),n.item.to_token?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",b,[Object(i["createElementVNode"])("div",p,[Object(i["createVNode"])(de,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(oe=n.item)&&void 0!==oe&&oe.to_token_logo_url?e.$f.formatIcon({logo_url:n.item.to_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${n.item.chain}.png`,alt:"",srcset:""},null,8,v)]),Object(i["createElementVNode"])("span",g,Object(i["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(n.item.to_amount,n.item.to_token_decimals))),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])((null===(ie=n.item)||void 0===ie?void 0:ie.to_token_symbol)||""),1)])):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",f,[Object(i["createElementVNode"])("span",k,Object(i["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(i["toDisplayString"])(n.item.target_token===n.item.from_token?(null===(ne=n.item)||void 0===ne?void 0:ne.from_token_symbol)||"":(null===(se=n.item)||void 0===se?void 0:se.to_token_symbol)||"")+")",1),n.item.target_token?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",O,[Object(i["createElementVNode"])("span",null,"$"+Object(i["toDisplayString"])(n.item.target_limit_price?e.$f.formatNumber2(n.item.target_limit_price):"--"),1)])):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",j,[Object(i["createElementVNode"])("div",w,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatDate(n.item.created_at)),1),(0===n.item.status||-1===n.item.status)&&Date.now()<1e3*n.item.created_at+X.LimitExpiredTime?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",T,"("+Object(i["toDisplayString"])(e.$t("expiresInTime",{t:e.$dayjs(1e3*n.item.created_at+X.LimitExpiredTime).fromNow()}))+")",1)):Object(i["createCommentVNode"])("",!0)]),1===n.item.status||2===n.item.status?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(i["normalizeStyle"])({color:ee.formatStatusColor(n.item)})},Object(i["toDisplayString"])(ee.formatStatus(n.item)),5)):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[y,0!==n.item.status||(0===n.item.status||-1===n.item.status)&&1e3*n.item.created_at+X.LimitExpiredTime<Date.now()&&"solana"!==n.item.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(i["normalizeStyle"])({color:ee.formatStatusColor(n.item)})},Object(i["toDisplayString"])(ee.formatStatus(n.item)),5)):Object(i["createCommentVNode"])("",!0),"solana"===n.item.chain&&0===n.item.status||n.item.from_token===X.NATIVE_TOKEN||(0===n.item.status||-1===n.item.status)&&1e3*n.item.created_at+X.LimitExpiredTime>Date.now()?(Object(i["openBlock"])(),Object(i["createBlock"])(ue,{key:1,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:X.loading,"loading-text":e.$t("revoke"),"loading-size":"0.28rem",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>ee.confirmCancel(n.item),["stop"]))},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("revoke")),1)]),_:1},8,["loading","loading-text"])):Object(i["createCommentVNode"])("",!0)],64))])])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{key:1,class:"tx-li-item van-hairline--bottom clickable",onClick:t[3]||(t[3]=Object(i["withModifiers"])(e=>ee.goLink(n.item),["stop"]))},[Object(i["createElementVNode"])("div",S,[Object(i["createElementVNode"])("span",N,Object(i["toDisplayString"])(e.$t("from")),1),n.item.from_token?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",V,[Object(i["createElementVNode"])("div",x,[Object(i["createVNode"])(de,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(ae=n.item)&&void 0!==ae&&ae.from_token_logo_url?e.$f.formatIcon({logo_url:n.item.from_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${n.item.chain}.png`,alt:"",srcset:""},null,8,E)]),Object(i["createElementVNode"])("span",_,Object(i["toDisplayString"])(e.$f.formatNumber2((null===(le=n.item)||void 0===le?void 0:le.from_amount)||0)),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(n.item.from_token_symbol||""),1)])):Object(i["createCommentVNode"])("",!0),$,"Sending"===n.item.state?(Object(i["openBlock"])(),Object(i["createBlock"])(me,{key:1,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"})):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:2},[Object(i["createElementVNode"])("span",{class:"label",style:Object(i["normalizeStyle"])({color:ee.formatSolanaStatusColor(n.item)})},Object(i["toDisplayString"])(ee.formatSolanaStatus(n.item)),5),"solana"===n.item.chain&&"Pending"===n.item.state?(Object(i["openBlock"])(),Object(i["createBlock"])(ue,{key:0,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:X.loadingSolana[n.item.publicKey],"loading-text":e.$t("revoke"),"loading-size":"0.28rem",onClick:t[2]||(t[2]=Object(i["withModifiers"])(e=>ee.confirmCancel(n.item),["stop"]))},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("revoke")),1)]),_:1},8,["loading","loading-text"])):Object(i["createCommentVNode"])("",!0)],64))]),Object(i["createElementVNode"])("div",B,[Object(i["createElementVNode"])("span",A,Object(i["toDisplayString"])(e.$t("to")),1),n.item.to_token?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",C,[Object(i["createElementVNode"])("div",D,[Object(i["createVNode"])(de,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(re=n.item)&&void 0!==re&&re.to_token_logo_url?e.$f.formatIcon({logo_url:n.item.to_token_logo_url}):"/icon-default.png","error-icon":o("aeccf")},null,8,["src","error-icon"]),Object(i["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${n.item.chain}.png`,alt:"",srcset:""},null,8,I)]),Object(i["createElementVNode"])("span",L,Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.to_amount||0)),1),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])((null===(ce=n.item)||void 0===ce?void 0:ce.to_token_symbol)||""),1)])):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",F,[Object(i["createElementVNode"])("span",P,Object(i["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(i["toDisplayString"])(ee.solanaPriceSymbol(n.item))+")",1),Object(i["createElementVNode"])("div",U,[Object(i["createElementVNode"])("span",R,"$"+Object(i["toDisplayString"])(ee.solanaPriceU(n.item)),1),Object(i["createElementVNode"])("span",M,"("+Object(i["toDisplayString"])(ee.solanaPrice(n.item))+")",1)])]),Object(i["createElementVNode"])("div",z,[Object(i["createElementVNode"])("span",q,Object(i["toDisplayString"])(e.$t("amount1")),1),ee.solanaTarget(n.item)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",W,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.from_amount_used||0))+"/"+Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.from_amount||0))+" "+Object(i["toDisplayString"])(n.item.from_token_symbol),1),Object(i["createElementVNode"])("span",H,"("+Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.percent||0))+"%)",1)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Q,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.to_amount_used||0))+"/"+Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.to_amount||0))+" "+Object(i["toDisplayString"])(n.item.to_token_symbol),1),Object(i["createElementVNode"])("span",G,"("+Object(i["toDisplayString"])(e.$f.formatNumber2(n.item.percent||0))+"%)",1)]))]),void 0!==n.item.expiredAt?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",J,[Object(i["createElementVNode"])("span",K,Object(i["toDisplayString"])(e.$t("expiredTime")),1),Object(i["createElementVNode"])("span",Z,Object(i["toDisplayString"])(n.item.expiredAt?e.$f.formatDate(n.item.expiredAt):e.$t("never")),1)])):Object(i["createCommentVNode"])("",!0)]))}o("14d9");var X=o("365c"),ee=o("c9d9"),te=o("6779"),oe=o("901e"),ie=o.n(oe),ne={name:"TxItem",props:{item:Object},emits:["refresh"],data(){return{loading:!1,LimitExpiredTime:ee["g"],NATIVE_TOKEN:ee["k"],loadingSolana:{}}},methods:{formatUnits:te["utils"].formatUnits,goLink(e){if("solana"===e.chain){if("Sending"===(null===e||void 0===e?void 0:e.state))return;try{sessionStorage.solanaLimitOrder=JSON.stringify({[e.orderKey]:{...e}})}catch(t){console.log(t)}this.$router.push({name:"LimitOrder",params:{id:e.orderKey},query:{chain:"solana",inputMint:e.from_token,outputMint:e.to_token,wallet:(null===e||void 0===e?void 0:e.userPubkey)||(null===e||void 0===e?void 0:e.maker)}})}else this.$router.push({name:"LimitOrder",params:{id:e.id}})},confirmCancel(e){let t="solana"===(null===e||void 0===e?void 0:e.chain)?this.$t("cancelOrderConfirmingSolana"):this.$t("confirmCancelMessage");this.$dialog.confirm({title:this.$t("cancelOrderConfirming"),message:t,confirmButtonText:this.$t("confirm1"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then(()=>{this.cancelLimitOrder(e)})},cancelLimitOrder(e){if("solana"===e.chain)return void this.cancelSolanaLimitOrder(e);let t={fromToken:e.from_token,fromAmount:e.from_amount,toToken:e.to_token,minReturn:e.to_min_amount,salt:e.salt,id:e.id,order_id:e.order_id};console.log(t),this.loading=!0,Object(X["l"])(t).then(t=>{console.log(t),this.$notify({type:"success",message:this.$t("cancelledOrderSuccessfully")}),this.$emit("refresh",e)}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loading=!1})},cancelSolanaLimitOrder(e){this.loadingSolana[e.publicKey]=!0;let t="v1"===(null===e||void 0===e?void 0:e.version)?X["n"]:X["m"];t(e.publicKey).then(e=>(console.log(e),e.wait())).then(t=>{console.log(t),setTimeout(()=>{this.$emit("refresh",e,this.loadingSolana)},3e3)}).catch(t=>{this.$f.handleError(t,"solana"),this.loadingSolana[e.publicKey]=!1}).finally(()=>{})},formatStatus(e){var t;if((0===e.status||-1===e.status)&&1e3*e.created_at+ee["g"]<Date.now()&&"solana"!==e.chain)return this.$t("expired1");let o=e.status,i={0:"",1:this.$t("cancelled"),2:this.$t("completed"),3:this.$t("unknownError1"),7:this.$t("unknownError1"),5:this.$t("insufficientSlippage1"),8:this.$t("insufficientSlippage1"),6:this.$t("transferFailed"),4:this.$t("fail1")+`(${this.$t("notEnoughBalance")})`,10:this.$t("fail1")+`(${this.$t("nonceError")})`,11:this.$t("fail1")+`(${this.$t("chainError")})`,12:this.$t("fail1")+`(${this.$t("signatureError")})`,13:this.$t("fail1")+`(${this.$t("approveGasPriceLow")})`,"-1":""};return null!==(t=i[o])&&void 0!==t?t:o},formatStatusColor(e){if((0===e.status||-1===e.status)&&1e3*e.created_at+ee["g"]<Date.now())return"#999999";let t=e.status;return 1===t||10===t||11===t||12===t||4===t?"#999999":2===t?"#12B886":0===t?"#3F80F7":"#FF0000"},solanaTarget(e){let t=["So11111111111111111111111111111111111111112","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"],o=t.indexOf(e.from_token),i=t.indexOf(e.to_token);return o<=i},solanaPriceSymbol(e){return this.solanaTarget(e)?(null===e||void 0===e?void 0:e.from_token_symbol)||"":(null===e||void 0===e?void 0:e.to_token_symbol)||""},solanaPriceU(e){return this.solanaTarget(e)?this.$f.formatNumber2(new ie.a(e.to_amount).times((null===e||void 0===e?void 0:e.to_token_price)||0).div(e.from_amount).toFixed()):this.$f.formatNumber2(new ie.a(e.from_amount).times((null===e||void 0===e?void 0:e.from_token_price)||0).div(e.to_amount).toFixed())},solanaPrice(e){return this.solanaTarget(e)?this.$f.formatNumber2(e.to_amount/e.from_amount)+" "+((null===e||void 0===e?void 0:e.to_token_symbol)||"")+" per "+((null===e||void 0===e?void 0:e.from_token_symbol)||""):this.$f.formatNumber2(e.from_amount/e.to_amount)+" "+((null===e||void 0===e?void 0:e.from_token_symbol)||"")+" per "+((null===e||void 0===e?void 0:e.to_token_symbol)||"")},formatSolanaStatus(e){var t;if("Pending"===(null===e||void 0===e?void 0:e.state)&&null!==(null===e||void 0===e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null===e||void 0===e?void 0:e.expiredAt)||0))return this.$t("expired1");let o=e.state,i={Pending:"",Completed:this.$t("completed"),Cancelled:this.$t("cancelled")};return null!==(t=i[o])&&void 0!==t?t:o},formatSolanaStatusColor(e){var t;if("Pending"===(null===e||void 0===e?void 0:e.state)&&null!==(null===e||void 0===e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null===e||void 0===e?void 0:e.expiredAt)||0))return"#999999";let o=e.state,i={Pending:"",Completed:"#12B886",Cancelled:"#999999"};return null!==(t=i[o])&&void 0!==t?t:"#3F80F7"}}},se=(o("0885"),o("6b0d")),ae=o.n(se);const le=ae()(ne,[["render",Y],["__scopeId","data-v-3219b752"]]);t["a"]=le},"965b":function(e,t,o){e.exports=o.p+"static/img/audit-logo.01052351.png"},"9eb5":function(e,t,o){"use strict";o("7b28")},"9ff5":function(e,t,o){"use strict";o("ac1e")},a113:function(e,t,o){},a277:function(e,t,o){"use strict";o("5c10")},a28f:function(e,t,o){"use strict";o("3963")},a2ef:function(e,t,o){"use strict";var i=o("7a23"),n=o("e524"),s=o.n(n);const a={class:"swap-title"},l={class:"swap-info"},r={class:"swap-info_item header"},c={class:"header-li"},d={class:"header-li_left"},m=["src"],u={class:"header-li_right"},h={class:"switch-box"},b={class:"header-li"},p={class:"header-li_left"},v=["src"],g={class:"header-li_right"},f={key:0,class:"b-s-c"},k={class:"color-3f80f7"},O=Object(i["createTextVNode"])(") "),j={class:"text-size-12 color-999",style:{"max-height":"2rem","overflow-y":"auto"}},w={class:"flex justify-between items-center mt-5"},T={key:0,style:{color:"var(--van-danger-color)"}},y={key:1},S={key:1,class:"bg-change"},N={class:"swap-info_item"},V={class:"swap-info_item-label"},x={class:"swap-info_item-value"},E={class:"p-item"},_={class:"p-item"},$={key:2,class:"swap-info_item"},B={class:"swap-info_item-label"},A={class:"swap-info_item-value"},C={key:3,class:"swap-info_item"},D={class:"swap-info_item-label"},I={class:"swap-info_item-value"},L={key:0,class:"swap-info_item"},F={class:"swap-info_item-label"},P={class:"swap-info_item-value"},U={key:1,class:"swap-info_item"},R={class:"swap-info_item-label"},M={class:"swap-info_item-value"},z={class:"swap-info_item"},q={class:"swap-info_item-label"},W={key:0,class:"swap-info_item-value path-list"},H={key:0},Q={class:"path-amm"},G={key:1,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:s.a,alt:"",srcset:""},J={key:1},K={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:s.a,alt:"",srcset:""},Z={key:1},Y={key:5,class:"swap-info_item"},X={class:"swap-info_item-label"},ee={class:"swap-info_item-value"},te=["href"],oe={class:"iconfont icon-copy",style:{"margin-left":"0.1rem"}},ie={class:"footer"};function ne(e,t,n,s,ne,se){const ae=Object(i["resolveComponent"])("van-icon"),le=Object(i["resolveComponent"])("van-button"),re=Object(i["resolveComponent"])("van-image"),ce=Object(i["resolveComponent"])("van-popup"),de=Object(i["resolveDirective"])("copy");return Object(i["openBlock"])(),Object(i["createBlock"])(ce,{show:se.dialogVisible,"onUpdate:show":t[1]||(t[1]=e=>se.dialogVisible=e),style:Object(i["normalizeStyle"])({width:"90%",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(i["withCtx"])(()=>{var s,ce,me,ue,he,be,pe,ve,ge,fe,ke,Oe,je;return[Object(i["createElementVNode"])("header",a,Object(i["toDisplayString"])(e.$t("tradeConfirm")),1),Object(i["createElementVNode"])("ul",l,[Object(i["createElementVNode"])("li",r,[Object(i["createElementVNode"])("div",c,[Object(i["createElementVNode"])("div",d,[Object(i["createElementVNode"])("img",{class:"icon-token",src:se.formatLogo(n.swapInfo.fromToken),alt:"",height:"20"},null,8,m),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(n.swapInfo.fromToken.symbol),1)]),Object(i["createElementVNode"])("div",u,Object(i["toDisplayString"])(e.$f.formatNumber2((null===(s=n.swapInfo)||void 0===s?void 0:s.fromAmount)||se.formatUnits(n.swapInfo.fromTokenAmount||0,n.swapInfo.fromToken.decimals))||"0"),1)]),Object(i["createElementVNode"])("div",h,[Object(i["createVNode"])(ae,{class:"switch-icon",name:"down"})]),Object(i["createElementVNode"])("div",b,[Object(i["createElementVNode"])("div",p,[Object(i["createElementVNode"])("img",{class:"icon-token",src:se.formatLogo(n.swapInfo.toToken),alt:"",height:"20"},null,8,v),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(n.swapInfo.toToken.symbol),1)]),Object(i["createElementVNode"])("div",g,Object(i["toDisplayString"])(e.$f.formatNumber2((null===(ce=n.swapInfo)||void 0===ce?void 0:ce.toAmount)||se.formatUnits(n.swapInfo.toTokenAmount||0,n.swapInfo.toToken.decimals))||"0"),1)])]),e.$store.state.isBatchSwap&&ne.isCanBatchSwap?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",f,[Object(i["createElementVNode"])("button",{class:"clickable",onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>ne.isShowBatchAddress=!ne.isShowBatchAddress,["stop"]))},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("batchSwapDetails"))+"(",1),Object(i["createElementVNode"])("span",k,Object(i["toDisplayString"])((null===(me=se.selectSubWallets)||void 0===me?void 0:me.length)||0),1),O,Object(i["withDirectives"])(Object(i["createVNode"])(ae,{name:"arrow-down"},null,512),[[i["vShow"],!ne.isShowBatchAddress]]),Object(i["withDirectives"])(Object(i["createVNode"])(ae,{name:"arrow-up"},null,512),[[i["vShow"],ne.isShowBatchAddress]])]),Object(i["withDirectives"])(Object(i["createElementVNode"])("ul",j,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(se.selectSubWallets||[],(t,o)=>{var s;return Object(i["openBlock"])(),Object(i["createElementBlock"])("li",w,[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(null===t||void 0===t?void 0:t.name)+"("+Object(i["toDisplayString"])(null===t||void 0===t?void 0:t.address.slice(0,6))+"..."+Object(i["toDisplayString"])(null===t||void 0===t?void 0:t.address.slice(-4))+")",1),null!==(s=se.swapTxs)&&void 0!==s&&s[o]?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",y,"-"+Object(i["toDisplayString"])(e.$f.formatNumber2(se.formatUnits(n.swapInfo.fromTokenAmount||0,n.swapInfo.fromToken.decimals))||"0")+" "+Object(i["toDisplayString"])(n.swapInfo.fromToken.symbol),1)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",T,Object(i["toDisplayString"])(e.$t("insufficientBalance")),1))])}),256))],512),[[i["vShow"],ne.isShowBatchAddress]])])):Object(i["createCommentVNode"])("",!0),ne.priceUpdated?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",S,[Object(i["createElementVNode"])("div",null,Object(i["toDisplayString"])(e.$t("priceUpdated")),1),Object(i["createVNode"])(le,{class:"btn",type:"primary",color:"#3F80F7",size:"small",round:"",onClick:se.accept},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("accept")),1)]),_:1},8,["onClick"])])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("li",N,[Object(i["createElementVNode"])("div",V,Object(i["toDisplayString"])(e.$t("price")),1),Object(i["createElementVNode"])("div",x,[Object(i["createElementVNode"])("div",E,"1 "+Object(i["toDisplayString"])(n.swapInfo.fromToken.symbol)+" = "+Object(i["toDisplayString"])(se.getPrice((null===(ue=n.swapInfo)||void 0===ue?void 0:ue.fromAmount)||se.formatUnits(n.swapInfo.fromTokenAmount||0,n.swapInfo.fromToken.decimals),(null===(he=n.swapInfo)||void 0===he?void 0:he.toAmount)||se.formatUnits(n.swapInfo.toTokenAmount||0,n.swapInfo.toToken.decimals)))+" "+Object(i["toDisplayString"])(n.swapInfo.toToken.symbol),1),Object(i["createElementVNode"])("div",_,"1 "+Object(i["toDisplayString"])(n.swapInfo.toToken.symbol)+" = "+Object(i["toDisplayString"])(se.getPrice((null===(be=n.swapInfo)||void 0===be?void 0:be.toAmount)||se.formatUnits(n.swapInfo.toTokenAmount||0,n.swapInfo.toToken.decimals),(null===(pe=n.swapInfo)||void 0===pe?void 0:pe.fromAmount)||se.formatUnits(n.swapInfo.fromTokenAmount||0,n.swapInfo.fromToken.decimals)))+" "+Object(i["toDisplayString"])(n.swapInfo.fromToken.symbol),1)])]),n.swapInfo.fromToken.isWrapper&&n.swapInfo.toToken.isETH||n.swapInfo.toToken.isWrapper&&n.swapInfo.fromToken.isETH?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",$,[Object(i["createElementVNode"])("div",B,Object(i["toDisplayString"])(e.$t("slippage")),1),Object(i["createElementVNode"])("div",A,Object(i["toDisplayString"])(n.slippage)+"%",1)])),n.swapInfo.gasValue&&n.swapInfo.gasValue>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",C,[Object(i["createElementVNode"])("div",D,Object(i["toDisplayString"])(e.$t("estimatedGas")),1),Object(i["createElementVNode"])("div",I,"â‰ˆ "+Object(i["toDisplayString"])(se.getEstimatedFee(n.swapInfo.gasValue)),1)])):Object(i["createCommentVNode"])("",!0),n.swapInfo.fromToken.isWrapper&&n.swapInfo.toToken.isETH||n.swapInfo.toToken.isWrapper&&n.swapInfo.fromToken.isETH?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:4},[n.swapInfo.isAmountOut?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",U,[Object(i["createElementVNode"])("div",R,Object(i["toDisplayString"])(e.$t("maximumReceived")),1),Object(i["createElementVNode"])("div",M,Object(i["toDisplayString"])(se.maxSold)+" "+Object(i["toDisplayString"])(null===(ge=n.swapInfo)||void 0===ge||null===(ge=ge.fromToken)||void 0===ge?void 0:ge.symbol),1)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",L,[Object(i["createElementVNode"])("div",F,Object(i["toDisplayString"])(e.$t("minimumReceived")),1),Object(i["createElementVNode"])("div",P,Object(i["toDisplayString"])(se.minReceived)+" "+Object(i["toDisplayString"])(null===(ve=n.swapInfo)||void 0===ve||null===(ve=ve.toToken)||void 0===ve?void 0:ve.symbol),1)]))],64)),Object(i["createElementVNode"])("li",z,[Object(i["createElementVNode"])("div",q,Object(i["toDisplayString"])(e.$t("tokenRoute")),1),n.swapInfo.fromToken.isWrapper&&n.swapInfo.toToken.isETH||n.swapInfo.toToken.isWrapper&&n.swapInfo.fromToken.isETH?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",J,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(se.swapRouterPath,(e,t)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:t},[0!==t?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",K)):Object(i["createCommentVNode"])("",!0),e.symbol?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Z,Object(i["toDisplayString"])(e.symbol),1)):Object(i["createCommentVNode"])("",!0)],64))),128))])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",W,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(se.swapRouterPath,(t,n)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:n},[t.symbol?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",H,Object(i["toDisplayString"])(t.symbol),1)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",Q,[t.nextAmm&&"unknown"!==t.nextAmm?(Object(i["openBlock"])(),Object(i["createBlock"])(re,{key:0,class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:`${e.$store.state.s3BaseUrl}swap/${t.nextAmm}.jpeg`,"error-icon":o("aeccf")},null,8,["src","error-icon"])):Object(i["createCommentVNode"])("",!0),n!==se.swapRouterPath.length-1?(Object(i["openBlock"])(),Object(i["createElementBlock"])("img",G)):Object(i["createCommentVNode"])("",!0)])],64))),128))]))]),null!==(fe=n.swapInfo)&&void 0!==fe&&fe.transaction?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",Y,[Object(i["createElementVNode"])("div",X,Object(i["toDisplayString"])(e.$t("txHash")),1),Object(i["createElementVNode"])("div",ee,[Object(i["createElementVNode"])("a",{href:e.$f.formatExplorerUrl(n.chain,n.swapInfo.transaction,"tx"),target:"_blank"},Object(i["toDisplayString"])((null===(ke=n.swapInfo)||void 0===ke||null===(ke=ke.transaction)||void 0===ke?void 0:ke.slice(0,6))+"..."+(null===(Oe=n.swapInfo)||void 0===Oe||null===(Oe=Oe.transaction)||void 0===Oe?void 0:Oe.slice(-6))),9,te),Object(i["withDirectives"])(Object(i["createElementVNode"])("i",oe,null,512),[[de,null===(je=n.swapInfo)||void 0===je?void 0:je.transaction]])])])):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",ie,[Object(i["createVNode"])(le,{class:"submit-button",type:"primary",loading:se.isLoading,"loading-text":e.$t("confirming"),block:"",onClick:Object(i["withModifiers"])(se.submitSwap,["stop"]),disabled:ne.priceUpdated},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("confirm")),1)]),_:1},8,["loading","loading-text","onClick","disabled"])])]}),_:1},8,["show","style"])}var se=o("901e"),ae=o.n(se),le=o("6779"),re=o("c9d9"),ce={name:"ConfirmSwap",props:{visible:Boolean,swapInfo:Object,slippage:String,loading:Boolean,chain:String,nativePrice:Number,gasPrice:String},emits:["update:visible","submit"],data(){var e;return{priceUpdated:!1,isShowBatchAddress:!0,isCanBatchSwap:!(null===(e=window)||void 0===e||null===(e=e._tw_)||void 0===e||!e.appSelectSubWallet)||!1}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},isLoading(){return this.loading},minReceived(){var e,t,o;let i=(null===(e=this.swapInfo)||void 0===e||null===(e=e.toToken)||void 0===e?void 0:e.decimals)||0,n=null===(t=this.swapInfo)||void 0===t?void 0:t.toAmount;return n?this.$f.formatNumber(new ae.a(n||0).times(100-Number(this.slippage)).div(100).toFixed()):this.$f.formatNumber(le["utils"].formatUnits(new ae.a((null===(o=this.swapInfo)||void 0===o?void 0:o.toTokenAmount)||0).times(100-Number(this.slippage)).div(100).toFixed(0),i))},maxSold(){var e,t,o;let i=(null===(e=this.swapInfo)||void 0===e||null===(e=e.fromToken)||void 0===e?void 0:e.decimals)||0,n=null===(t=this.swapInfo)||void 0===t?void 0:t.fromAmount;return n?this.$f.formatNumber(new ae.a(n||0).times(100+Number(this.slippage)).div(100).toFixed()):this.$f.formatNumber(le["utils"].formatUnits(new ae.a((null===(o=this.swapInfo)||void 0===o?void 0:o.fromTokenAmount)||0).times(100+Number(this.slippage)).div(100).toFixed(0),i))},swapRouterPath(){var e;return(null===(e=this.swapInfo)||void 0===e?void 0:e.swapRouterPath)||[]},subTxs(){var e;return(null===(e=this.swapInfo)||void 0===e?void 0:e.subTxs)||{}},selectSubWallets(){return this.$store.getters.selectSubWallets||[]},swapTxs(){var e;return(null===(e=this.$store.state)||void 0===e||null===(e=e.subTxs)||void 0===e?void 0:e.swapTxs)||[]}},watch:{swapInfo(e,t){},visible(e){var t,o;e&&(this.priceUpdated=!1),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)}},methods:{formatUnits:le["utils"].formatUnits,formatPrice(e){return this.$f.formatNumber(e&&""!==e?le["utils"].formatEther(this.nativePrice):0)},getPrice(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new ae.a(t).div(e).toFixed())||"0"},getEstimatedFee(e){return e?this.$f.formatNumberCurrencyUnit(new ae.a(e.toString()).times(this.nativePrice).times(this.gasPrice).div(String(10**18)).toFixed()||"0",2):"0"},submitSwap(){this.$emit("submit")},formatLogo(e){var t;return!e.logoURI||null!==e&&void 0!==e&&null!==(t=e.logoURI)&&void 0!==t&&t.includes("empty-token")?e.logo_url?this.$f.formatIcon(e):e.isETH?this.$f.formatIcon(re["k"]+"-"+this.chain):"/icon-default.png":e.logoURI},goLink(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.chain,this.swapInfo.transaction,"tx"))},accept(){this.priceUpdated=!1}}},de=(o("a28f"),o("6b0d")),me=o.n(de);const ue=me()(ce,[["render",ne],["__scopeId","data-v-3eabeb3e"]]);t["a"]=ue},a6ec:function(e,t,o){"use strict";o("24500")},ac1e:function(e,t,o){},aeccf:function(e,t,o){e.exports=o.p+"static/img/icon-default.75f6e9a0.png"},afd7:function(e,t,o){e.exports=o.p+"static/img/loading.fdd45987.svg"},b56d:function(e,t,o){"use strict";o("8da3e")},c638:function(e,t,o){"use strict";o("7a28")},ca58:function(e,t,o){},ce94:function(e,t,o){"use strict";var i=o("7a23");const n={key:0,class:"swap-title"},s={key:1,class:"swap-title"},a={key:2,class:"swap-title"},l={key:3,class:"swap-info"},r={key:0,class:"swap-info_item"},c={class:"swap-info_item-label"},d={class:"swap-info_item-value"},m={class:"swap-info_item"},u={class:"swap-info_item-label"},h={class:"swap-info_item-value"},b=["src"],p={class:"ml-5"},v={key:0,class:"swap-info_item"},g={class:"swap-info_item-label"},f={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},k={style:{color:"#3F80F7"}},O={key:1,class:"swap-info_item"},j={class:"swap-info_item-label"},w={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},T={style:{color:"#3F80F7"}},y={class:"swap-info_item"},S={class:"swap-info_item-label"},N={class:"swap-info_item-value"},V=["src"],x={class:"ml-5"},E={class:"swap-info_item"},_={class:"swap-info_item-label"},$={class:"swap-info_item-value"},B=["src"],A={class:"ml-5"},C={key:0,class:"swap-info_item"},D={class:"swap-info_item-label"},I={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},L={style:{color:"#3F80F7"}},F={key:1,class:"swap-info_item"},P={class:"swap-info_item-label"},U={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},R={style:{color:"#3F80F7"}},M={class:"swap-info_item"},z={class:"swap-info_item-label"},q={class:"swap-info_item-value"},W=["src"],H={class:"ml-5"},Q={key:3,class:"swap-info_item"},G={class:"swap-info_item-label"},J={class:"swap-info_item-value",style:{"text-align":"right"}},K={class:"swap-info_item tips warning"},Z={class:"swap-info_item tips warning"},Y={key:0,class:"swap-info_item tips warning"},X={key:1,class:"swap-info_item tips warning"},ee={key:4,class:"swap-info"},te={class:"swap-info_item header"},oe={class:"header-li"},ie={class:"header-li_left"},ne=["src"],se={class:"header-li_right"},ae={class:"switch-box"},le={class:"header-li"},re={class:"header-li_left"},ce=["src"],de={class:"header-li_right"},me={class:"swap-info_item"},ue={class:"swap-info_item-label"},he={class:"swap-info_item-value"},be={class:"swap-info_item"},pe={class:"swap-info_item-label"},ve={class:"swap-info_item-value"},ge={class:"swap-info_item"},fe={class:"swap-info_item-label"},ke={class:"swap-info_item-value"},Oe={class:"footer"};function je(e,t,o,je,we,Te){const ye=Object(i["resolveComponent"])("van-icon"),Se=Object(i["resolveComponent"])("van-button"),Ne=Object(i["resolveComponent"])("van-popup");return Object(i["openBlock"])(),Object(i["createBlock"])(Ne,{show:Te.dialogVisible,"onUpdate:show":t[1]||(t[1]=e=>Te.dialogVisible=e),style:Object(i["normalizeStyle"])({width:"90%",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(i["withCtx"])(()=>{var je,Ne,Ve,xe,Ee,_e,$e,Be,Ae,Ce,De,Ie,Le,Fe,Pe,Ue,Re,Me,ze,qe;return[0===o.limitInfo.orderType?(Object(i["openBlock"])(),Object(i["createElementBlock"])("header",n,Object(i["toDisplayString"])(0===o.limitInfo.activeTab?e.$t("limitBuy"):e.$t("limitSell")),1)):Object(i["createCommentVNode"])("",!0),1===o.limitInfo.orderType?(Object(i["openBlock"])(),Object(i["createElementBlock"])("header",s,Object(i["toDisplayString"])(0===o.limitInfo.activeTab?e.$t("stopLimitBuy"):e.$t("stopLimitSell")),1)):Object(i["createCommentVNode"])("",!0),2===o.limitInfo.orderType?(Object(i["openBlock"])(),Object(i["createElementBlock"])("header",a,Object(i["toDisplayString"])(e.$t("tradeConfirm")),1)):Object(i["createCommentVNode"])("",!0),0===o.limitInfo.orderType||1===o.limitInfo.orderType?(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",l,[1===o.limitInfo.orderType?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",r,[Object(i["createElementVNode"])("div",c,Object(i["toDisplayString"])(e.$t("limitEffective")),1),Object(i["createElementVNode"])("div",d,Object(i["toDisplayString"])(e.$t("triggerPriceEffective",{symbol:1===o.limitInfo.activeTab?(null===(je=o.limitInfo)||void 0===je||null===(je=je.fromToken)||void 0===je?void 0:je.symbol)||"":(null===(Ne=o.limitInfo)||void 0===Ne||null===(Ne=Ne.toToken)||void 0===Ne?void 0:Ne.symbol)||"",price:e.$f.formatNumber2((null===(Ve=o.limitInfo)||void 0===Ve?void 0:Ve.triggerPrice)||0)})),1)])):Object(i["createCommentVNode"])("",!0),0===o.limitInfo.activeTab?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[Object(i["createElementVNode"])("li",m,[Object(i["createElementVNode"])("div",u,Object(i["toDisplayString"])(e.$t("limitBuy")),1),Object(i["createElementVNode"])("div",h,[Object(i["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.toToken),alt:"",height:"20"},null,8,b),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.toAmount||0)),1),Object(i["createElementVNode"])("span",p,Object(i["toDisplayString"])((null===(xe=o.limitInfo)||void 0===xe||null===(xe=xe.toToken)||void 0===xe?void 0:xe.symbol)||""),1)])]),"solana"!==o.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",v,[Object(i["createElementVNode"])("div",g,Object(i["toDisplayString"])(e.$t("limitPrice"))+"("+Object(i["toDisplayString"])(1===o.limitInfo.activeTab?(null===(Ee=o.limitInfo)||void 0===Ee||null===(Ee=Ee.fromToken)||void 0===Ee?void 0:Ee.symbol)||"":(null===(_e=o.limitInfo)||void 0===_e||null===(_e=_e.toToken)||void 0===_e?void 0:_e.symbol)||"")+")",1),Object(i["createElementVNode"])("div",f,[Object(i["createElementVNode"])("span",null,"$"+Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(i["createElementVNode"])("span",k,"("+Object(i["toDisplayString"])(e.$t("auto-submitWhenPriceBuy"))+")",1)])])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",O,[Object(i["createElementVNode"])("div",j,Object(i["toDisplayString"])(e.$t("limitPrice"))+"("+Object(i["toDisplayString"])(1===o.limitInfo.activeTab?(null===($e=o.limitInfo)||void 0===$e||null===($e=$e.fromToken)||void 0===$e?void 0:$e.symbol)||"":(null===(Be=o.limitInfo)||void 0===Be||null===(Be=Be.toToken)||void 0===Be?void 0:Be.symbol)||"")+")",1),Object(i["createElementVNode"])("div",w,[Object(i["createElementVNode"])("span",null,"$"+Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(i["createElementVNode"])("span",T,"("+Object(i["toDisplayString"])(e.$t("auto-submitWhenPriceBuy"))+")",1)])])),Object(i["createElementVNode"])("li",y,[Object(i["createElementVNode"])("div",S,Object(i["toDisplayString"])(e.$t("expectedPayment")),1),Object(i["createElementVNode"])("div",N,[Object(i["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.fromToken),alt:"",height:"20"},null,8,V),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.fromAmount||0)),1),Object(i["createElementVNode"])("span",x,Object(i["toDisplayString"])((null===(Ae=o.limitInfo)||void 0===Ae||null===(Ae=Ae.fromToken)||void 0===Ae?void 0:Ae.symbol)||""),1)])])],64)):Object(i["createCommentVNode"])("",!0),1===o.limitInfo.activeTab?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:2},[Object(i["createElementVNode"])("li",E,[Object(i["createElementVNode"])("div",_,Object(i["toDisplayString"])(e.$t("limitSell")),1),Object(i["createElementVNode"])("div",$,[Object(i["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.fromToken),alt:"",height:"20"},null,8,B),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.fromAmount||0)),1),Object(i["createElementVNode"])("span",A,Object(i["toDisplayString"])((null===(Ce=o.limitInfo)||void 0===Ce||null===(Ce=Ce.fromToken)||void 0===Ce?void 0:Ce.symbol)||""),1)])]),"solana"!==o.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",C,[Object(i["createElementVNode"])("div",D,Object(i["toDisplayString"])(e.$t("limitPrice"))+"("+Object(i["toDisplayString"])(1===o.limitInfo.activeTab?(null===(De=o.limitInfo)||void 0===De||null===(De=De.fromToken)||void 0===De?void 0:De.symbol)||"":(null===(Ie=o.limitInfo)||void 0===Ie||null===(Ie=Ie.toToken)||void 0===Ie?void 0:Ie.symbol)||"")+")",1),Object(i["createElementVNode"])("div",I,[Object(i["createElementVNode"])("span",null,"$"+Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(i["createElementVNode"])("span",L,"("+Object(i["toDisplayString"])(e.$t("auto-submitWhenPriceSell"))+")",1)])])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",F,[Object(i["createElementVNode"])("div",P,Object(i["toDisplayString"])(e.$t("limitPrice"))+"("+Object(i["toDisplayString"])(1===o.limitInfo.activeTab?(null===(Le=o.limitInfo)||void 0===Le||null===(Le=Le.fromToken)||void 0===Le?void 0:Le.symbol)||"":(null===(Fe=o.limitInfo)||void 0===Fe||null===(Fe=Fe.toToken)||void 0===Fe?void 0:Fe.symbol)||"")+")",1),Object(i["createElementVNode"])("div",U,[Object(i["createElementVNode"])("span",null,"$"+Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.targetLimitPrice||0)),1),Object(i["createElementVNode"])("span",R,"("+Object(i["toDisplayString"])(e.$t("auto-submitWhenPriceSell"))+")",1)])])),Object(i["createElementVNode"])("li",M,[Object(i["createElementVNode"])("div",z,Object(i["toDisplayString"])(e.$t("expectedReceivable")),1),Object(i["createElementVNode"])("div",q,[Object(i["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.toToken),alt:"",height:"20"},null,8,W),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.toAmount||0)),1),Object(i["createElementVNode"])("span",H,Object(i["toDisplayString"])((null===(Pe=o.limitInfo)||void 0===Pe||null===(Pe=Pe.toToken)||void 0===Pe?void 0:Pe.symbol)||""),1)])])],64)):Object(i["createCommentVNode"])("",!0),"solana"!==o.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",Q,[Object(i["createElementVNode"])("div",G,Object(i["toDisplayString"])(e.$t("estimateGas")),1),Object(i["createElementVNode"])("div",J,Object(i["toDisplayString"])(e.$t("estimateGasTips",{n:e.$f.formatNumber2("solana"===o.chain?"0.1":null!==(Ue=o.limitGasU)&&void 0!==Ue?Ue:1,1)})),1)])):Object(i["createCommentVNode"])("",!0),"solana"!==o.chain?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:4},[Object(i["createElementVNode"])("li",K,"* "+Object(i["toDisplayString"])(e.$t("limitFeeTip")),1),Object(i["createElementVNode"])("li",Z,"* "+Object(i["toDisplayString"])(e.$t("limitTokenTips")),1),(null===(Re=o.limitInfo)||void 0===Re||null===(Re=Re.fromToken)||void 0===Re?void 0:Re.address)===we.NATIVE_TOKEN?(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",Y,Object(i["toDisplayString"])(e.$t("limitTips1")),1)):(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",X,Object(i["toDisplayString"])(e.$t("limitTips2")),1))],64)):Object(i["createCommentVNode"])("",!0)])):2===o.limitInfo.orderType?(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",ee,[Object(i["createElementVNode"])("li",te,[Object(i["createElementVNode"])("div",oe,[Object(i["createElementVNode"])("div",ie,[Object(i["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.fromToken),alt:"",height:"20"},null,8,ne),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(o.limitInfo.fromToken.symbol),1)]),Object(i["createElementVNode"])("div",se,Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.fromAmount||0)||"0"),1)]),Object(i["createElementVNode"])("div",ae,[Object(i["createVNode"])(ye,{class:"switch-icon",name:"down"})]),Object(i["createElementVNode"])("div",le,[Object(i["createElementVNode"])("div",re,[Object(i["createElementVNode"])("img",{class:"icon-token",src:Te.formatLogo(o.limitInfo.toToken),alt:"",height:"20"},null,8,ce),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(o.limitInfo.toToken.symbol),1)]),Object(i["createElementVNode"])("div",de,Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitInfo.toAmount||0)||"0"),1)])]),Object(i["createElementVNode"])("li",me,[Object(i["createElementVNode"])("div",ue,Object(i["toDisplayString"])(e.$t("slippage")),1),Object(i["createElementVNode"])("div",he,Object(i["toDisplayString"])(null===(Me=o.limitInfo)||void 0===Me?void 0:Me.slippage)+"%",1)]),Object(i["createElementVNode"])("li",be,[Object(i["createElementVNode"])("div",pe,Object(i["toDisplayString"])(e.$t("estimatedGas")),1),Object(i["createElementVNode"])("div",ve,[Object(i["createElementVNode"])("span",null,"â‰ˆ $"+Object(i["toDisplayString"])(e.$f.formatNumber2(o.limitGasU||"0")),1),Object(i["createElementVNode"])("button",{type:"button",class:"clickable flex items-center tag-question",onClick:t[0]||(t[0]=Object(i["withModifiers"])(t=>{var i;return e.$dialog.alert({title:e.$t("tips"),message:e.$t("noGasTips",{s:(null===(i=o.limitInfo)||void 0===i||null===(i=i.fromToken)||void 0===i?void 0:i.symbol)||""}),confirmButtonText:e.$t("iKnown"),confirmButtonColor:"#3F80F7",messageAlign:"center"})},["stop"]))},[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("noGas")),1),Object(i["createVNode"])(ye,{name:"question-o"})])])]),Object(i["createElementVNode"])("li",ge,[Object(i["createElementVNode"])("div",fe,Object(i["toDisplayString"])(e.$t("minimumReceived")),1),Object(i["createElementVNode"])("div",ke,Object(i["toDisplayString"])(e.$f.formatNumber2((null===(ze=o.limitInfo)||void 0===ze?void 0:ze.minReturn)||0))+" "+Object(i["toDisplayString"])(null===(qe=o.limitInfo)||void 0===qe||null===(qe=qe.toToken)||void 0===qe?void 0:qe.symbol),1)])])):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("div",Oe,[Object(i["createVNode"])(Se,{class:"submit-button",type:"primary",loading:Te.isLoading,"loading-text":e.$t("confirming"),block:"",round:"",onClick:Object(i["withModifiers"])(Te.submitSwap,["stop"])},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("confirm")),1)]),_:1},8,["loading","loading-text","onClick"])])]}),_:1},8,["show","style"])}var we=o("901e"),Te=o.n(we),ye=o("6779"),Se=o("c9d9"),Ne={name:"ConfirmLimit",props:{visible:Boolean,limitInfo:Object,loading:Boolean,chain:String,limitGasU:String},emits:["update:visible","submit"],data(){return{NATIVE_TOKEN:Se["k"],limitContractsFee:Se["w"]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},isLoading(){return this.loading}},watch:{visible(e){var t,o;console.log("isRefreshEnable",e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)}},methods:{formatUnits:ye["utils"].formatUnits,getPrice(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new Te.a(t).div(e).toFixed())||"0"},submitSwap(){this.$emit("submit")},formatLogo(e){var t;return!e.logoURI||null!==e&&void 0!==e&&null!==(t=e.logoURI)&&void 0!==t&&t.includes("empty-token")?e.logo_url?this.$f.formatIcon(e):"/icon-default.png":e.logoURI},goLink(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.chain,this.limitInfo.transaction,"tx"))}}},Ve=(o("a277"),o("6b0d")),xe=o.n(Ve);const Ee=xe()(Ne,[["render",je],["__scopeId","data-v-37f08fbf"]]);t["a"]=Ee},cf1a:function(e,t,o){"use strict";var i=o("7a23");const n={class:"chart-container"},s=["id"];function a(e,t,o,a,l,r){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",n,[Object(i["createElementVNode"])("div",{id:l.chartId,style:Object(i["normalizeStyle"])({height:"1.45rem",width:"100%"})},null,12,s)])}var l=o("22b4"),r=o("1be7"),c=o("3620"),d=o("2da7"),m=o("4b2a"),u=o("5e81"),h=o("e600"),b=o("ee29"),p=o("c55a"),v=o("f95e"),g=o("ec26");l["a"]([d["a"],m["a"],u["a"],h["a"],c["a"],b["a"],p["a"],v["a"]]);var f={name:"PriceChart",props:{dataX:Array,dataY:Array},data(){return{chartId:"chart-"+Object(g["a"])(),myChart:null,loading:!1}},watch:{dataY(){this.init()}},mounted(){this.init()},methods:{init(e=this.dataX,t=this.dataY){let o=e.map(e=>this.$f.formatDate(e,"MM-DD HH:mm"));if(!document.getElementById(this.chartId))return;let i=r["b"](document.getElementById(this.chartId));i||(i=r["c"](document.getElementById(this.chartId)));var n={tooltip:{trigger:"axis",appendToBody:!0},grid:{left:"0",right:"0",top:"5%",bottom:"3%",containLabel:!0},xAxis:{data:o,axisLine:{show:!1,lineStyle:{color:"#23293C"}},axisLabel:{show:!1,color:"#777"},axisTick:{show:!1},nameTextStyle:{fontSize:12}},yAxis:{type:"value",name:"",nameTextStyle:{fontSize:14},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1,lineStyle:{type:"solid",color:["#FF646D"]}}},series:[{name:"",type:"line",data:t,smooth:!0,symbolSize:3,areaStyle:{color:"#558BED",opacity:.2},itemStyle:{color:"#558BED",lineStyle:{color:"#558BED"}},tooltip:{valueFormatter:e=>this.$f.formatNumberCurrencyUnit(e||0,3,4)}}]};i.setOption(n)}}},k=(o("fcef"),o("6b0d")),O=o.n(k);const j=O()(f,[["render",a],["__scopeId","data-v-08c733db"]]);t["a"]=j},cffb:function(e,t,o){},d2cd:function(e,t,o){},d40b:function(e,t,o){},df7a:function(e,t,o){},e524:function(e,t,o){e.exports=o.p+"static/img/arrow-right.484eb652.svg"},e886:function(e,t,o){},f6ba:function(e,t,o){"use strict";o("3dfd")},f898:function(e,t,o){},fadf:function(e,t,o){"use strict";var i=o("7a23");const n=e=>(Object(i["pushScopeId"])("data-v-a962d930"),e=e(),Object(i["popScopeId"])(),e),s={class:"select-box"},a={class:"flex items-center"},l={key:0,class:"color-999"},r=Object(i["createTextVNode"])("("),c=Object(i["createTextVNode"])(")"),d=n(()=>Object(i["createElementVNode"])("span",{class:"mr-5 ml-5"},"|",-1)),m={style:{"margin-right":"0.1rem"}},u=n(()=>Object(i["createElementVNode"])("span",{class:"mr-5 ml-5"},"|",-1)),h={class:"mr-5"},b={style:{background:"#fff",padding:"0 0.3rem 1rem 0.3rem","--van-cell-background-color":"transparent"}},p={class:"setting-title"},v={class:"slippage-setting"},g=Object(i["createTextVNode"])("%"),f={key:0,class:"class-b-s"},k={class:"setting-title flex items-center justify-between"},O={class:"mr-5"},j=Object(i["createTextVNode"])("NEW"),w=n(()=>Object(i["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),T={class:"flex items-center justify-between text-size-14 mt-15"},y={style:{"max-width":"65%"}},S={key:0,class:"flex items-center justify-between clickable",style:{padding:"0",color:"#BFBFBF"}},N={class:"setting-title mb-0"},V={class:"inline-flex items-center"},x={class:"mr-5"},E={key:0,class:"icon-svg",style:{"font-size":"0.46rem"},"aria-hidden":"true"},_=n(()=>Object(i["createElementVNode"])("use",{"xlink:href":"#icon-HOT"},null,-1)),$=[_],B={class:"popup-title"},A={class:"form-submit mt-10"};function C(e,t,o,n,_,C){var D,I;const L=Object(i["resolveComponent"])("van-field"),F=Object(i["resolveComponent"])("van-tag"),P=Object(i["resolveComponent"])("van-switch"),U=Object(i["resolveComponent"])("van-icon"),R=Object(i["resolveComponent"])("van-divider"),M=Object(i["resolveComponent"])("van-radio"),z=Object(i["resolveComponent"])("van-cell"),q=Object(i["resolveComponent"])("van-radio-group"),W=Object(i["resolveComponent"])("van-button"),H=Object(i["resolveComponent"])("van-action-sheet"),Q=Object(i["resolveComponent"])("van-checkbox"),G=Object(i["resolveComponent"])("van-checkbox-group"),J=Object(i["resolveComponent"])("van-empty"),K=Object(i["resolveComponent"])("van-form"),Z=Object(i["resolveComponent"])("van-popup");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",s,[Object(i["createElementVNode"])("div",a,[C.isSwapMode?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:0},[Object(i["createElementVNode"])("span",{style:Object(i["normalizeStyle"])([{"text-align":"right"},{color:"protect"===o.swapMode?"#F81111":"",fontWeight:"protect"===o.swapMode?"500":"normal"}])},Object(i["toDisplayString"])(C.swapModeName),5),C.autoName?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",l,[r,Object(i["createElementVNode"])("span",{style:Object(i["normalizeStyle"])({color:"protect"===o.autoSwapMode?"#F81111":"",fontWeight:"protect"===o.autoSwapMode?"500":"normal"})},Object(i["toDisplayString"])(C.autoName),5),c])):Object(i["createCommentVNode"])("",!0),d],64)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("span",m,Object(i["toDisplayString"])("auto"===o.slippage?e.$t("autoSlippage"):e.$t("manualSlippage"))+"("+Object(i["toDisplayString"])("auto"===o.slippage?o.autoSlippage:o.slippage)+"%)",1),_.isCanBatchSwap&&(null===(D=C.selectSubWallets)||void 0===D?void 0:D.length)>0?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[u,Object(i["createElementVNode"])("span",h,Object(i["toDisplayString"])((null===(I=C.selectSubWallets)||void 0===I?void 0:I.length)||0)+" "+Object(i["toDisplayString"])(e.$t("subWallets")),1)],64)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("i",{class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[0]||(t[0]=Object(i["withModifiers"])(e=>_.show=!0,["stop"]))})]),Object(i["createVNode"])(H,{show:_.show,"onUpdate:show":t[9]||(t[9]=e=>_.show=e),title:e.$t("swapSet"),style:{"--van-popup-background-color":"#fff","min-height":"40%"}},{default:Object(i["withCtx"])(()=>{var o,n;return[Object(i["createElementVNode"])("div",b,[Object(i["createElementVNode"])("div",p,Object(i["toDisplayString"])(e.$t("slippage")),1),Object(i["createElementVNode"])("div",v,[Object(i["createElementVNode"])("button",{type:"button",class:Object(i["normalizeClass"])({active:"0.5"===_.slippageValue}),onClick:t[1]||(t[1]=e=>_.slippageValue="0.5")},"0.5%",2),Object(i["createElementVNode"])("button",{type:"button",class:Object(i["normalizeClass"])({active:"1"===_.slippageValue}),onClick:t[2]||(t[2]=e=>_.slippageValue="1")},"1%",2),Object(i["createElementVNode"])("button",{type:"button",class:Object(i["normalizeClass"])({active:void 0===_.slippageValue}),onClick:t[3]||(t[3]=e=>_.slippageValue=void 0)},Object(i["toDisplayString"])(e.$t("smartSetting")),3),Object(i["createVNode"])(L,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",placeholder:e.$t("custom"),modelValue:_.slippageValue,"onUpdate:modelValue":t[4]||(t[4]=e=>_.slippageValue=e),onBlur:C.handleBlur,clearable:""},{"right-icon":Object(i["withCtx"])(()=>[g]),_:1},8,["placeholder","modelValue","onBlur"])]),_.isCanBatchSwap?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",f,[Object(i["createElementVNode"])("div",k,[Object(i["createElementVNode"])("span",O,Object(i["toDisplayString"])(e.$t("batchSwap")),1),Object(i["createVNode"])(F,{type:"danger",color:"#eb5139"},{default:Object(i["withCtx"])(()=>[j]),_:1}),w,Object(i["createVNode"])(P,{modelValue:_.isBatchSwap,"onUpdate:modelValue":t[5]||(t[5]=e=>_.isBatchSwap=e),size:"0.32rem","inactive-color":"#BFBFBF"},null,8,["modelValue"])]),Object(i["createElementVNode"])("div",T,[Object(i["createElementVNode"])("span",y,Object(i["toDisplayString"])(e.$t("selectAddressCanSwapSameTime")),1),_.isBatchSwap?0===(null===(o=C.selectSubWallets)||void 0===o?void 0:o.length)?(Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{key:1,onClick:t[6]||(t[6]=Object(i["withModifiers"])(e=>_.selectSubWalletVisible=!0,["stop"])),class:"flex items-center justify-between clickable",style:{padding:"0",color:"#F6465D"}},[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("plsSelectAddress")),1),Object(i["createVNode"])(U,{name:"arrow"})])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{key:2,class:"flex items-center justify-between clickable text-right",style:{padding:"0",color:"#3F80F7"},onClick:t[7]||(t[7]=Object(i["withModifiers"])(e=>_.selectSubWalletVisible=!0,["stop"]))},[Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.$t("selectedAddress",{n:null===(n=C.selectSubWallets)||void 0===n?void 0:n.length})),1),Object(i["createVNode"])(U,{name:"arrow"})])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("button",S,[Object(i["createVNode"])(U,{name:"arrow"})]))])])):Object(i["createCommentVNode"])("",!0),C.isSwapMode?(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],{key:1},[_.isCanBatchSwap?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(R,{key:0,style:{margin:"0.4rem 0"}})),Object(i["createElementVNode"])("div",N,Object(i["toDisplayString"])(e.$t("swapMode")),1),Object(i["createVNode"])(q,{modelValue:_.swapModeValue,"onUpdate:modelValue":t[8]||(t[8]=e=>_.swapModeValue=e),style:{"--van-cell-label-margin-top":"0"}},{default:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(C.typeSwapMode,e=>(Object(i["openBlock"])(),Object(i["createBlock"])(z,{key:e.value,border:!1,clickable:"",onClick:t=>_.swapModeValue=e.value,style:{padding:"0.16rem 0"}},{title:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("div",V,[Object(i["createElementVNode"])("i",{class:Object(i["normalizeClass"])("iconfont icon-"+e.icon)},null,2),Object(i["createElementVNode"])("span",x,Object(i["toDisplayString"])(e.name),1),"auto"===e.value?(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",E,$)):Object(i["createCommentVNode"])("",!0)])]),label:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.label),1)]),"right-icon":Object(i["withCtx"])(()=>[Object(i["createVNode"])(M,{"icon-size":"0.3rem",name:e.value},null,8,["name"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue"])],64)):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(W,{block:"",type:"primary","native-type":"button",color:"#3F80F7",class:"submit-btn",style:Object(i["normalizeStyle"])({marginTop:C.isSwapMode?"0.5rem":"1.5rem"}),onClick:Object(i["withModifiers"])(C.submitSwapSet,["stop"])},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("confirm")),1)]),_:1},8,["style","onClick"])])]}),_:1},8,["show","title"]),Object(i["createVNode"])(Z,{show:_.selectSubWalletVisible,"onUpdate:show":t[12]||(t[12]=e=>_.selectSubWalletVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(i["withCtx"])(()=>[Object(i["createElementVNode"])("h3",B,Object(i["toDisplayString"])(e.$t("selectSubWallet")),1),Object(i["createVNode"])(K,{class:"popup-content",onSubmit:C.confirmSubmitSelectSubWallet},{default:Object(i["withCtx"])(()=>{var o;return[C.subWallets&&(null===(o=C.subWallets)||void 0===o?void 0:o.length)>0?(Object(i["openBlock"])(),Object(i["createBlock"])(G,{key:0,modelValue:_.subWalletChecked,"onUpdate:modelValue":t[11]||(t[11]=e=>_.subWalletChecked=e),style:{"max-height":"50vh","min-height":"30vh","--van-cell-horizontal-padding":"0.1rem","--van-cell-background-color":"transparent","overflow-y":"auto"}},{default:Object(i["withCtx"])(()=>[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(C.subWallets,(e,o)=>{var n,s,a,l;return Object(i["openBlock"])(),Object(i["createBlock"])(z,{clickable:"",key:e,border:!1,title:`${e.name}(${null===e||void 0===e||null===(n=e.address)||void 0===n||null===(s=n.slice)||void 0===s?void 0:s.call(n,0,4)}...${null===e||void 0===e||null===(a=e.address)||void 0===a||null===(l=a.slice)||void 0===l?void 0:l.call(a,-4)})`,onClick:e=>C.toggle(o)},{"right-icon":Object(i["withCtx"])(()=>[Object(i["createVNode"])(Q,{name:e.address,ref_for:!0,ref:"checkbox-"+o,onClick:t[10]||(t[10]=Object(i["withModifiers"])(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"])}),128))]),_:1},8,["modelValue"])):(Object(i["openBlock"])(),Object(i["createBlock"])(J,{key:1,style:{"--van-empty-padding":"0.1rem 0 0.5rem 0","--van-empty-description-color":"#888"},description:e.$t("noWallets")},null,8,["description"])),Object(i["createElementVNode"])("div",A,[Object(i["createVNode"])(W,{class:"btn",style:{"border-radius":"0.08rem"},block:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(i["withCtx"])(()=>[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.$t("confirm1")),1)]),_:1})])]}),_:1},8,["onSubmit"])]),_:1},8,["show"])])}var D=o("2c28");const I=o("ddc3");var L={name:"SwapSelectMode",props:{autoSwapMode:String,swapMode:String,slippage:{type:String,default:"2"},autoSlippage:String},emits:["update:swapMode","update:slippage"],setup(){let e=Object(D["useStorage"])("batchSwapClicked",!1,localStorage);return{batchSwapClicked:e}},data(){var e,t;return{show:!1,slippageValue:"auto"===this.slippage?void 0:this.slippage,swapModeValue:this.swapMode,isBatchSwap:(null===(e=this.$store.state)||void 0===e?void 0:e.isBatchSwap)||!1,addressList:[],selectSubWalletVisible:!1,subWalletChecked:[],isCanBatchSwap:!(null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||!t.appSelectSubWallet)||!1}},computed:{typeSwapMode(){return[{name:this.$t("fastMode"),value:"fast",label:this.$t("fastLabel"),icon:"jisu",symbol:this.$t("fast")},{name:this.$t("semi-privateMode"),value:"private",label:this.$t("semi-privateLabel"),icon:"banyinsi",symbol:this.$t("semi-Private")},{name:this.$t("privacy"),value:"protect",label:this.$t("protectLabel"),icon:"yinsi",symbol:this.$t("protect")},{name:this.$t("smartMode"),value:"auto",label:this.$t("smartLabel"),icon:"zhineng"}]},swapModeName(){var e;return null===(e=this.typeSwapMode.find(e=>e.value===this.swapMode))||void 0===e?void 0:e.name},autoName(){if("auto"===this.swapMode){var e;let t=null===(e=this.typeSwapMode.find(e=>e.value===this.autoSwapMode))||void 0===e?void 0:e.symbol;return""+t}return""},isSwapMode(){var e,t,o,i,n,s,a,l,r,c;let d=window.navigator.userAgent;if(d.includes("OSType/2")){var m,u;let e=d.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),t=I.gte(e,"2.3.0");return(null===(m=(u=["eth","bsc"]).includes)||void 0===m?void 0:m.call(u,this.$store.getters.netId))&&t}let h=null===(e=(null===(o=window)||void 0===o?void 0:o.main)||(null===(i=window)||void 0===i?void 0:i._tw_)||{})||void 0===e||null===(t=e.appGetPlatform)||void 0===t?void 0:t.call(e),b=null===(n=(null===(a=window)||void 0===a?void 0:a.main)||(null===(l=window)||void 0===l?void 0:l._tw_)||{})||void 0===n||null===(s=n.getAppVersionCode)||void 0===s?void 0:s.call(n),p="android"===h&&b>112;return(null===(r=(c=["eth","bsc"]).includes)||void 0===r?void 0:r.call(c,this.$store.getters.netId))&&p},subWallets(){return this.$store.state.subWallets||[]},selectSubWallets(){return this.$store.getters.selectSubWallets||[]}},watch:{show(e){var t,o,i;e&&(this.slippageValue="auto"===this.slippage?void 0:this.slippage,this.isBatchSwap=(null===(i=this.$store.state)||void 0===i?void 0:i.isBatchSwap)||!1,console.log("subWallets",this.subWallets));console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(o=t.isRefreshEnable)||void 0===o||o.call(t,"bridge",!e)},selectSubWalletVisible(e){e&&(this.subWalletChecked=this.selectSubWallets.map(e=>e.address))}},methods:{handleBlur(){"auto"!==this.slippageValue&&(this.show&&Number(this.slippageValue)<0&&(this.slippageValue="0"),this.show&&Number(this.slippageValue)>49.99&&(this.slippageValue="49.99"))},submitSwapSet(){this.$emit("update:swapMode",this.swapModeValue),localStorage.swapMode=this.swapModeValue,void 0===this.slippageValue?(this.$emit("update:slippage","auto"),localStorage.swapSlippage="auto"):(this.$emit("update:slippage",this.slippageValue),localStorage.swapSlippage=this.slippageValue),this.$store.state.isBatchSwap=this.isBatchSwap,this.isBatchSwap||this.$store.commit("setSelectSubWallets",[]),this.show=!1},confirmSubmitSelectSubWallet(){var e,t;console.log("confirmSubmitSelectSubWallet----");let o=null===(e=this.subWallets)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,e=>this.subWalletChecked.includes(e.address));console.log(o),this.$store.commit("setSelectSubWallets",o),this.selectSubWalletVisible=!1},toggle(e){var t,o;null===(t=this.$refs["checkbox-"+e])||void 0===t||null===(t=t[0])||void 0===t||null===(o=t.toggle)||void 0===o||o.call(t)}}},F=(o("a6ec"),o("6b0d")),P=o.n(F);const U=P()(L,[["render",C],["__scopeId","data-v-a962d930"]]);t["a"]=U},fcef:function(e,t,o){"use strict";o("0e64")}}]);